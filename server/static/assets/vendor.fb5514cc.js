function $r(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}var li=1,ui=2,ze=3,jr=4,Dn=5,Ks=6378137,Vr=6356752314e-3,Xs=.0066943799901413165,Qi=484813681109536e-20,C=Math.PI/2,Kr=.16666666666666666,Xr=.04722222222222222,Qr=.022156084656084655,E=1e-10,ft=.017453292519943295,Bt=57.29577951308232,j=Math.PI/4,Ji=Math.PI*2,st=3.14159265359,pt={};pt.greenwich=0;pt.lisbon=-9.131906111111;pt.paris=2.337229166667;pt.bogota=-74.080916666667;pt.madrid=-3.687938888889;pt.rome=12.452333333333;pt.bern=7.439583333333;pt.jakarta=106.807719444444;pt.ferro=-17.666666666667;pt.brussels=4.367975;pt.stockholm=18.058277777778;pt.athens=23.7163375;pt.oslo=10.722916666667;var Jr={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},Qs=/[\s_\-\/\(\)]/g;function ii(e,s){if(e[s])return e[s];for(var a=Object.keys(e),l=s.toLowerCase().replace(Qs,""),o=-1,u,c;++o<a.length;)if(u=a[o],c=u.toLowerCase().replace(Qs,""),c===l)return e[u]}function qn(e){var s={},a=e.split("+").map(function(f){return f.trim()}).filter(function(f){return f}).reduce(function(f,_){var m=_.split("=");return m.push(!0),f[m[0].toLowerCase()]=m[1],f},{}),l,o,u,c={proj:"projName",datum:"datumCode",rf:function(f){s.rf=parseFloat(f)},lat_0:function(f){s.lat0=f*ft},lat_1:function(f){s.lat1=f*ft},lat_2:function(f){s.lat2=f*ft},lat_ts:function(f){s.lat_ts=f*ft},lon_0:function(f){s.long0=f*ft},lon_1:function(f){s.long1=f*ft},lon_2:function(f){s.long2=f*ft},alpha:function(f){s.alpha=parseFloat(f)*ft},gamma:function(f){s.rectified_grid_angle=parseFloat(f)},lonc:function(f){s.longc=f*ft},x_0:function(f){s.x0=parseFloat(f)},y_0:function(f){s.y0=parseFloat(f)},k_0:function(f){s.k0=parseFloat(f)},k:function(f){s.k0=parseFloat(f)},a:function(f){s.a=parseFloat(f)},b:function(f){s.b=parseFloat(f)},r_a:function(){s.R_A=!0},zone:function(f){s.zone=parseInt(f,10)},south:function(){s.utmSouth=!0},towgs84:function(f){s.datum_params=f.split(",").map(function(_){return parseFloat(_)})},to_meter:function(f){s.to_meter=parseFloat(f)},units:function(f){s.units=f;var _=ii(Jr,f);_&&(s.to_meter=_.to_meter)},from_greenwich:function(f){s.from_greenwich=f*ft},pm:function(f){var _=ii(pt,f);s.from_greenwich=(_||parseFloat(f))*ft},nadgrids:function(f){f==="@null"?s.datumCode="none":s.nadgrids=f},axis:function(f){var _="ewnsud";f.length===3&&_.indexOf(f.substr(0,1))!==-1&&_.indexOf(f.substr(1,1))!==-1&&_.indexOf(f.substr(2,1))!==-1&&(s.axis=f)},approx:function(){s.approx=!0}};for(l in a)o=a[l],l in c?(u=c[l],typeof u=="function"?u(o):s[u]=o):s[l]=o;return typeof s.datumCode=="string"&&s.datumCode!=="WGS84"&&(s.datumCode=s.datumCode.toLowerCase()),s}var Yi=1,Js=2,Ys=3,ke=4,ta=5,Gn=-1,Yr=/\s/,to=/[A-Za-z]/,io=/[A-Za-z84]/,Be=/[,\]]/,ia=/[\d\.E\-\+]/;function jt(e){if(typeof e!="string")throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Yi}jt.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==ke)for(;Yr.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case Yi:return this.neutral(e);case Js:return this.keyword(e);case ke:return this.quoted(e);case ta:return this.afterquote(e);case Ys:return this.number(e);case Gn:return}};jt.prototype.afterquote=function(e){if(e==='"'){this.word+='"',this.state=ke;return}if(Be.test(e)){this.word=this.word.trim(),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in afterquote yet, index '+this.place)};jt.prototype.afterItem=function(e){if(e===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Yi;return}if(e==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Yi,this.currentObject=this.stack.pop(),this.currentObject||(this.state=Gn);return}};jt.prototype.number=function(e){if(ia.test(e)){this.word+=e;return}if(Be.test(e)){this.word=parseFloat(this.word),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in number yet, index '+this.place)};jt.prototype.quoted=function(e){if(e==='"'){this.state=ta;return}this.word+=e};jt.prototype.keyword=function(e){if(io.test(e)){this.word+=e;return}if(e==="["){var s=[];s.push(this.word),this.level++,this.root===null?this.root=s:this.currentObject.push(s),this.stack.push(this.currentObject),this.currentObject=s,this.state=Yi;return}if(Be.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in keyword yet, index '+this.place)};jt.prototype.neutral=function(e){if(to.test(e)){this.word=e,this.state=Js;return}if(e==='"'){this.word="",this.state=ke;return}if(ia.test(e)){this.word=e,this.state=Ys;return}if(Be.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in neutral yet, index '+this.place)};jt.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===Gn)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function eo(e){var s=new jt(e);return s.output()}function ea(e,s,a){Array.isArray(s)&&(a.unshift(s),s=null);var l=s?{}:e,o=a.reduce(function(u,c){return Ti(c,u),u},l);s&&(e[s]=o)}function Ti(e,s){if(!Array.isArray(e)){s[e]=!0;return}var a=e.shift();if(a==="PARAMETER"&&(a=e.shift()),e.length===1){if(Array.isArray(e[0])){s[a]={},Ti(e[0],s[a]);return}s[a]=e[0];return}if(!e.length){s[a]=!0;return}if(a==="TOWGS84"){s[a]=e;return}if(a==="AXIS"){a in s||(s[a]=[]),s[a].push(e);return}Array.isArray(a)||(s[a]={});var l;switch(a){case"UNIT":case"PRIMEM":case"VERT_DATUM":s[a]={name:e[0].toLowerCase(),convert:e[1]},e.length===3&&Ti(e[2],s[a]);return;case"SPHEROID":case"ELLIPSOID":s[a]={name:e[0],a:e[1],rf:e[2]},e.length===4&&Ti(e[3],s[a]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":e[0]=["name",e[0]],ea(s,a,e);return;default:for(l=-1;++l<e.length;)if(!Array.isArray(e[l]))return Ti(e,s[a]);return ea(s,a,e)}}var no=.017453292519943295;function so(e,s){var a=s[0],l=s[1];!(a in e)&&l in e&&(e[a]=e[l],s.length===3&&(e[a]=s[2](e[a])))}function Vt(e){return e*no}function ao(e){if(e.type==="GEOGCS"?e.projName="longlat":e.type==="LOCAL_CS"?(e.projName="identity",e.local=!0):typeof e.PROJECTION=="object"?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var s="",a=0,l=e.AXIS.length;a<l;++a){var o=[e.AXIS[a][0].toLowerCase(),e.AXIS[a][1].toLowerCase()];o[0].indexOf("north")!==-1||(o[0]==="y"||o[0]==="lat")&&o[1]==="north"?s+="n":o[0].indexOf("south")!==-1||(o[0]==="y"||o[0]==="lat")&&o[1]==="south"?s+="s":o[0].indexOf("east")!==-1||(o[0]==="x"||o[0]==="lon")&&o[1]==="east"?s+="e":(o[0].indexOf("west")!==-1||(o[0]==="x"||o[0]==="lon")&&o[1]==="west")&&(s+="w")}s.length===2&&(s+="u"),s.length===3&&(e.axis=s)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.UNIT.convert&&(e.type==="GEOGCS"?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var u=e.GEOGCS;e.type==="GEOGCS"&&(u=e),u&&(u.DATUM?e.datumCode=u.DATUM.name.toLowerCase():e.datumCode=u.name.toLowerCase(),e.datumCode.slice(0,2)==="d_"&&(e.datumCode=e.datumCode.slice(2)),(e.datumCode==="new_zealand_geodetic_datum_1949"||e.datumCode==="new_zealand_1949")&&(e.datumCode="nzgd49"),(e.datumCode==="wgs_1984"||e.datumCode==="world_geodetic_system_1984")&&(e.PROJECTION==="Mercator_Auxiliary_Sphere"&&(e.sphere=!0),e.datumCode="wgs84"),e.datumCode.slice(-6)==="_ferro"&&(e.datumCode=e.datumCode.slice(0,-6)),e.datumCode.slice(-8)==="_jakarta"&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),u.DATUM&&u.DATUM.SPHEROID&&(e.ellps=u.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),e.ellps.toLowerCase().slice(0,13)==="international"&&(e.ellps="intl"),e.a=u.DATUM.SPHEROID.a,e.rf=parseFloat(u.DATUM.SPHEROID.rf,10)),u.DATUM&&u.DATUM.TOWGS84&&(e.datum_params=u.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),e.datumCode==="ch1903+"&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a);function c(m){var y=e.to_meter||1;return m*y}var f=function(m){return so(e,m)},_=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Vt],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Vt],["x0","false_easting",c],["y0","false_northing",c],["long0","central_meridian",Vt],["lat0","latitude_of_origin",Vt],["lat0","standard_parallel_1",Vt],["lat1","standard_parallel_1",Vt],["lat2","standard_parallel_2",Vt],["azimuth","Azimuth"],["alpha","azimuth",Vt],["srsCode","name"]];_.forEach(f),!e.long0&&e.longc&&(e.projName==="Albers_Conic_Equal_Area"||e.projName==="Lambert_Azimuthal_Equal_Area")&&(e.long0=e.longc),!e.lat_ts&&e.lat1&&(e.projName==="Stereographic_South_Pole"||e.projName==="Polar Stereographic (variant B)")&&(e.lat0=Vt(e.lat1>0?90:-90),e.lat_ts=e.lat1)}function na(e){var s=eo(e),a=s.shift(),l=s.shift();s.unshift(["name",l]),s.unshift(["type",a]);var o={};return Ti(s,o),ao(o),o}function dt(e){var s=this;if(arguments.length===2){var a=arguments[1];typeof a=="string"?a.charAt(0)==="+"?dt[e]=qn(arguments[1]):dt[e]=na(arguments[1]):dt[e]=a}else if(arguments.length===1){if(Array.isArray(e))return e.map(function(l){Array.isArray(l)?dt.apply(s,l):dt(l)});if(typeof e=="string"){if(e in dt)return dt[e]}else"EPSG"in e?dt["EPSG:"+e.EPSG]=e:"ESRI"in e?dt["ESRI:"+e.ESRI]=e:"IAU2000"in e?dt["IAU2000:"+e.IAU2000]=e:console.log(e);return}}$r(dt);function ro(e){return typeof e=="string"}function oo(e){return e in dt}var ho=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function lo(e){return ho.some(function(s){return e.indexOf(s)>-1})}var uo=["3857","900913","3785","102113"];function fo(e){var s=ii(e,"authority");if(!!s){var a=ii(s,"epsg");return a&&uo.indexOf(a)>-1}}function co(e){var s=ii(e,"extension");if(!!s)return ii(s,"proj4")}function _o(e){return e[0]==="+"}function mo(e){if(ro(e)){if(oo(e))return dt[e];if(lo(e)){var s=na(e);if(fo(s))return dt["EPSG:3857"];var a=co(s);return a?qn(a):s}if(_o(e))return qn(e)}else return e}function sa(e,s){e=e||{};var a,l;if(!s)return e;for(l in s)a=s[l],a!==void 0&&(e[l]=a);return e}function Rt(e,s,a){var l=e*s;return a/Math.sqrt(1-l*l)}function te(e){return e<0?-1:1}function I(e){return Math.abs(e)<=st?e:e-te(e)*Ji}function Et(e,s,a){var l=e*a,o=.5*e;return l=Math.pow((1-l)/(1+l),o),Math.tan(.5*(C-s))/l}function ie(e,s){for(var a=.5*e,l,o,u=C-2*Math.atan(s),c=0;c<=15;c++)if(l=e*Math.sin(u),o=C-2*Math.atan(s*Math.pow((1-l)/(1+l),a))-u,u+=o,Math.abs(o)<=1e-10)return u;return-9999}function vo(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Rt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function po(e){var s=e.x,a=e.y;if(a*Bt>90&&a*Bt<-90&&s*Bt>180&&s*Bt<-180)return null;var l,o;if(Math.abs(Math.abs(a)-C)<=E)return null;if(this.sphere)l=this.x0+this.a*this.k0*I(s-this.long0),o=this.y0+this.a*this.k0*Math.log(Math.tan(j+.5*a));else{var u=Math.sin(a),c=Et(this.e,a,u);l=this.x0+this.a*this.k0*I(s-this.long0),o=this.y0-this.a*this.k0*Math.log(c)}return e.x=l,e.y=o,e}function go(e){var s=e.x-this.x0,a=e.y-this.y0,l,o;if(this.sphere)o=C-2*Math.atan(Math.exp(-a/(this.a*this.k0)));else{var u=Math.exp(-a/(this.a*this.k0));if(o=ie(this.e,u),o===-9999)return null}return l=I(this.long0+s/(this.a*this.k0)),e.x=l,e.y=o,e}var yo=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"],Mo={init:vo,forward:po,inverse:go,names:yo};function xo(){}function aa(e){return e}var wo=["longlat","identity"],Po={init:xo,forward:aa,inverse:aa,names:wo},bo=[Mo,Po],Re={},Ze=[];function ra(e,s){var a=Ze.length;return e.names?(Ze[a]=e,e.names.forEach(function(l){Re[l.toLowerCase()]=a}),this):(console.log(s),!0)}function Lo(e){if(!e)return!1;var s=e.toLowerCase();if(typeof Re[s]!="undefined"&&Ze[Re[s]])return Ze[Re[s]]}function To(){bo.forEach(ra)}var Co={start:To,add:ra,get:Lo},R={};R.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};R.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};R.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};R.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};R.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};R.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};R.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};R.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};R.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};R.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};R.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};R.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};R.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};R.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};R.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};R.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};R.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};R.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};R.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};R.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};R.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};R.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};R.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};R.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};R.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};R.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};R.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};R.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};R.hough={a:6378270,rf:297,ellipseName:"Hough"};R.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};R.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};R.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};R.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};R.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};R.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};R.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};R.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};R.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};R.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};R.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};R.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var So=R.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};R.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function Eo(e,s,a,l){var o=e*e,u=s*s,c=(o-u)/o,f=0;l?(e*=1-c*(Kr+c*(Xr+c*Qr)),o=e*e,c=0):f=Math.sqrt(c);var _=(o-u)/u;return{es:c,e:f,ep2:_}}function Ao(e,s,a,l,o){if(!e){var u=ii(R,l);u||(u=So),e=u.a,s=u.b,a=u.rf}return a&&!s&&(s=(1-1/a)*e),(a===0||Math.abs(e-s)<E)&&(o=!0,s=e),{a:e,b:s,rf:a,sphere:o}}var ut={};ut.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};ut.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};ut.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};ut.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};ut.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};ut.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};ut.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};ut.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};ut.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};ut.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};ut.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};ut.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};ut.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};ut.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};ut.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};ut.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};ut.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function Io(e,s,a,l,o,u,c){var f={};return e===void 0||e==="none"?f.datum_type=Dn:f.datum_type=jr,s&&(f.datum_params=s.map(parseFloat),(f.datum_params[0]!==0||f.datum_params[1]!==0||f.datum_params[2]!==0)&&(f.datum_type=li),f.datum_params.length>3&&(f.datum_params[3]!==0||f.datum_params[4]!==0||f.datum_params[5]!==0||f.datum_params[6]!==0)&&(f.datum_type=ui,f.datum_params[3]*=Qi,f.datum_params[4]*=Qi,f.datum_params[5]*=Qi,f.datum_params[6]=f.datum_params[6]/1e6+1)),c&&(f.datum_type=ze,f.grids=c),f.a=a,f.b=l,f.es=o,f.ep2=u,f}var oa={};function Oo(e,s){var a=new DataView(s),l=ko(a),o=Bo(a,l);o.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var u=Ro(a,o,l),c={header:o,subgrids:u};return oa[e]=c,c}function No(e){if(e===void 0)return null;var s=e.split(",");return s.map(zo)}function zo(e){if(e.length===0)return null;var s=e[0]==="@";return s&&(e=e.slice(1)),e==="null"?{name:"null",mandatory:!s,grid:null,isNull:!0}:{name:e,mandatory:!s,grid:oa[e]||null,isNull:!1}}function Ci(e){return e/3600*Math.PI/180}function ko(e){var s=e.getInt32(8,!1);return s===11?!1:(s=e.getInt32(8,!0),s!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function Bo(e,s){return{nFields:e.getInt32(8,s),nSubgridFields:e.getInt32(24,s),nSubgrids:e.getInt32(40,s),shiftType:Fn(e,56,56+8).trim(),fromSemiMajorAxis:e.getFloat64(120,s),fromSemiMinorAxis:e.getFloat64(136,s),toSemiMajorAxis:e.getFloat64(152,s),toSemiMinorAxis:e.getFloat64(168,s)}}function Fn(e,s,a){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(s,a)))}function Ro(e,s,a){for(var l=176,o=[],u=0;u<s.nSubgrids;u++){var c=Do(e,l,a),f=qo(e,l,c,a),_=Math.round(1+(c.upperLongitude-c.lowerLongitude)/c.longitudeInterval),m=Math.round(1+(c.upperLatitude-c.lowerLatitude)/c.latitudeInterval);o.push({ll:[Ci(c.lowerLongitude),Ci(c.lowerLatitude)],del:[Ci(c.longitudeInterval),Ci(c.latitudeInterval)],lim:[_,m],count:c.gridNodeCount,cvs:Zo(f)})}return o}function Zo(e){return e.map(function(s){return[Ci(s.longitudeShift),Ci(s.latitudeShift)]})}function Do(e,s,a){return{name:Fn(e,s+8,s+16).trim(),parent:Fn(e,s+24,s+24+8).trim(),lowerLatitude:e.getFloat64(s+72,a),upperLatitude:e.getFloat64(s+88,a),lowerLongitude:e.getFloat64(s+104,a),upperLongitude:e.getFloat64(s+120,a),latitudeInterval:e.getFloat64(s+136,a),longitudeInterval:e.getFloat64(s+152,a),gridNodeCount:e.getInt32(s+168,a)}}function qo(e,s,a,l){for(var o=s+176,u=16,c=[],f=0;f<a.gridNodeCount;f++){var _={latitudeShift:e.getFloat32(o+f*u,l),longitudeShift:e.getFloat32(o+f*u+4,l),latitudeAccuracy:e.getFloat32(o+f*u+8,l),longitudeAccuracy:e.getFloat32(o+f*u+12,l)};c.push(_)}return c}function Zt(e,s){if(!(this instanceof Zt))return new Zt(e);s=s||function(m){if(m)throw m};var a=mo(e);if(typeof a!="object"){s(e);return}var l=Zt.projections.get(a.projName);if(!l){s(e);return}if(a.datumCode&&a.datumCode!=="none"){var o=ii(ut,a.datumCode);o&&(a.datum_params=a.datum_params||(o.towgs84?o.towgs84.split(","):null),a.ellps=o.ellipse,a.datumName=o.datumName?o.datumName:a.datumCode)}a.k0=a.k0||1,a.axis=a.axis||"enu",a.ellps=a.ellps||"wgs84",a.lat1=a.lat1||a.lat0;var u=Ao(a.a,a.b,a.rf,a.ellps,a.sphere),c=Eo(u.a,u.b,u.rf,a.R_A),f=No(a.nadgrids),_=a.datum||Io(a.datumCode,a.datum_params,u.a,u.b,c.es,c.ep2,f);sa(this,a),sa(this,l),this.a=u.a,this.b=u.b,this.rf=u.rf,this.sphere=u.sphere,this.es=c.es,this.e=c.e,this.ep2=c.ep2,this.datum=_,this.init(),s(null,this)}Zt.projections=Co;Zt.projections.start();function Go(e,s){return e.datum_type!==s.datum_type||e.a!==s.a||Math.abs(e.es-s.es)>5e-11?!1:e.datum_type===li?e.datum_params[0]===s.datum_params[0]&&e.datum_params[1]===s.datum_params[1]&&e.datum_params[2]===s.datum_params[2]:e.datum_type===ui?e.datum_params[0]===s.datum_params[0]&&e.datum_params[1]===s.datum_params[1]&&e.datum_params[2]===s.datum_params[2]&&e.datum_params[3]===s.datum_params[3]&&e.datum_params[4]===s.datum_params[4]&&e.datum_params[5]===s.datum_params[5]&&e.datum_params[6]===s.datum_params[6]:!0}function ha(e,s,a){var l=e.x,o=e.y,u=e.z?e.z:0,c,f,_,m;if(o<-C&&o>-1.001*C)o=-C;else if(o>C&&o<1.001*C)o=C;else{if(o<-C)return{x:-1/0,y:-1/0,z:e.z};if(o>C)return{x:1/0,y:1/0,z:e.z}}return l>Math.PI&&(l-=2*Math.PI),f=Math.sin(o),m=Math.cos(o),_=f*f,c=a/Math.sqrt(1-s*_),{x:(c+u)*m*Math.cos(l),y:(c+u)*m*Math.sin(l),z:(c*(1-s)+u)*f}}function la(e,s,a,l){var o=1e-12,u=o*o,c=30,f,_,m,y,p,x,T,P,w,S,O,k,z,$=e.x,q=e.y,G=e.z?e.z:0,ot,X,mt;if(f=Math.sqrt($*$+q*q),_=Math.sqrt($*$+q*q+G*G),f/a<o){if(ot=0,_/a<o)return X=C,mt=-l,{x:e.x,y:e.y,z:e.z}}else ot=Math.atan2(q,$);m=G/_,y=f/_,p=1/Math.sqrt(1-s*(2-s)*y*y),P=y*(1-s)*p,w=m*p,z=0;do z++,T=a/Math.sqrt(1-s*w*w),mt=f*P+G*w-T*(1-s*w*w),x=s*T/(T+mt),p=1/Math.sqrt(1-x*(2-x)*y*y),S=y*(1-x)*p,O=m*p,k=O*P-S*w,P=S,w=O;while(k*k>u&&z<c);return X=Math.atan(O/Math.abs(S)),{x:ot,y:X,z:mt}}function Fo(e,s,a){if(s===li)return{x:e.x+a[0],y:e.y+a[1],z:e.z+a[2]};if(s===ui){var l=a[0],o=a[1],u=a[2],c=a[3],f=a[4],_=a[5],m=a[6];return{x:m*(e.x-_*e.y+f*e.z)+l,y:m*(_*e.x+e.y-c*e.z)+o,z:m*(-f*e.x+c*e.y+e.z)+u}}}function Wo(e,s,a){if(s===li)return{x:e.x-a[0],y:e.y-a[1],z:e.z-a[2]};if(s===ui){var l=a[0],o=a[1],u=a[2],c=a[3],f=a[4],_=a[5],m=a[6],y=(e.x-l)/m,p=(e.y-o)/m,x=(e.z-u)/m;return{x:y+_*p-f*x,y:-_*y+p+c*x,z:f*y-c*p+x}}}function De(e){return e===li||e===ui}function Uo(e,s,a){if(Go(e,s)||e.datum_type===Dn||s.datum_type===Dn)return a;var l=e.a,o=e.es;if(e.datum_type===ze){var u=ua(e,!1,a);if(u!==0)return;l=Ks,o=Xs}var c=s.a,f=s.b,_=s.es;if(s.datum_type===ze&&(c=Ks,f=Vr,_=Xs),o===_&&l===c&&!De(e.datum_type)&&!De(s.datum_type))return a;if(a=ha(a,o,l),De(e.datum_type)&&(a=Fo(a,e.datum_type,e.datum_params)),De(s.datum_type)&&(a=Wo(a,s.datum_type,s.datum_params)),a=la(a,_,c,f),s.datum_type===ze){var m=ua(s,!0,a);if(m!==0)return}return a}function ua(e,s,a){if(e.grids===null||e.grids.length===0)return console.log("Grid shift grids not found"),-1;for(var l={x:-a.x,y:a.y},o={x:Number.NaN,y:Number.NaN},u=[],c=0;c<e.grids.length;c++){var f=e.grids[c];if(u.push(f.name),f.isNull){o=l;break}if(f.grid===null){if(f.mandatory)return console.log("Unable to find mandatory grid '"+f.name+"'"),-1;continue}var _=f.grid.subgrids[0],m=(Math.abs(_.del[1])+Math.abs(_.del[0]))/1e4,y=_.ll[0]-m,p=_.ll[1]-m,x=_.ll[0]+(_.lim[0]-1)*_.del[0]+m,T=_.ll[1]+(_.lim[1]-1)*_.del[1]+m;if(!(p>l.y||y>l.x||T<l.y||x<l.x)&&(o=Ho(l,s,_),!isNaN(o.x)))break}return isNaN(o.x)?(console.log("Failed to find a grid shift table for location '"+-l.x*Bt+" "+l.y*Bt+" tried: '"+u+"'"),-1):(a.x=-o.x,a.y=o.y,0)}function Ho(e,s,a){var l={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return l;var o={x:e.x,y:e.y};o.x-=a.ll[0],o.y-=a.ll[1],o.x=I(o.x-Math.PI)+Math.PI;var u=fa(o,a);if(s){if(isNaN(u.x))return l;u.x=o.x-u.x,u.y=o.y-u.y;var c=9,f=1e-12,_,m;do{if(m=fa(u,a),isNaN(m.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}_={x:o.x-(m.x+u.x),y:o.y-(m.y+u.y)},u.x+=_.x,u.y+=_.y}while(c--&&Math.abs(_.x)>f&&Math.abs(_.y)>f);if(c<0)return console.log("Inverse grid shift iterator failed to converge."),l;l.x=I(u.x+a.ll[0]),l.y=u.y+a.ll[1]}else isNaN(u.x)||(l.x=e.x+u.x,l.y=e.y+u.y);return l}function fa(e,s){var a={x:e.x/s.del[0],y:e.y/s.del[1]},l={x:Math.floor(a.x),y:Math.floor(a.y)},o={x:a.x-1*l.x,y:a.y-1*l.y},u={x:Number.NaN,y:Number.NaN},c;if(l.x<0||l.x>=s.lim[0]||l.y<0||l.y>=s.lim[1])return u;c=l.y*s.lim[0]+l.x;var f={x:s.cvs[c][0],y:s.cvs[c][1]};c++;var _={x:s.cvs[c][0],y:s.cvs[c][1]};c+=s.lim[0];var m={x:s.cvs[c][0],y:s.cvs[c][1]};c--;var y={x:s.cvs[c][0],y:s.cvs[c][1]},p=o.x*o.y,x=o.x*(1-o.y),T=(1-o.x)*(1-o.y),P=(1-o.x)*o.y;return u.x=T*f.x+x*_.x+P*y.x+p*m.x,u.y=T*f.y+x*_.y+P*y.y+p*m.y,u}function ca(e,s,a){var l=a.x,o=a.y,u=a.z||0,c,f,_,m={};for(_=0;_<3;_++)if(!(s&&_===2&&a.z===void 0))switch(_===0?(c=l,"ew".indexOf(e.axis[_])!==-1?f="x":f="y"):_===1?(c=o,"ns".indexOf(e.axis[_])!==-1?f="y":f="x"):(c=u,f="z"),e.axis[_]){case"e":m[f]=c;break;case"w":m[f]=-c;break;case"n":m[f]=c;break;case"s":m[f]=-c;break;case"u":a[f]!==void 0&&(m.z=c);break;case"d":a[f]!==void 0&&(m.z=-c);break;default:return null}return m}function da(e){var s={x:e[0],y:e[1]};return e.length>2&&(s.z=e[2]),e.length>3&&(s.m=e[3]),s}function $o(e){_a(e.x),_a(e.y)}function _a(e){if(typeof Number.isFinite=="function"){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if(typeof e!="number"||e!==e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function jo(e,s){return(e.datum.datum_type===li||e.datum.datum_type===ui)&&s.datumCode!=="WGS84"||(s.datum.datum_type===li||s.datum.datum_type===ui)&&e.datumCode!=="WGS84"}function qe(e,s,a){var l;if(Array.isArray(a)&&(a=da(a)),$o(a),e.datum&&s.datum&&jo(e,s)&&(l=new Zt("WGS84"),a=qe(e,l,a),e=l),e.axis!=="enu"&&(a=ca(e,!1,a)),e.projName==="longlat")a={x:a.x*ft,y:a.y*ft,z:a.z||0};else if(e.to_meter&&(a={x:a.x*e.to_meter,y:a.y*e.to_meter,z:a.z||0}),a=e.inverse(a),!a)return;if(e.from_greenwich&&(a.x+=e.from_greenwich),a=Uo(e.datum,s.datum,a),!!a)return s.from_greenwich&&(a={x:a.x-s.from_greenwich,y:a.y,z:a.z||0}),s.projName==="longlat"?a={x:a.x*Bt,y:a.y*Bt,z:a.z||0}:(a=s.forward(a),s.to_meter&&(a={x:a.x/s.to_meter,y:a.y/s.to_meter,z:a.z||0})),s.axis!=="enu"?ca(s,!0,a):a}var ma=Zt("WGS84");function Wn(e,s,a){var l,o,u;return Array.isArray(a)?(l=qe(e,s,a)||{x:NaN,y:NaN},a.length>2?typeof e.name!="undefined"&&e.name==="geocent"||typeof s.name!="undefined"&&s.name==="geocent"?typeof l.z=="number"?[l.x,l.y,l.z].concat(a.splice(3)):[l.x,l.y,a[2]].concat(a.splice(3)):[l.x,l.y].concat(a.splice(2)):[l.x,l.y]):(o=qe(e,s,a),u=Object.keys(a),u.length===2||u.forEach(function(c){if(typeof e.name!="undefined"&&e.name==="geocent"||typeof s.name!="undefined"&&s.name==="geocent"){if(c==="x"||c==="y"||c==="z")return}else if(c==="x"||c==="y")return;o[c]=a[c]}),o)}function va(e){return e instanceof Zt?e:e.oProj?e.oProj:Zt(e)}function Pt(e,s,a){e=va(e);var l=!1,o;return typeof s=="undefined"?(s=e,e=ma,l=!0):(typeof s.x!="undefined"||Array.isArray(s))&&(a=s,s=e,e=ma,l=!0),s=va(s),a?Wn(e,s,a):(o={forward:function(u){return Wn(e,s,u)},inverse:function(u){return Wn(s,e,u)}},l&&(o.oProj=s),o)}var pa=6,ga="AJSAJS",ya="AFAFAF",Si=65,gt=73,bt=79,ee=86,ne=90,Vo={forward:Ma,inverse:Ko,toPoint:xa};function Ma(e,s){return s=s||5,Jo(Xo({lat:e[1],lon:e[0]}),s)}function Ko(e){var s=Hn(ba(e.toUpperCase()));return s.lat&&s.lon?[s.lon,s.lat,s.lon,s.lat]:[s.left,s.bottom,s.right,s.top]}function xa(e){var s=Hn(ba(e.toUpperCase()));return s.lat&&s.lon?[s.lon,s.lat]:[(s.left+s.right)/2,(s.top+s.bottom)/2]}function Un(e){return e*(Math.PI/180)}function wa(e){return 180*(e/Math.PI)}function Xo(e){var s=e.lat,a=e.lon,l=6378137,o=.00669438,u=.9996,c,f,_,m,y,p,x,T=Un(s),P=Un(a),w,S;S=Math.floor((a+180)/6)+1,a===180&&(S=60),s>=56&&s<64&&a>=3&&a<12&&(S=32),s>=72&&s<84&&(a>=0&&a<9?S=31:a>=9&&a<21?S=33:a>=21&&a<33?S=35:a>=33&&a<42&&(S=37)),c=(S-1)*6-180+3,w=Un(c),f=o/(1-o),_=l/Math.sqrt(1-o*Math.sin(T)*Math.sin(T)),m=Math.tan(T)*Math.tan(T),y=f*Math.cos(T)*Math.cos(T),p=Math.cos(T)*(P-w),x=l*((1-o/4-3*o*o/64-5*o*o*o/256)*T-(3*o/8+3*o*o/32+45*o*o*o/1024)*Math.sin(2*T)+(15*o*o/256+45*o*o*o/1024)*Math.sin(4*T)-35*o*o*o/3072*Math.sin(6*T));var O=u*_*(p+(1-m+y)*p*p*p/6+(5-18*m+m*m+72*y-58*f)*p*p*p*p*p/120)+5e5,k=u*(x+_*Math.tan(T)*(p*p/2+(5-m+9*y+4*y*y)*p*p*p*p/24+(61-58*m+m*m+600*y-330*f)*p*p*p*p*p*p/720));return s<0&&(k+=1e7),{northing:Math.round(k),easting:Math.round(O),zoneNumber:S,zoneLetter:Qo(s)}}function Hn(e){var s=e.northing,a=e.easting,l=e.zoneLetter,o=e.zoneNumber;if(o<0||o>60)return null;var u=.9996,c=6378137,f=.00669438,_,m=(1-Math.sqrt(1-f))/(1+Math.sqrt(1-f)),y,p,x,T,P,w,S,O,k,z=a-5e5,$=s;l<"N"&&($-=1e7),S=(o-1)*6-180+3,_=f/(1-f),w=$/u,O=w/(c*(1-f/4-3*f*f/64-5*f*f*f/256)),k=O+(3*m/2-27*m*m*m/32)*Math.sin(2*O)+(21*m*m/16-55*m*m*m*m/32)*Math.sin(4*O)+151*m*m*m/96*Math.sin(6*O),y=c/Math.sqrt(1-f*Math.sin(k)*Math.sin(k)),p=Math.tan(k)*Math.tan(k),x=_*Math.cos(k)*Math.cos(k),T=c*(1-f)/Math.pow(1-f*Math.sin(k)*Math.sin(k),1.5),P=z/(y*u);var q=k-y*Math.tan(k)/T*(P*P/2-(5+3*p+10*x-4*x*x-9*_)*P*P*P*P/24+(61+90*p+298*x+45*p*p-252*_-3*x*x)*P*P*P*P*P*P/720);q=wa(q);var G=(P-(1+2*p+x)*P*P*P/6+(5-2*x+28*p-3*x*x+8*_+24*p*p)*P*P*P*P*P/120)/Math.cos(k);G=S+wa(G);var ot;if(e.accuracy){var X=Hn({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});ot={top:X.lat,right:X.lon,bottom:q,left:G}}else ot={lat:q,lon:G};return ot}function Qo(e){var s="Z";return 84>=e&&e>=72?s="X":72>e&&e>=64?s="W":64>e&&e>=56?s="V":56>e&&e>=48?s="U":48>e&&e>=40?s="T":40>e&&e>=32?s="S":32>e&&e>=24?s="R":24>e&&e>=16?s="Q":16>e&&e>=8?s="P":8>e&&e>=0?s="N":0>e&&e>=-8?s="M":-8>e&&e>=-16?s="L":-16>e&&e>=-24?s="K":-24>e&&e>=-32?s="J":-32>e&&e>=-40?s="H":-40>e&&e>=-48?s="G":-48>e&&e>=-56?s="F":-56>e&&e>=-64?s="E":-64>e&&e>=-72?s="D":-72>e&&e>=-80&&(s="C"),s}function Jo(e,s){var a="00000"+e.easting,l="00000"+e.northing;return e.zoneNumber+e.zoneLetter+Yo(e.easting,e.northing,e.zoneNumber)+a.substr(a.length-5,s)+l.substr(l.length-5,s)}function Yo(e,s,a){var l=Pa(a),o=Math.floor(e/1e5),u=Math.floor(s/1e5)%20;return th(o,u,l)}function Pa(e){var s=e%pa;return s===0&&(s=pa),s}function th(e,s,a){var l=a-1,o=ga.charCodeAt(l),u=ya.charCodeAt(l),c=o+e-1,f=u+s,_=!1;c>ne&&(c=c-ne+Si-1,_=!0),(c===gt||o<gt&&c>gt||(c>gt||o<gt)&&_)&&c++,(c===bt||o<bt&&c>bt||(c>bt||o<bt)&&_)&&(c++,c===gt&&c++),c>ne&&(c=c-ne+Si-1),f>ee?(f=f-ee+Si-1,_=!0):_=!1,(f===gt||u<gt&&f>gt||(f>gt||u<gt)&&_)&&f++,(f===bt||u<bt&&f>bt||(f>bt||u<bt)&&_)&&(f++,f===gt&&f++),f>ee&&(f=f-ee+Si-1);var m=String.fromCharCode(c)+String.fromCharCode(f);return m}function ba(e){if(e&&e.length===0)throw"MGRSPoint coverting from nothing";for(var s=e.length,a=null,l="",o,u=0;!/[A-Z]/.test(o=e.charAt(u));){if(u>=2)throw"MGRSPoint bad conversion from: "+e;l+=o,u++}var c=parseInt(l,10);if(u===0||u+3>s)throw"MGRSPoint bad conversion from: "+e;var f=e.charAt(u++);if(f<="A"||f==="B"||f==="Y"||f>="Z"||f==="I"||f==="O")throw"MGRSPoint zone letter "+f+" not handled: "+e;a=e.substring(u,u+=2);for(var _=Pa(c),m=ih(a.charAt(0),_),y=eh(a.charAt(1),_);y<nh(f);)y+=2e6;var p=s-u;if(p%2!=0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+e;var x=p/2,T=0,P=0,w,S,O,k,z;return x>0&&(w=1e5/Math.pow(10,x),S=e.substring(u,u+x),T=parseFloat(S)*w,O=e.substring(u+x),P=parseFloat(O)*w),k=T+m,z=P+y,{easting:k,northing:z,zoneLetter:f,zoneNumber:c,accuracy:w}}function ih(e,s){for(var a=ga.charCodeAt(s-1),l=1e5,o=!1;a!==e.charCodeAt(0);){if(a++,a===gt&&a++,a===bt&&a++,a>ne){if(o)throw"Bad character: "+e;a=Si,o=!0}l+=1e5}return l}function eh(e,s){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var a=ya.charCodeAt(s-1),l=0,o=!1;a!==e.charCodeAt(0);){if(a++,a===gt&&a++,a===bt&&a++,a>ee){if(o)throw"Bad character: "+e;a=Si,o=!0}l+=1e5}return l}function nh(e){var s;switch(e){case"C":s=11e5;break;case"D":s=2e6;break;case"E":s=28e5;break;case"F":s=37e5;break;case"G":s=46e5;break;case"H":s=55e5;break;case"J":s=64e5;break;case"K":s=73e5;break;case"L":s=82e5;break;case"M":s=91e5;break;case"N":s=0;break;case"P":s=8e5;break;case"Q":s=17e5;break;case"R":s=26e5;break;case"S":s=35e5;break;case"T":s=44e5;break;case"U":s=53e5;break;case"V":s=62e5;break;case"W":s=7e6;break;case"X":s=79e5;break;default:s=-1}if(s>=0)return s;throw"Invalid zone letter: "+e}function Ei(e,s,a){if(!(this instanceof Ei))return new Ei(e,s,a);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if(typeof e=="object")this.x=e.x,this.y=e.y,this.z=e.z||0;else if(typeof e=="string"&&typeof s=="undefined"){var l=e.split(",");this.x=parseFloat(l[0],10),this.y=parseFloat(l[1],10),this.z=parseFloat(l[2],10)||0}else this.x=e,this.y=s,this.z=a||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Ei.fromMGRS=function(e){return new Ei(xa(e))};Ei.prototype.toMGRS=function(e){return Ma([this.x,this.y],e)};var sh=1,ah=.25,La=.046875,Ta=.01953125,Ca=.01068115234375,rh=.75,oh=.46875,hh=.013020833333333334,lh=.007120768229166667,uh=.3645833333333333,fh=.005696614583333333,ch=.3076171875;function Sa(e){var s=[];s[0]=sh-e*(ah+e*(La+e*(Ta+e*Ca))),s[1]=e*(rh-e*(La+e*(Ta+e*Ca)));var a=e*e;return s[2]=a*(oh-e*(hh+e*lh)),a*=e,s[3]=a*(uh-e*fh),s[4]=a*e*ch,s}function Ge(e,s,a,l){return a*=s,s*=s,l[0]*e-a*(l[1]+s*(l[2]+s*(l[3]+s*l[4])))}var dh=20;function Ea(e,s,a){for(var l=1/(1-s),o=e,u=dh;u;--u){var c=Math.sin(o),f=1-s*c*c;if(f=(Ge(o,c,Math.cos(o),a)-e)*(f*Math.sqrt(f))*l,o-=f,Math.abs(f)<E)return o}return o}function _h(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=Sa(this.es),this.ml0=Ge(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function mh(e){var s=e.x,a=e.y,l=I(s-this.long0),o,u,c,f=Math.sin(a),_=Math.cos(a);if(this.es){var y=_*l,p=Math.pow(y,2),x=this.ep2*Math.pow(_,2),T=Math.pow(x,2),P=Math.abs(_)>E?Math.tan(a):0,w=Math.pow(P,2),S=Math.pow(w,2);o=1-this.es*Math.pow(f,2),y=y/Math.sqrt(o);var O=Ge(a,f,_,this.en);u=this.a*(this.k0*y*(1+p/6*(1-w+x+p/20*(5-18*w+S+14*x-58*w*x+p/42*(61+179*S-S*w-479*w)))))+this.x0,c=this.a*(this.k0*(O-this.ml0+f*l*y/2*(1+p/12*(5-w+9*x+4*T+p/30*(61+S-58*w+270*x-330*w*x+p/56*(1385+543*S-S*w-3111*w))))))+this.y0}else{var m=_*Math.sin(l);if(Math.abs(Math.abs(m)-1)<E)return 93;if(u=.5*this.a*this.k0*Math.log((1+m)/(1-m))+this.x0,c=_*Math.cos(l)/Math.sqrt(1-Math.pow(m,2)),m=Math.abs(c),m>=1){if(m-1>E)return 93;c=0}else c=Math.acos(c);a<0&&(c=-c),c=this.a*this.k0*(c-this.lat0)+this.y0}return e.x=u,e.y=c,e}function vh(e){var s,a,l,o,u=(e.x-this.x0)*(1/this.a),c=(e.y-this.y0)*(1/this.a);if(this.es)if(s=this.ml0+c/this.k0,a=Ea(s,this.es,this.en),Math.abs(a)<C){var p=Math.sin(a),x=Math.cos(a),T=Math.abs(x)>E?Math.tan(a):0,P=this.ep2*Math.pow(x,2),w=Math.pow(P,2),S=Math.pow(T,2),O=Math.pow(S,2);s=1-this.es*Math.pow(p,2);var k=u*Math.sqrt(s)/this.k0,z=Math.pow(k,2);s=s*T,l=a-s*z/(1-this.es)*.5*(1-z/12*(5+3*S-9*P*S+P-4*w-z/30*(61+90*S-252*P*S+45*O+46*P-z/56*(1385+3633*S+4095*O+1574*O*S)))),o=I(this.long0+k*(1-z/6*(1+2*S+P-z/20*(5+28*S+24*O+8*P*S+6*P-z/42*(61+662*S+1320*O+720*O*S))))/x)}else l=C*te(c),o=0;else{var f=Math.exp(u/this.k0),_=.5*(f-1/f),m=this.lat0+c/this.k0,y=Math.cos(m);s=Math.sqrt((1-Math.pow(y,2))/(1+Math.pow(_,2))),l=Math.asin(s),c<0&&(l=-l),_===0&&y===0?o=0:o=I(Math.atan2(_,y)+this.long0)}return e.x=o,e.y=l,e}var ph=["Fast_Transverse_Mercator","Fast Transverse Mercator"],Fe={init:_h,forward:mh,inverse:vh,names:ph};function Aa(e){var s=Math.exp(e);return s=(s-1/s)/2,s}function We(e,s){e=Math.abs(e),s=Math.abs(s);var a=Math.max(e,s),l=Math.min(e,s)/(a||1);return a*Math.sqrt(1+Math.pow(l,2))}function gh(e){var s=1+e,a=s-1;return a===0?e:e*Math.log(s)/a}function yh(e){var s=Math.abs(e);return s=gh(s*(1+s/(We(1,s)+1))),e<0?-s:s}function $n(e,s){for(var a=2*Math.cos(2*s),l=e.length-1,o=e[l],u=0,c;--l>=0;)c=-u+a*o+e[l],u=o,o=c;return s+c*Math.sin(2*s)}function Mh(e,s){for(var a=2*Math.cos(s),l=e.length-1,o=e[l],u=0,c;--l>=0;)c=-u+a*o+e[l],u=o,o=c;return Math.sin(s)*c}function xh(e){var s=Math.exp(e);return s=(s+1/s)/2,s}function Ia(e,s,a){for(var l=Math.sin(s),o=Math.cos(s),u=Aa(a),c=xh(a),f=2*o*c,_=-2*l*u,m=e.length-1,y=e[m],p=0,x=0,T=0,P,w;--m>=0;)P=x,w=p,x=y,p=T,y=-P+f*x-_*p+e[m],T=-w+_*x+f*p;return f=l*c,_=o*u,[f*y-_*T,f*T+_*y]}function wh(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Fe.init.apply(this),this.forward=Fe.forward,this.inverse=Fe.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),s=e/(2-e),a=s;this.cgb[0]=s*(2+s*(-2/3+s*(-2+s*(116/45+s*(26/45+s*(-2854/675)))))),this.cbg[0]=s*(-2+s*(2/3+s*(4/3+s*(-82/45+s*(32/45+s*(4642/4725)))))),a=a*s,this.cgb[1]=a*(7/3+s*(-8/5+s*(-227/45+s*(2704/315+s*(2323/945))))),this.cbg[1]=a*(5/3+s*(-16/15+s*(-13/9+s*(904/315+s*(-1522/945))))),a=a*s,this.cgb[2]=a*(56/15+s*(-136/35+s*(-1262/105+s*(73814/2835)))),this.cbg[2]=a*(-26/15+s*(34/21+s*(8/5+s*(-12686/2835)))),a=a*s,this.cgb[3]=a*(4279/630+s*(-332/35+s*(-399572/14175))),this.cbg[3]=a*(1237/630+s*(-12/5+s*(-24832/14175))),a=a*s,this.cgb[4]=a*(4174/315+s*(-144838/6237)),this.cbg[4]=a*(-734/315+s*(109598/31185)),a=a*s,this.cgb[5]=a*(601676/22275),this.cbg[5]=a*(444337/155925),a=Math.pow(s,2),this.Qn=this.k0/(1+s)*(1+a*(1/4+a*(1/64+a/256))),this.utg[0]=s*(-.5+s*(2/3+s*(-37/96+s*(1/360+s*(81/512+s*(-96199/604800)))))),this.gtu[0]=s*(.5+s*(-2/3+s*(5/16+s*(41/180+s*(-127/288+s*(7891/37800)))))),this.utg[1]=a*(-1/48+s*(-1/15+s*(437/1440+s*(-46/105+s*(1118711/3870720))))),this.gtu[1]=a*(13/48+s*(-3/5+s*(557/1440+s*(281/630+s*(-1983433/1935360))))),a=a*s,this.utg[2]=a*(-17/480+s*(37/840+s*(209/4480+s*(-5569/90720)))),this.gtu[2]=a*(61/240+s*(-103/140+s*(15061/26880+s*(167603/181440)))),a=a*s,this.utg[3]=a*(-4397/161280+s*(11/504+s*(830251/7257600))),this.gtu[3]=a*(49561/161280+s*(-179/168+s*(6601661/7257600))),a=a*s,this.utg[4]=a*(-4583/161280+s*(108847/3991680)),this.gtu[4]=a*(34729/80640+s*(-3418889/1995840)),a=a*s,this.utg[5]=a*(-20648693/638668800),this.gtu[5]=a*(212378941/319334400);var l=$n(this.cbg,this.lat0);this.Zb=-this.Qn*(l+Mh(this.gtu,2*l))}function Ph(e){var s=I(e.x-this.long0),a=e.y;a=$n(this.cbg,a);var l=Math.sin(a),o=Math.cos(a),u=Math.sin(s),c=Math.cos(s);a=Math.atan2(l,c*o),s=Math.atan2(u*o,We(l,o*c)),s=yh(Math.tan(s));var f=Ia(this.gtu,2*a,2*s);a=a+f[0],s=s+f[1];var _,m;return Math.abs(s)<=2.623395162778?(_=this.a*(this.Qn*s)+this.x0,m=this.a*(this.Qn*a+this.Zb)+this.y0):(_=1/0,m=1/0),e.x=_,e.y=m,e}function bh(e){var s=(e.x-this.x0)*(1/this.a),a=(e.y-this.y0)*(1/this.a);a=(a-this.Zb)/this.Qn,s=s/this.Qn;var l,o;if(Math.abs(s)<=2.623395162778){var u=Ia(this.utg,2*a,2*s);a=a+u[0],s=s+u[1],s=Math.atan(Aa(s));var c=Math.sin(a),f=Math.cos(a),_=Math.sin(s),m=Math.cos(s);a=Math.atan2(c*m,We(_,m*f)),s=Math.atan2(_,m*f),l=I(s+this.long0),o=$n(this.cgb,a)}else l=1/0,o=1/0;return e.x=l,e.y=o,e}var Lh=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"],Ue={init:wh,forward:Ph,inverse:bh,names:Lh};function Th(e,s){if(e===void 0){if(e=Math.floor((I(s)+Math.PI)*30/Math.PI)+1,e<0)return 0;if(e>60)return 60}return e}var Ch="etmerc";function Sh(){var e=Th(this.zone,this.long0);if(e===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*ft,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Ue.init.apply(this),this.forward=Ue.forward,this.inverse=Ue.inverse}var Eh=["Universal Transverse Mercator System","utm"],Ah={init:Sh,names:Eh,dependsOn:Ch};function jn(e,s){return Math.pow((1-e)/(1+e),s)}var Ih=20;function Oh(){var e=Math.sin(this.lat0),s=Math.cos(this.lat0);s*=s,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*s*s/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+j)/(Math.pow(Math.tan(.5*this.lat0+j),this.C)*jn(this.e*e,this.ratexp))}function Nh(e){var s=e.x,a=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*a+j),this.C)*jn(this.e*Math.sin(a),this.ratexp))-C,e.x=this.C*s,e}function zh(e){for(var s=1e-14,a=e.x/this.C,l=e.y,o=Math.pow(Math.tan(.5*l+j)/this.K,1/this.C),u=Ih;u>0&&(l=2*Math.atan(o*jn(this.e*Math.sin(e.y),-.5*this.e))-C,!(Math.abs(l-e.y)<s));--u)e.y=l;return u?(e.x=a,e.y=l,e):null}var kh=["gauss"],Vn={init:Oh,forward:Nh,inverse:zh,names:kh};function Bh(){Vn.init.apply(this),!!this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function Rh(e){var s,a,l,o;return e.x=I(e.x-this.long0),Vn.forward.apply(this,[e]),s=Math.sin(e.y),a=Math.cos(e.y),l=Math.cos(e.x),o=this.k0*this.R2/(1+this.sinc0*s+this.cosc0*a*l),e.x=o*a*Math.sin(e.x),e.y=o*(this.cosc0*s-this.sinc0*a*l),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function Zh(e){var s,a,l,o,u;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,u=Math.sqrt(e.x*e.x+e.y*e.y)){var c=2*Math.atan2(u,this.R2);s=Math.sin(c),a=Math.cos(c),o=Math.asin(a*this.sinc0+e.y*s*this.cosc0/u),l=Math.atan2(e.x*s,u*this.cosc0*a-e.y*this.sinc0*s)}else o=this.phic0,l=0;return e.x=l,e.y=o,Vn.inverse.apply(this,[e]),e.x=I(e.x+this.long0),e}var Dh=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"],qh={init:Bh,forward:Rh,inverse:Zh,names:Dh};function Gh(e,s,a){return s*=a,Math.tan(.5*(C+e))*Math.pow((1-s)/(1+s),.5*a)}function Fh(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=E&&(this.k0=.5*(1+te(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=E&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=E&&(this.k0=.5*this.cons*Rt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Et(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Rt(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-C,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function Wh(e){var s=e.x,a=e.y,l=Math.sin(a),o=Math.cos(a),u,c,f,_,m,y,p=I(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=E&&Math.abs(a+this.lat0)<=E?(e.x=NaN,e.y=NaN,e):this.sphere?(u=2*this.k0/(1+this.sinlat0*l+this.coslat0*o*Math.cos(p)),e.x=this.a*u*o*Math.sin(p)+this.x0,e.y=this.a*u*(this.coslat0*l-this.sinlat0*o*Math.cos(p))+this.y0,e):(c=2*Math.atan(this.ssfn_(a,l,this.e))-C,_=Math.cos(c),f=Math.sin(c),Math.abs(this.coslat0)<=E?(m=Et(this.e,a*this.con,this.con*l),y=2*this.a*this.k0*m/this.cons,e.x=this.x0+y*Math.sin(s-this.long0),e.y=this.y0-this.con*y*Math.cos(s-this.long0),e):(Math.abs(this.sinlat0)<E?(u=2*this.a*this.k0/(1+_*Math.cos(p)),e.y=u*f):(u=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*f+this.cosX0*_*Math.cos(p))),e.y=u*(this.cosX0*f-this.sinX0*_*Math.cos(p))+this.y0),e.x=u*_*Math.sin(p)+this.x0,e))}function Uh(e){e.x-=this.x0,e.y-=this.y0;var s,a,l,o,u,c=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var f=2*Math.atan(c/(2*this.a*this.k0));return s=this.long0,a=this.lat0,c<=E?(e.x=s,e.y=a,e):(a=Math.asin(Math.cos(f)*this.sinlat0+e.y*Math.sin(f)*this.coslat0/c),Math.abs(this.coslat0)<E?this.lat0>0?s=I(this.long0+Math.atan2(e.x,-1*e.y)):s=I(this.long0+Math.atan2(e.x,e.y)):s=I(this.long0+Math.atan2(e.x*Math.sin(f),c*this.coslat0*Math.cos(f)-e.y*this.sinlat0*Math.sin(f))),e.x=s,e.y=a,e)}else if(Math.abs(this.coslat0)<=E){if(c<=E)return a=this.lat0,s=this.long0,e.x=s,e.y=a,e;e.x*=this.con,e.y*=this.con,l=c*this.cons/(2*this.a*this.k0),a=this.con*ie(this.e,l),s=this.con*I(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else o=2*Math.atan(c*this.cosX0/(2*this.a*this.k0*this.ms1)),s=this.long0,c<=E?u=this.X0:(u=Math.asin(Math.cos(o)*this.sinX0+e.y*Math.sin(o)*this.cosX0/c),s=I(this.long0+Math.atan2(e.x*Math.sin(o),c*this.cosX0*Math.cos(o)-e.y*this.sinX0*Math.sin(o)))),a=-1*ie(this.e,Math.tan(.5*(C+u)));return e.x=s,e.y=a,e}var Hh=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],$h={init:Fh,forward:Wh,inverse:Uh,names:Hh,ssfn_:Gh};function jh(){var e=this.lat0;this.lambda0=this.long0;var s=Math.sin(e),a=this.a,l=this.rf,o=1/l,u=2*o-Math.pow(o,2),c=this.e=Math.sqrt(u);this.R=this.k0*a*Math.sqrt(1-u)/(1-u*Math.pow(s,2)),this.alpha=Math.sqrt(1+u/(1-u)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(s/this.alpha);var f=Math.log(Math.tan(Math.PI/4+this.b0/2)),_=Math.log(Math.tan(Math.PI/4+e/2)),m=Math.log((1+c*s)/(1-c*s));this.K=f-this.alpha*_+this.alpha*c/2*m}function Vh(e){var s=Math.log(Math.tan(Math.PI/4-e.y/2)),a=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),l=-this.alpha*(s+a)+this.K,o=2*(Math.atan(Math.exp(l))-Math.PI/4),u=this.alpha*(e.x-this.lambda0),c=Math.atan(Math.sin(u)/(Math.sin(this.b0)*Math.tan(o)+Math.cos(this.b0)*Math.cos(u))),f=Math.asin(Math.cos(this.b0)*Math.sin(o)-Math.sin(this.b0)*Math.cos(o)*Math.cos(u));return e.y=this.R/2*Math.log((1+Math.sin(f))/(1-Math.sin(f)))+this.y0,e.x=this.R*c+this.x0,e}function Kh(e){for(var s=e.x-this.x0,a=e.y-this.y0,l=s/this.R,o=2*(Math.atan(Math.exp(a/this.R))-Math.PI/4),u=Math.asin(Math.cos(this.b0)*Math.sin(o)+Math.sin(this.b0)*Math.cos(o)*Math.cos(l)),c=Math.atan(Math.sin(l)/(Math.cos(this.b0)*Math.cos(l)-Math.sin(this.b0)*Math.tan(o))),f=this.lambda0+c/this.alpha,_=0,m=u,y=-1e3,p=0;Math.abs(m-y)>1e-7;){if(++p>20)return;_=1/this.alpha*(Math.log(Math.tan(Math.PI/4+u/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(m))/2)),y=m,m=2*Math.atan(Math.exp(_))-Math.PI/2}return e.x=f,e.y=m,e}var Xh=["somerc"],Qh={init:jh,forward:Vh,inverse:Kh,names:Xh},Ai=1e-7;function Jh(e){var s=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],a=typeof e.PROJECTION=="object"?Object.keys(e.PROJECTION)[0]:e.PROJECTION;return"no_uoff"in e||"no_off"in e||s.indexOf(a)!==-1}function Yh(){var e,s,a,l,o,u,c,f,_,m,y=0,p,x=0,T=0,P=0,w=0,S=0,O=0;this.no_off=Jh(this),this.no_rot="no_rot"in this;var k=!1;"alpha"in this&&(k=!0);var z=!1;if("rectified_grid_angle"in this&&(z=!0),k&&(O=this.alpha),z&&(y=this.rectified_grid_angle*ft),k||z)x=this.longc;else if(T=this.long1,w=this.lat1,P=this.long2,S=this.lat2,Math.abs(w-S)<=Ai||(e=Math.abs(w))<=Ai||Math.abs(e-C)<=Ai||Math.abs(Math.abs(this.lat0)-C)<=Ai||Math.abs(Math.abs(S)-C)<=Ai)throw new Error;var $=1-this.es;s=Math.sqrt($),Math.abs(this.lat0)>E?(f=Math.sin(this.lat0),a=Math.cos(this.lat0),e=1-this.es*f*f,this.B=a*a,this.B=Math.sqrt(1+this.es*this.B*this.B/$),this.A=this.B*this.k0*s/e,l=this.B*s/(a*Math.sqrt(e)),o=l*l-1,o<=0?o=0:(o=Math.sqrt(o),this.lat0<0&&(o=-o)),this.E=o+=l,this.E*=Math.pow(Et(this.e,this.lat0,f),this.B)):(this.B=1/s,this.A=this.k0,this.E=l=o=1),k||z?(k?(p=Math.asin(Math.sin(O)/l),z||(y=O)):(p=y,O=Math.asin(l*Math.sin(p))),this.lam0=x-Math.asin(.5*(o-1/o)*Math.tan(p))/this.B):(u=Math.pow(Et(this.e,w,Math.sin(w)),this.B),c=Math.pow(Et(this.e,S,Math.sin(S)),this.B),o=this.E/u,_=(c-u)/(c+u),m=this.E*this.E,m=(m-c*u)/(m+c*u),e=T-P,e<-Math.pi?P-=Ji:e>Math.pi&&(P+=Ji),this.lam0=I(.5*(T+P)-Math.atan(m*Math.tan(.5*this.B*(T-P))/_)/this.B),p=Math.atan(2*Math.sin(this.B*I(T-this.lam0))/(o-1/o)),y=O=Math.asin(l*Math.sin(p))),this.singam=Math.sin(p),this.cosgam=Math.cos(p),this.sinrot=Math.sin(y),this.cosrot=Math.cos(y),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(l*l-1)/Math.cos(O))),this.lat0<0&&(this.u_0=-this.u_0)),o=.5*p,this.v_pole_n=this.ArB*Math.log(Math.tan(j-o)),this.v_pole_s=this.ArB*Math.log(Math.tan(j+o))}function tl(e){var s={},a,l,o,u,c,f,_,m;if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-C)>E){if(c=this.E/Math.pow(Et(this.e,e.y,Math.sin(e.y)),this.B),f=1/c,a=.5*(c-f),l=.5*(c+f),u=Math.sin(this.B*e.x),o=(a*this.singam-u*this.cosgam)/l,Math.abs(Math.abs(o)-1)<E)throw new Error;m=.5*this.ArB*Math.log((1-o)/(1+o)),f=Math.cos(this.B*e.x),Math.abs(f)<Ai?_=this.A*e.x:_=this.ArB*Math.atan2(a*this.cosgam+u*this.singam,f)}else m=e.y>0?this.v_pole_n:this.v_pole_s,_=this.ArB*e.y;return this.no_rot?(s.x=_,s.y=m):(_-=this.u_0,s.x=m*this.cosrot+_*this.sinrot,s.y=_*this.cosrot-m*this.sinrot),s.x=this.a*s.x+this.x0,s.y=this.a*s.y+this.y0,s}function il(e){var s,a,l,o,u,c,f,_={};if(e.x=(e.x-this.x0)*(1/this.a),e.y=(e.y-this.y0)*(1/this.a),this.no_rot?(a=e.y,s=e.x):(a=e.x*this.cosrot-e.y*this.sinrot,s=e.y*this.cosrot+e.x*this.sinrot+this.u_0),l=Math.exp(-this.BrA*a),o=.5*(l-1/l),u=.5*(l+1/l),c=Math.sin(this.BrA*s),f=(c*this.cosgam+o*this.singam)/u,Math.abs(Math.abs(f)-1)<E)_.x=0,_.y=f<0?-C:C;else{if(_.y=this.E/Math.sqrt((1+f)/(1-f)),_.y=ie(this.e,Math.pow(_.y,1/this.B)),_.y===1/0)throw new Error;_.x=-this.rB*Math.atan2(o*this.cosgam-c*this.singam,Math.cos(this.BrA*s))}return _.x+=this.lam0,_}var el=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"],nl={init:Yh,forward:tl,inverse:il,names:el};function sl(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<E)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var s=Math.sin(this.lat1),a=Math.cos(this.lat1),l=Rt(this.e,s,a),o=Et(this.e,this.lat1,s),u=Math.sin(this.lat2),c=Math.cos(this.lat2),f=Rt(this.e,u,c),_=Et(this.e,this.lat2,u),m=Et(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>E?this.ns=Math.log(l/f)/Math.log(o/_):this.ns=s,isNaN(this.ns)&&(this.ns=s),this.f0=l/(this.ns*Math.pow(o,this.ns)),this.rh=this.a*this.f0*Math.pow(m,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function al(e){var s=e.x,a=e.y;Math.abs(2*Math.abs(a)-Math.PI)<=E&&(a=te(a)*(C-2*E));var l=Math.abs(Math.abs(a)-C),o,u;if(l>E)o=Et(this.e,a,Math.sin(a)),u=this.a*this.f0*Math.pow(o,this.ns);else{if(l=a*this.ns,l<=0)return null;u=0}var c=this.ns*I(s-this.long0);return e.x=this.k0*(u*Math.sin(c))+this.x0,e.y=this.k0*(this.rh-u*Math.cos(c))+this.y0,e}function rl(e){var s,a,l,o,u,c=(e.x-this.x0)/this.k0,f=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(s=Math.sqrt(c*c+f*f),a=1):(s=-Math.sqrt(c*c+f*f),a=-1);var _=0;if(s!==0&&(_=Math.atan2(a*c,a*f)),s!==0||this.ns>0){if(a=1/this.ns,l=Math.pow(s/(this.a*this.f0),a),o=ie(this.e,l),o===-9999)return null}else o=-C;return u=I(_/this.ns+this.long0),e.x=u,e.y=o,e}var ol=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc"],hl={init:sl,forward:al,inverse:rl,names:ol};function ll(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function ul(e){var s,a,l,o,u,c,f,_=e.x,m=e.y,y=I(_-this.long0);return s=Math.pow((1+this.e*Math.sin(m))/(1-this.e*Math.sin(m)),this.alfa*this.e/2),a=2*(Math.atan(this.k*Math.pow(Math.tan(m/2+this.s45),this.alfa)/s)-this.s45),l=-y*this.alfa,o=Math.asin(Math.cos(this.ad)*Math.sin(a)+Math.sin(this.ad)*Math.cos(a)*Math.cos(l)),u=Math.asin(Math.cos(a)*Math.sin(l)/Math.cos(o)),c=this.n*u,f=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(o/2+this.s45),this.n),e.y=f*Math.cos(c)/1,e.x=f*Math.sin(c)/1,this.czech||(e.y*=-1,e.x*=-1),e}function fl(e){var s,a,l,o,u,c,f,_,m=e.x;e.x=e.y,e.y=m,this.czech||(e.y*=-1,e.x*=-1),c=Math.sqrt(e.x*e.x+e.y*e.y),u=Math.atan2(e.y,e.x),o=u/Math.sin(this.s0),l=2*(Math.atan(Math.pow(this.ro0/c,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),s=Math.asin(Math.cos(this.ad)*Math.sin(l)-Math.sin(this.ad)*Math.cos(l)*Math.cos(o)),a=Math.asin(Math.cos(l)*Math.sin(o)/Math.cos(s)),e.x=this.long0-a/this.alfa,f=s,_=0;var y=0;do e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(s/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(f))/(1-this.e*Math.sin(f)),this.e/2))-this.s45),Math.abs(f-e.y)<1e-10&&(_=1),f=e.y,y+=1;while(_===0&&y<15);return y>=15?null:e}var cl=["Krovak","krovak"],dl={init:ll,forward:ul,inverse:fl,names:cl};function _t(e,s,a,l,o){return e*o-s*Math.sin(2*o)+a*Math.sin(4*o)-l*Math.sin(6*o)}function se(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function ae(e){return .375*e*(1+.25*e*(1+.46875*e))}function re(e){return .05859375*e*e*(1+.75*e)}function oe(e){return e*e*e*(35/3072)}function Ii(e,s,a){var l=s*a;return e/Math.sqrt(1-l*l)}function Oi(e){return Math.abs(e)<C?e:e-te(e)*Math.PI}function He(e,s,a,l,o){var u,c;u=e/s;for(var f=0;f<15;f++)if(c=(e-(s*u-a*Math.sin(2*u)+l*Math.sin(4*u)-o*Math.sin(6*u)))/(s-2*a*Math.cos(2*u)+4*l*Math.cos(4*u)-6*o*Math.cos(6*u)),u+=c,Math.abs(c)<=1e-10)return u;return NaN}function _l(){this.sphere||(this.e0=se(this.es),this.e1=ae(this.es),this.e2=re(this.es),this.e3=oe(this.es),this.ml0=this.a*_t(this.e0,this.e1,this.e2,this.e3,this.lat0))}function ml(e){var s,a,l=e.x,o=e.y;if(l=I(l-this.long0),this.sphere)s=this.a*Math.asin(Math.cos(o)*Math.sin(l)),a=this.a*(Math.atan2(Math.tan(o),Math.cos(l))-this.lat0);else{var u=Math.sin(o),c=Math.cos(o),f=Ii(this.a,this.e,u),_=Math.tan(o)*Math.tan(o),m=l*Math.cos(o),y=m*m,p=this.es*c*c/(1-this.es),x=this.a*_t(this.e0,this.e1,this.e2,this.e3,o);s=f*m*(1-y*_*(1/6-(8-_+8*p)*y/120)),a=x-this.ml0+f*u/c*y*(.5+(5-_+6*p)*y/24)}return e.x=s+this.x0,e.y=a+this.y0,e}function vl(e){e.x-=this.x0,e.y-=this.y0;var s=e.x/this.a,a=e.y/this.a,l,o;if(this.sphere){var u=a+this.lat0;l=Math.asin(Math.sin(u)*Math.cos(s)),o=Math.atan2(Math.tan(s),Math.cos(u))}else{var c=this.ml0/this.a+a,f=He(c,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(f)-C)<=E)return e.x=this.long0,e.y=C,a<0&&(e.y*=-1),e;var _=Ii(this.a,this.e,Math.sin(f)),m=_*_*_/this.a/this.a*(1-this.es),y=Math.pow(Math.tan(f),2),p=s*this.a/_,x=p*p;l=f-_*Math.tan(f)/m*p*p*(.5-(1+3*y)*p*p/24),o=p*(1-x*(y/3+(1+3*y)*y*x/15))/Math.cos(f)}return e.x=I(o+this.long0),e.y=Oi(l),e}var pl=["Cassini","Cassini_Soldner","cass"],gl={init:_l,forward:ml,inverse:vl,names:pl};function ei(e,s){var a;return e>1e-7?(a=e*s,(1-e*e)*(s/(1-a*a)-.5/e*Math.log((1-a)/(1+a)))):2*s}var yl=1,Ml=2,xl=3,wl=4;function Pl(){var e=Math.abs(this.lat0);if(Math.abs(e-C)<E?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<E?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var s;switch(this.qp=ei(this.e,1),this.mmf=.5/(1-this.es),this.apa=Ol(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),s=Math.sin(this.lat0),this.sinb1=ei(this.e,s)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*s*s)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function bl(e){var s,a,l,o,u,c,f,_,m,y,p=e.x,x=e.y;if(p=I(p-this.long0),this.sphere){if(u=Math.sin(x),y=Math.cos(x),l=Math.cos(p),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(a=this.mode===this.EQUIT?1+y*l:1+this.sinph0*u+this.cosph0*y*l,a<=E)return null;a=Math.sqrt(2/a),s=a*y*Math.sin(p),a*=this.mode===this.EQUIT?u:this.cosph0*u-this.sinph0*y*l}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(l=-l),Math.abs(x+this.lat0)<E)return null;a=j-x*.5,a=2*(this.mode===this.S_POLE?Math.cos(a):Math.sin(a)),s=a*Math.sin(p),a*=l}}else{switch(f=0,_=0,m=0,l=Math.cos(p),o=Math.sin(p),u=Math.sin(x),c=ei(this.e,u),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(f=c/this.qp,_=Math.sqrt(1-f*f)),this.mode){case this.OBLIQ:m=1+this.sinb1*f+this.cosb1*_*l;break;case this.EQUIT:m=1+_*l;break;case this.N_POLE:m=C+x,c=this.qp-c;break;case this.S_POLE:m=x-C,c=this.qp+c;break}if(Math.abs(m)<E)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:m=Math.sqrt(2/m),this.mode===this.OBLIQ?a=this.ymf*m*(this.cosb1*f-this.sinb1*_*l):a=(m=Math.sqrt(2/(1+_*l)))*f*this.ymf,s=this.xmf*m*_*o;break;case this.N_POLE:case this.S_POLE:c>=0?(s=(m=Math.sqrt(c))*o,a=l*(this.mode===this.S_POLE?m:-m)):s=a=0;break}}return e.x=this.a*s+this.x0,e.y=this.a*a+this.y0,e}function Ll(e){e.x-=this.x0,e.y-=this.y0;var s=e.x/this.a,a=e.y/this.a,l,o,u,c,f,_,m;if(this.sphere){var y=0,p,x=0;if(p=Math.sqrt(s*s+a*a),o=p*.5,o>1)return null;switch(o=2*Math.asin(o),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(x=Math.sin(o),y=Math.cos(o)),this.mode){case this.EQUIT:o=Math.abs(p)<=E?0:Math.asin(a*x/p),s*=x,a=y*p;break;case this.OBLIQ:o=Math.abs(p)<=E?this.lat0:Math.asin(y*this.sinph0+a*x*this.cosph0/p),s*=x*this.cosph0,a=(y-Math.sin(o)*this.sinph0)*p;break;case this.N_POLE:a=-a,o=C-o;break;case this.S_POLE:o-=C;break}l=a===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(s,a)}else{if(m=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(s/=this.dd,a*=this.dd,_=Math.sqrt(s*s+a*a),_<E)return e.x=this.long0,e.y=this.lat0,e;c=2*Math.asin(.5*_/this.rq),u=Math.cos(c),s*=c=Math.sin(c),this.mode===this.OBLIQ?(m=u*this.sinb1+a*c*this.cosb1/_,f=this.qp*m,a=_*this.cosb1*u-a*this.sinb1*c):(m=a*c/_,f=this.qp*m,a=_*u)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),f=s*s+a*a,!f)return e.x=this.long0,e.y=this.lat0,e;m=1-f/this.qp,this.mode===this.S_POLE&&(m=-m)}l=Math.atan2(s,a),o=Nl(Math.asin(m),this.apa)}return e.x=I(this.long0+l),e.y=o,e}var Tl=.3333333333333333,Cl=.17222222222222222,Sl=.10257936507936508,El=.06388888888888888,Al=.0664021164021164,Il=.016415012942191543;function Ol(e){var s,a=[];return a[0]=e*Tl,s=e*e,a[0]+=s*Cl,a[1]=s*El,s*=e,a[0]+=s*Sl,a[1]+=s*Al,a[2]=s*Il,a}function Nl(e,s){var a=e+e;return e+s[0]*Math.sin(a)+s[1]*Math.sin(a+a)+s[2]*Math.sin(a+a+a)}var zl=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],kl={init:Pl,forward:bl,inverse:Ll,names:zl,S_POLE:yl,N_POLE:Ml,EQUIT:xl,OBLIQ:wl};function ni(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}function Bl(){Math.abs(this.lat1+this.lat2)<E||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Rt(this.e3,this.sin_po,this.cos_po),this.qs1=ei(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Rt(this.e3,this.sin_po,this.cos_po),this.qs2=ei(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=ei(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>E?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function Rl(e){var s=e.x,a=e.y;this.sin_phi=Math.sin(a),this.cos_phi=Math.cos(a);var l=ei(this.e3,this.sin_phi,this.cos_phi),o=this.a*Math.sqrt(this.c-this.ns0*l)/this.ns0,u=this.ns0*I(s-this.long0),c=o*Math.sin(u)+this.x0,f=this.rh-o*Math.cos(u)+this.y0;return e.x=c,e.y=f,e}function Zl(e){var s,a,l,o,u,c;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(s=Math.sqrt(e.x*e.x+e.y*e.y),l=1):(s=-Math.sqrt(e.x*e.x+e.y*e.y),l=-1),o=0,s!==0&&(o=Math.atan2(l*e.x,l*e.y)),l=s*this.ns0/this.a,this.sphere?c=Math.asin((this.c-l*l)/(2*this.ns0)):(a=(this.c-l*l)/this.ns0,c=this.phi1z(this.e3,a)),u=I(o/this.ns0+this.long0),e.x=u,e.y=c,e}function Dl(e,s){var a,l,o,u,c,f=ni(.5*s);if(e<E)return f;for(var _=e*e,m=1;m<=25;m++)if(a=Math.sin(f),l=Math.cos(f),o=e*a,u=1-o*o,c=.5*u*u/l*(s/(1-_)-a/u+.5/e*Math.log((1-o)/(1+o))),f=f+c,Math.abs(c)<=1e-7)return f;return null}var ql=["Albers_Conic_Equal_Area","Albers","aea"],Gl={init:Bl,forward:Rl,inverse:Zl,names:ql,phi1z:Dl};function Fl(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function Wl(e){var s,a,l,o,u,c,f,_,m=e.x,y=e.y;return l=I(m-this.long0),s=Math.sin(y),a=Math.cos(y),o=Math.cos(l),c=this.sin_p14*s+this.cos_p14*a*o,u=1,c>0||Math.abs(c)<=E?(f=this.x0+this.a*u*a*Math.sin(l)/c,_=this.y0+this.a*u*(this.cos_p14*s-this.sin_p14*a*o)/c):(f=this.x0+this.infinity_dist*a*Math.sin(l),_=this.y0+this.infinity_dist*(this.cos_p14*s-this.sin_p14*a*o)),e.x=f,e.y=_,e}function Ul(e){var s,a,l,o,u,c;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(s=Math.sqrt(e.x*e.x+e.y*e.y))?(o=Math.atan2(s,this.rc),a=Math.sin(o),l=Math.cos(o),c=ni(l*this.sin_p14+e.y*a*this.cos_p14/s),u=Math.atan2(e.x*a,s*this.cos_p14*l-e.y*this.sin_p14*a),u=I(this.long0+u)):(c=this.phic0,u=0),e.x=u,e.y=c,e}var Hl=["gnom"],$l={init:Fl,forward:Wl,inverse:Ul,names:Hl};function jl(e,s){var a=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(s)-a)<1e-6)return s<0?-1*C:C;for(var l=Math.asin(.5*s),o,u,c,f,_=0;_<30;_++)if(u=Math.sin(l),c=Math.cos(l),f=e*u,o=Math.pow(1-f*f,2)/(2*c)*(s/(1-e*e)-u/(1-f*f)+.5/e*Math.log((1-f)/(1+f))),l+=o,Math.abs(o)<=1e-10)return l;return NaN}function Vl(){this.sphere||(this.k0=Rt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function Kl(e){var s=e.x,a=e.y,l,o,u=I(s-this.long0);if(this.sphere)l=this.x0+this.a*u*Math.cos(this.lat_ts),o=this.y0+this.a*Math.sin(a)/Math.cos(this.lat_ts);else{var c=ei(this.e,Math.sin(a));l=this.x0+this.a*this.k0*u,o=this.y0+this.a*c*.5/this.k0}return e.x=l,e.y=o,e}function Xl(e){e.x-=this.x0,e.y-=this.y0;var s,a;return this.sphere?(s=I(this.long0+e.x/this.a/Math.cos(this.lat_ts)),a=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(a=jl(this.e,2*e.y*this.k0/this.a),s=I(this.long0+e.x/(this.a*this.k0))),e.x=s,e.y=a,e}var Ql=["cea"],Jl={init:Vl,forward:Kl,inverse:Xl,names:Ql};function Yl(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function tu(e){var s=e.x,a=e.y,l=I(s-this.long0),o=Oi(a-this.lat0);return e.x=this.x0+this.a*l*this.rc,e.y=this.y0+this.a*o,e}function iu(e){var s=e.x,a=e.y;return e.x=I(this.long0+(s-this.x0)/(this.a*this.rc)),e.y=Oi(this.lat0+(a-this.y0)/this.a),e}var eu=["Equirectangular","Equidistant_Cylindrical","eqc"],nu={init:Yl,forward:tu,inverse:iu,names:eu},Oa=20;function su(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=se(this.es),this.e1=ae(this.es),this.e2=re(this.es),this.e3=oe(this.es),this.ml0=this.a*_t(this.e0,this.e1,this.e2,this.e3,this.lat0)}function au(e){var s=e.x,a=e.y,l,o,u,c=I(s-this.long0);if(u=c*Math.sin(a),this.sphere)Math.abs(a)<=E?(l=this.a*c,o=-1*this.a*this.lat0):(l=this.a*Math.sin(u)/Math.tan(a),o=this.a*(Oi(a-this.lat0)+(1-Math.cos(u))/Math.tan(a)));else if(Math.abs(a)<=E)l=this.a*c,o=-1*this.ml0;else{var f=Ii(this.a,this.e,Math.sin(a))/Math.tan(a);l=f*Math.sin(u),o=this.a*_t(this.e0,this.e1,this.e2,this.e3,a)-this.ml0+f*(1-Math.cos(u))}return e.x=l+this.x0,e.y=o+this.y0,e}function ru(e){var s,a,l,o,u,c,f,_,m;if(l=e.x-this.x0,o=e.y-this.y0,this.sphere)if(Math.abs(o+this.a*this.lat0)<=E)s=I(l/this.a+this.long0),a=0;else{c=this.lat0+o/this.a,f=l*l/this.a/this.a+c*c,_=c;var y;for(u=Oa;u;--u)if(y=Math.tan(_),m=-1*(c*(_*y+1)-_-.5*(_*_+f)*y)/((_-c)/y-1),_+=m,Math.abs(m)<=E){a=_;break}s=I(this.long0+Math.asin(l*Math.tan(_)/this.a)/Math.sin(a))}else if(Math.abs(o+this.ml0)<=E)a=0,s=I(this.long0+l/this.a);else{c=(this.ml0+o)/this.a,f=l*l/this.a/this.a+c*c,_=c;var p,x,T,P,w;for(u=Oa;u;--u)if(w=this.e*Math.sin(_),p=Math.sqrt(1-w*w)*Math.tan(_),x=this.a*_t(this.e0,this.e1,this.e2,this.e3,_),T=this.e0-2*this.e1*Math.cos(2*_)+4*this.e2*Math.cos(4*_)-6*this.e3*Math.cos(6*_),P=x/this.a,m=(c*(p*P+1)-P-.5*p*(P*P+f))/(this.es*Math.sin(2*_)*(P*P+f-2*c*P)/(4*p)+(c-P)*(p*T-2/Math.sin(2*_))-T),_-=m,Math.abs(m)<=E){a=_;break}p=Math.sqrt(1-this.es*Math.pow(Math.sin(a),2))*Math.tan(a),s=I(this.long0+Math.asin(l*p/this.a)/Math.sin(a))}return e.x=s,e.y=a,e}var ou=["Polyconic","poly"],hu={init:su,forward:au,inverse:ru,names:ou};function lu(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function uu(e){var s,a=e.x,l=e.y,o=l-this.lat0,u=a-this.long0,c=o/Qi*1e-5,f=u,_=1,m=0;for(s=1;s<=10;s++)_=_*c,m=m+this.A[s]*_;var y=m,p=f,x=1,T=0,P,w,S=0,O=0;for(s=1;s<=6;s++)P=x*y-T*p,w=T*y+x*p,x=P,T=w,S=S+this.B_re[s]*x-this.B_im[s]*T,O=O+this.B_im[s]*x+this.B_re[s]*T;return e.x=O*this.a+this.x0,e.y=S*this.a+this.y0,e}function fu(e){var s,a=e.x,l=e.y,o=a-this.x0,u=l-this.y0,c=u/this.a,f=o/this.a,_=1,m=0,y,p,x=0,T=0;for(s=1;s<=6;s++)y=_*c-m*f,p=m*c+_*f,_=y,m=p,x=x+this.C_re[s]*_-this.C_im[s]*m,T=T+this.C_im[s]*_+this.C_re[s]*m;for(var P=0;P<this.iterations;P++){var w=x,S=T,O,k,z=c,$=f;for(s=2;s<=6;s++)O=w*x-S*T,k=S*x+w*T,w=O,S=k,z=z+(s-1)*(this.B_re[s]*w-this.B_im[s]*S),$=$+(s-1)*(this.B_im[s]*w+this.B_re[s]*S);w=1,S=0;var q=this.B_re[1],G=this.B_im[1];for(s=2;s<=6;s++)O=w*x-S*T,k=S*x+w*T,w=O,S=k,q=q+s*(this.B_re[s]*w-this.B_im[s]*S),G=G+s*(this.B_im[s]*w+this.B_re[s]*S);var ot=q*q+G*G;x=(z*q+$*G)/ot,T=($*q-z*G)/ot}var X=x,mt=T,At=1,Q=0;for(s=1;s<=9;s++)At=At*X,Q=Q+this.D[s]*At;var ht=this.lat0+Q*Qi*1e5,Ve=this.long0+mt;return e.x=Ve,e.y=ht,e}var cu=["New_Zealand_Map_Grid","nzmg"],du={init:lu,forward:uu,inverse:fu,names:cu};function _u(){}function mu(e){var s=e.x,a=e.y,l=I(s-this.long0),o=this.x0+this.a*l,u=this.y0+this.a*Math.log(Math.tan(Math.PI/4+a/2.5))*1.25;return e.x=o,e.y=u,e}function vu(e){e.x-=this.x0,e.y-=this.y0;var s=I(this.long0+e.x/this.a),a=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=s,e.y=a,e}var pu=["Miller_Cylindrical","mill"],gu={init:_u,forward:mu,inverse:vu,names:pu},yu=20;function Mu(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Sa(this.es)}function xu(e){var s,a,l=e.x,o=e.y;if(l=I(l-this.long0),this.sphere){if(!this.m)o=this.n!==1?Math.asin(this.n*Math.sin(o)):o;else for(var u=this.n*Math.sin(o),c=yu;c;--c){var f=(this.m*o+Math.sin(o)-u)/(this.m+Math.cos(o));if(o-=f,Math.abs(f)<E)break}s=this.a*this.C_x*l*(this.m+Math.cos(o)),a=this.a*this.C_y*o}else{var _=Math.sin(o),m=Math.cos(o);a=this.a*Ge(o,_,m,this.en),s=this.a*l*m/Math.sqrt(1-this.es*_*_)}return e.x=s,e.y=a,e}function wu(e){var s,a,l,o;return e.x-=this.x0,l=e.x/this.a,e.y-=this.y0,s=e.y/this.a,this.sphere?(s/=this.C_y,l=l/(this.C_x*(this.m+Math.cos(s))),this.m?s=ni((this.m*s+Math.sin(s))/this.n):this.n!==1&&(s=ni(Math.sin(s)/this.n)),l=I(l+this.long0),s=Oi(s)):(s=Ea(e.y/this.a,this.es,this.en),o=Math.abs(s),o<C?(o=Math.sin(s),a=this.long0+e.x*Math.sqrt(1-this.es*o*o)/(this.a*Math.cos(s)),l=I(a)):o-E<C&&(l=this.long0)),e.x=l,e.y=s,e}var Pu=["Sinusoidal","sinu"],bu={init:Mu,forward:xu,inverse:wu,names:Pu};function Lu(){}function Tu(e){for(var s=e.x,a=e.y,l=I(s-this.long0),o=a,u=Math.PI*Math.sin(a);;){var c=-(o+Math.sin(o)-u)/(1+Math.cos(o));if(o+=c,Math.abs(c)<E)break}o/=2,Math.PI/2-Math.abs(a)<E&&(l=0);var f=.900316316158*this.a*l*Math.cos(o)+this.x0,_=1.4142135623731*this.a*Math.sin(o)+this.y0;return e.x=f,e.y=_,e}function Cu(e){var s,a;e.x-=this.x0,e.y-=this.y0,a=e.y/(1.4142135623731*this.a),Math.abs(a)>.999999999999&&(a=.999999999999),s=Math.asin(a);var l=I(this.long0+e.x/(.900316316158*this.a*Math.cos(s)));l<-Math.PI&&(l=-Math.PI),l>Math.PI&&(l=Math.PI),a=(2*s+Math.sin(2*s))/Math.PI,Math.abs(a)>1&&(a=1);var o=Math.asin(a);return e.x=l,e.y=o,e}var Su=["Mollweide","moll"],Eu={init:Lu,forward:Tu,inverse:Cu,names:Su};function Au(){Math.abs(this.lat1+this.lat2)<E||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=se(this.es),this.e1=ae(this.es),this.e2=re(this.es),this.e3=oe(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Rt(this.e,this.sinphi,this.cosphi),this.ml1=_t(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<E?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Rt(this.e,this.sinphi,this.cosphi),this.ml2=_t(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=_t(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function Iu(e){var s=e.x,a=e.y,l;if(this.sphere)l=this.a*(this.g-a);else{var o=_t(this.e0,this.e1,this.e2,this.e3,a);l=this.a*(this.g-o)}var u=this.ns*I(s-this.long0),c=this.x0+l*Math.sin(u),f=this.y0+this.rh-l*Math.cos(u);return e.x=c,e.y=f,e}function Ou(e){e.x-=this.x0,e.y=this.rh-e.y+this.y0;var s,a,l,o;this.ns>=0?(a=Math.sqrt(e.x*e.x+e.y*e.y),s=1):(a=-Math.sqrt(e.x*e.x+e.y*e.y),s=-1);var u=0;if(a!==0&&(u=Math.atan2(s*e.x,s*e.y)),this.sphere)return o=I(this.long0+u/this.ns),l=Oi(this.g-a/this.a),e.x=o,e.y=l,e;var c=this.g-a/this.a;return l=He(c,this.e0,this.e1,this.e2,this.e3),o=I(this.long0+u/this.ns),e.x=o,e.y=l,e}var Nu=["Equidistant_Conic","eqdc"],zu={init:Au,forward:Iu,inverse:Ou,names:Nu};function ku(){this.R=this.a}function Bu(e){var s=e.x,a=e.y,l=I(s-this.long0),o,u;Math.abs(a)<=E&&(o=this.x0+this.R*l,u=this.y0);var c=ni(2*Math.abs(a/Math.PI));(Math.abs(l)<=E||Math.abs(Math.abs(a)-C)<=E)&&(o=this.x0,a>=0?u=this.y0+Math.PI*this.R*Math.tan(.5*c):u=this.y0+Math.PI*this.R*-Math.tan(.5*c));var f=.5*Math.abs(Math.PI/l-l/Math.PI),_=f*f,m=Math.sin(c),y=Math.cos(c),p=y/(m+y-1),x=p*p,T=p*(2/m-1),P=T*T,w=Math.PI*this.R*(f*(p-P)+Math.sqrt(_*(p-P)*(p-P)-(P+_)*(x-P)))/(P+_);l<0&&(w=-w),o=this.x0+w;var S=_+p;return w=Math.PI*this.R*(T*S-f*Math.sqrt((P+_)*(_+1)-S*S))/(P+_),a>=0?u=this.y0+w:u=this.y0-w,e.x=o,e.y=u,e}function Ru(e){var s,a,l,o,u,c,f,_,m,y,p,x,T;return e.x-=this.x0,e.y-=this.y0,p=Math.PI*this.R,l=e.x/p,o=e.y/p,u=l*l+o*o,c=-Math.abs(o)*(1+u),f=c-2*o*o+l*l,_=-2*c+1+2*o*o+u*u,T=o*o/_+(2*f*f*f/_/_/_-9*c*f/_/_)/27,m=(c-f*f/3/_)/_,y=2*Math.sqrt(-m/3),p=3*T/m/y,Math.abs(p)>1&&(p>=0?p=1:p=-1),x=Math.acos(p)/3,e.y>=0?a=(-y*Math.cos(x+Math.PI/3)-f/3/_)*Math.PI:a=-(-y*Math.cos(x+Math.PI/3)-f/3/_)*Math.PI,Math.abs(l)<E?s=this.long0:s=I(this.long0+Math.PI*(u-1+Math.sqrt(1+2*(l*l-o*o)+u*u))/2/l),e.x=s,e.y=a,e}var Zu=["Van_der_Grinten_I","VanDerGrinten","vandg"],Du={init:ku,forward:Bu,inverse:Ru,names:Zu};function qu(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function Gu(e){var s=e.x,a=e.y,l=Math.sin(e.y),o=Math.cos(e.y),u=I(s-this.long0),c,f,_,m,y,p,x,T,P,w,S,O,k,z,$,q,G,ot,X,mt,At,Q,ht;return this.sphere?Math.abs(this.sin_p12-1)<=E?(e.x=this.x0+this.a*(C-a)*Math.sin(u),e.y=this.y0-this.a*(C-a)*Math.cos(u),e):Math.abs(this.sin_p12+1)<=E?(e.x=this.x0+this.a*(C+a)*Math.sin(u),e.y=this.y0+this.a*(C+a)*Math.cos(u),e):(ot=this.sin_p12*l+this.cos_p12*o*Math.cos(u),q=Math.acos(ot),G=q?q/Math.sin(q):1,e.x=this.x0+this.a*G*o*Math.sin(u),e.y=this.y0+this.a*G*(this.cos_p12*l-this.sin_p12*o*Math.cos(u)),e):(c=se(this.es),f=ae(this.es),_=re(this.es),m=oe(this.es),Math.abs(this.sin_p12-1)<=E?(y=this.a*_t(c,f,_,m,C),p=this.a*_t(c,f,_,m,a),e.x=this.x0+(y-p)*Math.sin(u),e.y=this.y0-(y-p)*Math.cos(u),e):Math.abs(this.sin_p12+1)<=E?(y=this.a*_t(c,f,_,m,C),p=this.a*_t(c,f,_,m,a),e.x=this.x0+(y+p)*Math.sin(u),e.y=this.y0+(y+p)*Math.cos(u),e):(x=l/o,T=Ii(this.a,this.e,this.sin_p12),P=Ii(this.a,this.e,l),w=Math.atan((1-this.es)*x+this.es*T*this.sin_p12/(P*o)),S=Math.atan2(Math.sin(u),this.cos_p12*Math.tan(w)-this.sin_p12*Math.cos(u)),S===0?X=Math.asin(this.cos_p12*Math.sin(w)-this.sin_p12*Math.cos(w)):Math.abs(Math.abs(S)-Math.PI)<=E?X=-Math.asin(this.cos_p12*Math.sin(w)-this.sin_p12*Math.cos(w)):X=Math.asin(Math.sin(u)*Math.cos(w)/Math.sin(S)),O=this.e*this.sin_p12/Math.sqrt(1-this.es),k=this.e*this.cos_p12*Math.cos(S)/Math.sqrt(1-this.es),z=O*k,$=k*k,mt=X*X,At=mt*X,Q=At*X,ht=Q*X,q=T*X*(1-mt*$*(1-$)/6+At/8*z*(1-2*$)+Q/120*($*(4-7*$)-3*O*O*(1-7*$))-ht/48*z),e.x=this.x0+q*Math.sin(S),e.y=this.y0+q*Math.cos(S),e))}function Fu(e){e.x-=this.x0,e.y-=this.y0;var s,a,l,o,u,c,f,_,m,y,p,x,T,P,w,S,O,k,z,$,q,G,ot,X;return this.sphere?(s=Math.sqrt(e.x*e.x+e.y*e.y),s>2*C*this.a?void 0:(a=s/this.a,l=Math.sin(a),o=Math.cos(a),u=this.long0,Math.abs(s)<=E?c=this.lat0:(c=ni(o*this.sin_p12+e.y*l*this.cos_p12/s),f=Math.abs(this.lat0)-C,Math.abs(f)<=E?this.lat0>=0?u=I(this.long0+Math.atan2(e.x,-e.y)):u=I(this.long0-Math.atan2(-e.x,e.y)):u=I(this.long0+Math.atan2(e.x*l,s*this.cos_p12*o-e.y*this.sin_p12*l))),e.x=u,e.y=c,e)):(_=se(this.es),m=ae(this.es),y=re(this.es),p=oe(this.es),Math.abs(this.sin_p12-1)<=E?(x=this.a*_t(_,m,y,p,C),s=Math.sqrt(e.x*e.x+e.y*e.y),T=x-s,c=He(T/this.a,_,m,y,p),u=I(this.long0+Math.atan2(e.x,-1*e.y)),e.x=u,e.y=c,e):Math.abs(this.sin_p12+1)<=E?(x=this.a*_t(_,m,y,p,C),s=Math.sqrt(e.x*e.x+e.y*e.y),T=s-x,c=He(T/this.a,_,m,y,p),u=I(this.long0+Math.atan2(e.x,e.y)),e.x=u,e.y=c,e):(s=Math.sqrt(e.x*e.x+e.y*e.y),S=Math.atan2(e.x,e.y),P=Ii(this.a,this.e,this.sin_p12),O=Math.cos(S),k=this.e*this.cos_p12*O,z=-k*k/(1-this.es),$=3*this.es*(1-z)*this.sin_p12*this.cos_p12*O/(1-this.es),q=s/P,G=q-z*(1+z)*Math.pow(q,3)/6-$*(1+3*z)*Math.pow(q,4)/24,ot=1-z*G*G/2-q*G*G*G/6,w=Math.asin(this.sin_p12*Math.cos(G)+this.cos_p12*Math.sin(G)*O),u=I(this.long0+Math.asin(Math.sin(S)*Math.sin(G)/Math.cos(w))),X=Math.sin(w),c=Math.atan2((X-this.es*ot*this.sin_p12)*Math.tan(w),X*(1-this.es)),e.x=u,e.y=c,e))}var Wu=["Azimuthal_Equidistant","aeqd"],Uu={init:qu,forward:Gu,inverse:Fu,names:Wu};function Hu(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function $u(e){var s,a,l,o,u,c,f,_,m=e.x,y=e.y;return l=I(m-this.long0),s=Math.sin(y),a=Math.cos(y),o=Math.cos(l),c=this.sin_p14*s+this.cos_p14*a*o,u=1,(c>0||Math.abs(c)<=E)&&(f=this.a*u*a*Math.sin(l),_=this.y0+this.a*u*(this.cos_p14*s-this.sin_p14*a*o)),e.x=f,e.y=_,e}function ju(e){var s,a,l,o,u,c,f;return e.x-=this.x0,e.y-=this.y0,s=Math.sqrt(e.x*e.x+e.y*e.y),a=ni(s/this.a),l=Math.sin(a),o=Math.cos(a),c=this.long0,Math.abs(s)<=E?(f=this.lat0,e.x=c,e.y=f,e):(f=ni(o*this.sin_p14+e.y*l*this.cos_p14/s),u=Math.abs(this.lat0)-C,Math.abs(u)<=E?(this.lat0>=0?c=I(this.long0+Math.atan2(e.x,-e.y)):c=I(this.long0-Math.atan2(-e.x,e.y)),e.x=c,e.y=f,e):(c=I(this.long0+Math.atan2(e.x*l,s*this.cos_p14*o-e.y*this.sin_p14*l)),e.x=c,e.y=f,e))}var Vu=["ortho"],Ku={init:Hu,forward:$u,inverse:ju,names:Vu},tt={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},V={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function Xu(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=C-j/2?this.face=tt.TOP:this.lat0<=-(C-j/2)?this.face=tt.BOTTOM:Math.abs(this.long0)<=j?this.face=tt.FRONT:Math.abs(this.long0)<=C+j?this.face=this.long0>0?tt.RIGHT:tt.LEFT:this.face=tt.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function Qu(e){var s={x:0,y:0},a,l,o,u,c,f,_={value:0};if(e.x-=this.long0,this.es!==0?a=Math.atan(this.one_minus_f_squared*Math.tan(e.y)):a=e.y,l=e.x,this.face===tt.TOP)u=C-a,l>=j&&l<=C+j?(_.value=V.AREA_0,o=l-C):l>C+j||l<=-(C+j)?(_.value=V.AREA_1,o=l>0?l-st:l+st):l>-(C+j)&&l<=-j?(_.value=V.AREA_2,o=l+C):(_.value=V.AREA_3,o=l);else if(this.face===tt.BOTTOM)u=C+a,l>=j&&l<=C+j?(_.value=V.AREA_0,o=-l+C):l<j&&l>=-j?(_.value=V.AREA_1,o=-l):l<-j&&l>=-(C+j)?(_.value=V.AREA_2,o=-l-C):(_.value=V.AREA_3,o=l>0?-l+st:-l-st);else{var m,y,p,x,T,P,w;this.face===tt.RIGHT?l=Ni(l,+C):this.face===tt.BACK?l=Ni(l,+st):this.face===tt.LEFT&&(l=Ni(l,-C)),x=Math.sin(a),T=Math.cos(a),P=Math.sin(l),w=Math.cos(l),m=T*w,y=T*P,p=x,this.face===tt.FRONT?(u=Math.acos(m),o=$e(u,p,y,_)):this.face===tt.RIGHT?(u=Math.acos(y),o=$e(u,p,-m,_)):this.face===tt.BACK?(u=Math.acos(-m),o=$e(u,p,-y,_)):this.face===tt.LEFT?(u=Math.acos(-y),o=$e(u,p,m,_)):(u=o=0,_.value=V.AREA_0)}return f=Math.atan(12/st*(o+Math.acos(Math.sin(o)*Math.cos(j))-C)),c=Math.sqrt((1-Math.cos(u))/(Math.cos(f)*Math.cos(f))/(1-Math.cos(Math.atan(1/Math.cos(o))))),_.value===V.AREA_1?f+=C:_.value===V.AREA_2?f+=st:_.value===V.AREA_3&&(f+=1.5*st),s.x=c*Math.cos(f),s.y=c*Math.sin(f),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,e.x=s.x,e.y=s.y,e}function Ju(e){var s={lam:0,phi:0},a,l,o,u,c,f,_,m,y,p={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,l=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),a=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?p.value=V.AREA_0:e.y>=0&&e.y>=Math.abs(e.x)?(p.value=V.AREA_1,a-=C):e.x<0&&-e.x>=Math.abs(e.y)?(p.value=V.AREA_2,a=a<0?a+st:a-st):(p.value=V.AREA_3,a+=C),y=st/12*Math.tan(a),c=Math.sin(y)/(Math.cos(y)-1/Math.sqrt(2)),f=Math.atan(c),o=Math.cos(a),u=Math.tan(l),_=1-o*o*u*u*(1-Math.cos(Math.atan(1/Math.cos(f)))),_<-1?_=-1:_>1&&(_=1),this.face===tt.TOP)m=Math.acos(_),s.phi=C-m,p.value===V.AREA_0?s.lam=f+C:p.value===V.AREA_1?s.lam=f<0?f+st:f-st:p.value===V.AREA_2?s.lam=f-C:s.lam=f;else if(this.face===tt.BOTTOM)m=Math.acos(_),s.phi=m-C,p.value===V.AREA_0?s.lam=-f+C:p.value===V.AREA_1?s.lam=-f:p.value===V.AREA_2?s.lam=-f-C:s.lam=f<0?-f-st:-f+st;else{var x,T,P;x=_,y=x*x,y>=1?P=0:P=Math.sqrt(1-y)*Math.sin(f),y+=P*P,y>=1?T=0:T=Math.sqrt(1-y),p.value===V.AREA_1?(y=T,T=-P,P=y):p.value===V.AREA_2?(T=-T,P=-P):p.value===V.AREA_3&&(y=T,T=P,P=-y),this.face===tt.RIGHT?(y=x,x=-T,T=y):this.face===tt.BACK?(x=-x,T=-T):this.face===tt.LEFT&&(y=x,x=T,T=-y),s.phi=Math.acos(-P)-C,s.lam=Math.atan2(T,x),this.face===tt.RIGHT?s.lam=Ni(s.lam,-C):this.face===tt.BACK?s.lam=Ni(s.lam,-st):this.face===tt.LEFT&&(s.lam=Ni(s.lam,+C))}if(this.es!==0){var w,S,O;w=s.phi<0?1:0,S=Math.tan(s.phi),O=this.b/Math.sqrt(S*S+this.one_minus_f_squared),s.phi=Math.atan(Math.sqrt(this.a*this.a-O*O)/(this.one_minus_f*O)),w&&(s.phi=-s.phi)}return s.lam+=this.long0,e.x=s.lam,e.y=s.phi,e}function $e(e,s,a,l){var o;return e<E?(l.value=V.AREA_0,o=0):(o=Math.atan2(s,a),Math.abs(o)<=j?l.value=V.AREA_0:o>j&&o<=C+j?(l.value=V.AREA_1,o-=C):o>C+j||o<=-(C+j)?(l.value=V.AREA_2,o=o>=0?o-st:o+st):(l.value=V.AREA_3,o+=C)),o}function Ni(e,s){var a=e+s;return a<-st?a+=Ji:a>+st&&(a-=Ji),a}var Yu=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"],tf={init:Xu,forward:Qu,inverse:Ju,names:Yu},Kn=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],he=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Na=.8487,za=1.3523,ka=Bt/5,ef=1/ka,zi=18,je=function(e,s){return e[0]+s*(e[1]+s*(e[2]+s*e[3]))},nf=function(e,s){return e[1]+s*(2*e[2]+s*3*e[3])};function sf(e,s,a,l){for(var o=s;l;--l){var u=e(o);if(o-=u,Math.abs(u)<a)break}return o}function af(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function rf(e){var s=I(e.x-this.long0),a=Math.abs(e.y),l=Math.floor(a*ka);l<0?l=0:l>=zi&&(l=zi-1),a=Bt*(a-ef*l);var o={x:je(Kn[l],a)*s,y:je(he[l],a)};return e.y<0&&(o.y=-o.y),o.x=o.x*this.a*Na+this.x0,o.y=o.y*this.a*za+this.y0,o}function of(e){var s={x:(e.x-this.x0)/(this.a*Na),y:Math.abs(e.y-this.y0)/(this.a*za)};if(s.y>=1)s.x/=Kn[zi][0],s.y=e.y<0?-C:C;else{var a=Math.floor(s.y*zi);for(a<0?a=0:a>=zi&&(a=zi-1);;)if(he[a][0]>s.y)--a;else if(he[a+1][0]<=s.y)++a;else break;var l=he[a],o=5*(s.y-l[0])/(he[a+1][0]-l[0]);o=sf(function(u){return(je(l,u)-s.y)/nf(l,u)},o,E,100),s.x/=je(Kn[a],o),s.y=(5*a+o)*ft,e.y<0&&(s.y=-s.y)}return s.x=I(s.x+this.long0),s}var hf=["Robinson","robin"],lf={init:af,forward:rf,inverse:of,names:hf};function uf(){this.name="geocent"}function ff(e){var s=ha(e,this.es,this.a);return s}function cf(e){var s=la(e,this.es,this.a,this.b);return s}var df=["Geocentric","geocentric","geocent","Geocent"],_f={init:uf,forward:ff,inverse:cf,names:df},ct={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},le={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function mf(){if(Object.keys(le).forEach(function(a){if(typeof this[a]=="undefined")this[a]=le[a].def;else{if(le[a].num&&isNaN(this[a]))throw new Error("Invalid parameter value, must be numeric "+a+" = "+this[a]);le[a].num&&(this[a]=parseFloat(this[a]))}le[a].degrees&&(this[a]=this[a]*ft)}.bind(this)),Math.abs(Math.abs(this.lat0)-C)<E?this.mode=this.lat0<0?ct.S_POLE:ct.N_POLE:Math.abs(this.lat0)<E?this.mode=ct.EQUIT:(this.mode=ct.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,s=this.azi;this.cg=Math.cos(s),this.sg=Math.sin(s),this.cw=Math.cos(e),this.sw=Math.sin(e)}function vf(e){e.x-=this.long0;var s=Math.sin(e.y),a=Math.cos(e.y),l=Math.cos(e.x),o,u;switch(this.mode){case ct.OBLIQ:u=this.sinph0*s+this.cosph0*a*l;break;case ct.EQUIT:u=a*l;break;case ct.S_POLE:u=-s;break;case ct.N_POLE:u=s;break}switch(u=this.pn1/(this.p-u),o=u*a*Math.sin(e.x),this.mode){case ct.OBLIQ:u*=this.cosph0*s-this.sinph0*a*l;break;case ct.EQUIT:u*=s;break;case ct.N_POLE:u*=-(a*l);break;case ct.S_POLE:u*=a*l;break}var c,f;return c=u*this.cg+o*this.sg,f=1/(c*this.sw*this.h1+this.cw),o=(o*this.cg-u*this.sg)*this.cw*f,u=c*f,e.x=o*this.a,e.y=u*this.a,e}function pf(e){e.x/=this.a,e.y/=this.a;var s={x:e.x,y:e.y},a,l,o;o=1/(this.pn1-e.y*this.sw),a=this.pn1*e.x*o,l=this.pn1*e.y*this.cw*o,e.x=a*this.cg+l*this.sg,e.y=l*this.cg-a*this.sg;var u=We(e.x,e.y);if(Math.abs(u)<E)s.x=0,s.y=e.y;else{var c,f;switch(f=1-u*u*this.pfact,f=(this.p-Math.sqrt(f))/(this.pn1/u+u/this.pn1),c=Math.sqrt(1-f*f),this.mode){case ct.OBLIQ:s.y=Math.asin(c*this.sinph0+e.y*f*this.cosph0/u),e.y=(c-this.sinph0*Math.sin(s.y))*u,e.x*=f*this.cosph0;break;case ct.EQUIT:s.y=Math.asin(e.y*f/u),e.y=c*u,e.x*=f;break;case ct.N_POLE:s.y=Math.asin(c),e.y=-e.y;break;case ct.S_POLE:s.y=-Math.asin(c);break}s.x=Math.atan2(e.x,e.y)}return e.x=s.x+this.long0,e.y=s.y,e}var gf=["Tilted_Perspective","tpers"],yf={init:mf,forward:vf,inverse:pf,names:gf};function Mf(e){e.Proj.projections.add(Fe),e.Proj.projections.add(Ue),e.Proj.projections.add(Ah),e.Proj.projections.add(qh),e.Proj.projections.add($h),e.Proj.projections.add(Qh),e.Proj.projections.add(nl),e.Proj.projections.add(hl),e.Proj.projections.add(dl),e.Proj.projections.add(gl),e.Proj.projections.add(kl),e.Proj.projections.add(Gl),e.Proj.projections.add($l),e.Proj.projections.add(Jl),e.Proj.projections.add(nu),e.Proj.projections.add(hu),e.Proj.projections.add(du),e.Proj.projections.add(gu),e.Proj.projections.add(bu),e.Proj.projections.add(Eu),e.Proj.projections.add(zu),e.Proj.projections.add(Du),e.Proj.projections.add(Uu),e.Proj.projections.add(Ku),e.Proj.projections.add(tf),e.Proj.projections.add(lf),e.Proj.projections.add(_f),e.Proj.projections.add(yf)}Pt.defaultDatum="WGS84";Pt.Proj=Zt;Pt.WGS84=new Pt.Proj("WGS84");Pt.Point=Ei;Pt.toPoint=da;Pt.defs=dt;Pt.nadgrid=Oo;Pt.transform=qe;Pt.mgrs=Vo;Pt.version="__VERSION__";Mf(Pt);var xf=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Ba={exports:{}};/* @preserve
 * Leaflet 1.7.1, a JS library for interactive maps. http://leafletjs.com
 * (c) 2010-2019 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,s){(function(a,l){l(s)})(xf,function(a){var l="1.7.1";function o(t){var i,n,r,h;for(n=1,r=arguments.length;n<r;n++){h=arguments[n];for(i in h)t[i]=h[i]}return t}var u=Object.create||function(){function t(){}return function(i){return t.prototype=i,new t}}();function c(t,i){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var r=n.call(arguments,2);return function(){return t.apply(i,r.length?r.concat(n.call(arguments)):arguments)}}var f=0;function _(t){return t._leaflet_id=t._leaflet_id||++f,t._leaflet_id}function m(t,i,n){var r,h,d,v;return v=function(){r=!1,h&&(d.apply(n,h),h=!1)},d=function(){r?h=arguments:(t.apply(n,arguments),setTimeout(v,i),r=!0)},d}function y(t,i,n){var r=i[1],h=i[0],d=r-h;return t===r&&n?t:((t-h)%d+d)%d+h}function p(){return!1}function x(t,i){var n=Math.pow(10,i===void 0?6:i);return Math.round(t*n)/n}function T(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function P(t){return T(t).split(/\s+/)}function w(t,i){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?u(t.options):{});for(var n in i)t.options[n]=i[n];return t.options}function S(t,i,n){var r=[];for(var h in t)r.push(encodeURIComponent(n?h.toUpperCase():h)+"="+encodeURIComponent(t[h]));return(!i||i.indexOf("?")===-1?"?":"&")+r.join("&")}var O=/\{ *([\w_-]+) *\}/g;function k(t,i){return t.replace(O,function(n,r){var h=i[r];if(h===void 0)throw new Error("No value provided for variable "+n);return typeof h=="function"&&(h=h(i)),h})}var z=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function $(t,i){for(var n=0;n<t.length;n++)if(t[n]===i)return n;return-1}var q="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function G(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var ot=0;function X(t){var i=+new Date,n=Math.max(0,16-(i-ot));return ot=i+n,window.setTimeout(t,n)}var mt=window.requestAnimationFrame||G("RequestAnimationFrame")||X,At=window.cancelAnimationFrame||G("CancelAnimationFrame")||G("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function Q(t,i,n){if(n&&mt===X)t.call(i);else return mt.call(window,c(t,i))}function ht(t){t&&At.call(window,t)}var Ve={extend:o,create:u,bind:c,lastId:f,stamp:_,throttle:m,wrapNum:y,falseFn:p,formatNum:x,trim:T,splitWords:P,setOptions:w,getParamString:S,template:k,isArray:z,indexOf:$,emptyImageUrl:q,requestFn:mt,cancelFn:At,requestAnimFrame:Q,cancelAnimFrame:ht};function Dt(){}Dt.extend=function(t){var i=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=i.__super__=this.prototype,r=u(n);r.constructor=i,i.prototype=r;for(var h in this)Object.prototype.hasOwnProperty.call(this,h)&&h!=="prototype"&&h!=="__super__"&&(i[h]=this[h]);return t.statics&&(o(i,t.statics),delete t.statics),t.includes&&(Ra(t.includes),o.apply(null,[r].concat(t.includes)),delete t.includes),r.options&&(t.options=o(u(r.options),t.options)),o(r,t),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var d=0,v=r._initHooks.length;d<v;d++)r._initHooks[d].call(this)}},i},Dt.include=function(t){return o(this.prototype,t),this},Dt.mergeOptions=function(t){return o(this.prototype.options,t),this},Dt.addInitHook=function(t){var i=Array.prototype.slice.call(arguments,1),n=typeof t=="function"?t:function(){this[t].apply(this,i)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};function Ra(t){if(!(typeof L=="undefined"||!L||!L.Mixin)){t=z(t)?t:[t];for(var i=0;i<t.length;i++)t[i]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var yt={on:function(t,i,n){if(typeof t=="object")for(var r in t)this._on(r,t[r],i);else{t=P(t);for(var h=0,d=t.length;h<d;h++)this._on(t[h],i,n)}return this},off:function(t,i,n){if(!t)delete this._events;else if(typeof t=="object")for(var r in t)this._off(r,t[r],i);else{t=P(t);for(var h=0,d=t.length;h<d;h++)this._off(t[h],i,n)}return this},_on:function(t,i,n){this._events=this._events||{};var r=this._events[t];r||(r=[],this._events[t]=r),n===this&&(n=void 0);for(var h={fn:i,ctx:n},d=r,v=0,g=d.length;v<g;v++)if(d[v].fn===i&&d[v].ctx===n)return;d.push(h)},_off:function(t,i,n){var r,h,d;if(!!this._events&&(r=this._events[t],!!r)){if(!i){for(h=0,d=r.length;h<d;h++)r[h].fn=p;delete this._events[t];return}if(n===this&&(n=void 0),r)for(h=0,d=r.length;h<d;h++){var v=r[h];if(v.ctx===n&&v.fn===i){v.fn=p,this._firingCount&&(this._events[t]=r=r.slice()),r.splice(h,1);return}}}},fire:function(t,i,n){if(!this.listens(t,n))return this;var r=o({},i,{type:t,target:this,sourceTarget:i&&i.sourceTarget||this});if(this._events){var h=this._events[t];if(h){this._firingCount=this._firingCount+1||1;for(var d=0,v=h.length;d<v;d++){var g=h[d];g.fn.call(g.ctx||this,r)}this._firingCount--}}return n&&this._propagateEvent(r),this},listens:function(t,i){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(i){for(var r in this._eventParents)if(this._eventParents[r].listens(t,i))return!0}return!1},once:function(t,i,n){if(typeof t=="object"){for(var r in t)this.once(r,t[r],i);return this}var h=c(function(){this.off(t,i,n).off(t,h,n)},this);return this.on(t,i,n).on(t,h,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[_(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[_(t)],this},_propagateEvent:function(t){for(var i in this._eventParents)this._eventParents[i].fire(t.type,o({layer:t.target,propagatedFrom:t.target},t),!0)}};yt.addEventListener=yt.on,yt.removeEventListener=yt.clearAllEventListeners=yt.off,yt.addOneTimeEventListener=yt.once,yt.fireEvent=yt.fire,yt.hasEventListeners=yt.listens;var ki=Dt.extend(yt);function B(t,i,n){this.x=n?Math.round(t):t,this.y=n?Math.round(i):i}var Xn=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};B.prototype={clone:function(){return new B(this.x,this.y)},add:function(t){return this.clone()._add(F(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(F(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new B(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new B(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Xn(this.x),this.y=Xn(this.y),this},distanceTo:function(t){t=F(t);var i=t.x-this.x,n=t.y-this.y;return Math.sqrt(i*i+n*n)},equals:function(t){return t=F(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=F(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function F(t,i,n){return t instanceof B?t:z(t)?new B(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new B(t.x,t.y):new B(t,i,n)}function J(t,i){if(!!t)for(var n=i?[t,i]:t,r=0,h=n.length;r<h;r++)this.extend(n[r])}J.prototype={extend:function(t){return t=F(t),!this.min&&!this.max?(this.min=t.clone(),this.max=t.clone()):(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)),this},getCenter:function(t){return new B((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new B(this.min.x,this.max.y)},getTopRight:function(){return new B(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var i,n;return typeof t[0]=="number"||t instanceof B?t=F(t):t=Lt(t),t instanceof J?(i=t.min,n=t.max):i=n=t,i.x>=this.min.x&&n.x<=this.max.x&&i.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=Lt(t);var i=this.min,n=this.max,r=t.min,h=t.max,d=h.x>=i.x&&r.x<=n.x,v=h.y>=i.y&&r.y<=n.y;return d&&v},overlaps:function(t){t=Lt(t);var i=this.min,n=this.max,r=t.min,h=t.max,d=h.x>i.x&&r.x<n.x,v=h.y>i.y&&r.y<n.y;return d&&v},isValid:function(){return!!(this.min&&this.max)}};function Lt(t,i){return!t||t instanceof J?t:new J(t,i)}function vt(t,i){if(!!t)for(var n=i?[t,i]:t,r=0,h=n.length;r<h;r++)this.extend(n[r])}vt.prototype={extend:function(t){var i=this._southWest,n=this._northEast,r,h;if(t instanceof K)r=t,h=t;else if(t instanceof vt){if(r=t._southWest,h=t._northEast,!r||!h)return this}else return t?this.extend(it(t)||lt(t)):this;return!i&&!n?(this._southWest=new K(r.lat,r.lng),this._northEast=new K(h.lat,h.lng)):(i.lat=Math.min(r.lat,i.lat),i.lng=Math.min(r.lng,i.lng),n.lat=Math.max(h.lat,n.lat),n.lng=Math.max(h.lng,n.lng)),this},pad:function(t){var i=this._southWest,n=this._northEast,r=Math.abs(i.lat-n.lat)*t,h=Math.abs(i.lng-n.lng)*t;return new vt(new K(i.lat-r,i.lng-h),new K(n.lat+r,n.lng+h))},getCenter:function(){return new K((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new K(this.getNorth(),this.getWest())},getSouthEast:function(){return new K(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof K||"lat"in t?t=it(t):t=lt(t);var i=this._southWest,n=this._northEast,r,h;return t instanceof vt?(r=t.getSouthWest(),h=t.getNorthEast()):r=h=t,r.lat>=i.lat&&h.lat<=n.lat&&r.lng>=i.lng&&h.lng<=n.lng},intersects:function(t){t=lt(t);var i=this._southWest,n=this._northEast,r=t.getSouthWest(),h=t.getNorthEast(),d=h.lat>=i.lat&&r.lat<=n.lat,v=h.lng>=i.lng&&r.lng<=n.lng;return d&&v},overlaps:function(t){t=lt(t);var i=this._southWest,n=this._northEast,r=t.getSouthWest(),h=t.getNorthEast(),d=h.lat>i.lat&&r.lat<n.lat,v=h.lng>i.lng&&r.lng<n.lng;return d&&v},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,i){return t?(t=lt(t),this._southWest.equals(t.getSouthWest(),i)&&this._northEast.equals(t.getNorthEast(),i)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function lt(t,i){return t instanceof vt?t:new vt(t,i)}function K(t,i,n){if(isNaN(t)||isNaN(i))throw new Error("Invalid LatLng object: ("+t+", "+i+")");this.lat=+t,this.lng=+i,n!==void 0&&(this.alt=+n)}K.prototype={equals:function(t,i){if(!t)return!1;t=it(t);var n=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return n<=(i===void 0?1e-9:i)},toString:function(t){return"LatLng("+x(this.lat,t)+", "+x(this.lng,t)+")"},distanceTo:function(t){return Kt.distance(this,it(t))},wrap:function(){return Kt.wrapLatLng(this)},toBounds:function(t){var i=180*t/40075017,n=i/Math.cos(Math.PI/180*this.lat);return lt([this.lat-i,this.lng-n],[this.lat+i,this.lng+n])},clone:function(){return new K(this.lat,this.lng,this.alt)}};function it(t,i,n){return t instanceof K?t:z(t)&&typeof t[0]!="object"?t.length===3?new K(t[0],t[1],t[2]):t.length===2?new K(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new K(t.lat,"lng"in t?t.lng:t.lon,t.alt):i===void 0?null:new K(t,i,n)}var qt={latLngToPoint:function(t,i){var n=this.projection.project(t),r=this.scale(i);return this.transformation._transform(n,r)},pointToLatLng:function(t,i){var n=this.scale(i),r=this.transformation.untransform(t,n);return this.projection.unproject(r)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var i=this.projection.bounds,n=this.scale(t),r=this.transformation.transform(i.min,n),h=this.transformation.transform(i.max,n);return new J(r,h)},infinite:!1,wrapLatLng:function(t){var i=this.wrapLng?y(t.lng,this.wrapLng,!0):t.lng,n=this.wrapLat?y(t.lat,this.wrapLat,!0):t.lat,r=t.alt;return new K(n,i,r)},wrapLatLngBounds:function(t){var i=t.getCenter(),n=this.wrapLatLng(i),r=i.lat-n.lat,h=i.lng-n.lng;if(r===0&&h===0)return t;var d=t.getSouthWest(),v=t.getNorthEast(),g=new K(d.lat-r,d.lng-h),M=new K(v.lat-r,v.lng-h);return new vt(g,M)}},Kt=o({},qt,{wrapLng:[-180,180],R:6371e3,distance:function(t,i){var n=Math.PI/180,r=t.lat*n,h=i.lat*n,d=Math.sin((i.lat-t.lat)*n/2),v=Math.sin((i.lng-t.lng)*n/2),g=d*d+Math.cos(r)*Math.cos(h)*v*v,M=2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g));return this.R*M}}),Qn=6378137,Ke={R:Qn,MAX_LATITUDE:85.0511287798,project:function(t){var i=Math.PI/180,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,t.lat),-n),h=Math.sin(r*i);return new B(this.R*t.lng*i,this.R*Math.log((1+h)/(1-h))/2)},unproject:function(t){var i=180/Math.PI;return new K((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*i,t.x*i/this.R)},bounds:function(){var t=Qn*Math.PI;return new J([-t,-t],[t,t])}()};function Xe(t,i,n,r){if(z(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=i,this._c=n,this._d=r}Xe.prototype={transform:function(t,i){return this._transform(t.clone(),i)},_transform:function(t,i){return i=i||1,t.x=i*(this._a*t.x+this._b),t.y=i*(this._c*t.y+this._d),t},untransform:function(t,i){return i=i||1,new B((t.x/i-this._b)/this._a,(t.y/i-this._d)/this._c)}};function Bi(t,i,n,r){return new Xe(t,i,n,r)}var Qe=o({},Kt,{code:"EPSG:3857",projection:Ke,transformation:function(){var t=.5/(Math.PI*Ke.R);return Bi(t,.5,-t,.5)}()}),Za=o({},Qe,{code:"EPSG:900913"});function Jn(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Yn(t,i){var n="",r,h,d,v,g,M;for(r=0,d=t.length;r<d;r++){for(g=t[r],h=0,v=g.length;h<v;h++)M=g[h],n+=(h?"L":"M")+M.x+" "+M.y;n+=i?de?"z":"x":""}return n||"M0 0"}var Je=document.documentElement.style,ue="ActiveXObject"in window,fi=ue&&!document.addEventListener,fe="msLaunchUri"in navigator&&!("documentMode"in document),Ye=Nt("webkit"),Ri=Nt("android"),Zi=Nt("android 2")||Nt("android 3"),Da=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ts=Ri&&Nt("Google")&&Da<537&&!("AudioNode"in window),tn=!!window.opera,en=!fe&&Nt("chrome"),nn=Nt("gecko")&&!Ye&&!tn&&!ue,ce=!en&&Nt("safari"),is=Nt("phantom"),es="OTransition"in Je,ns=navigator.platform.indexOf("Win")===0,sn=ue&&"transition"in Je,an="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Zi,ss="MozPerspective"in Je,Mt=!window.L_DISABLE_3D&&(sn||an||ss)&&!es&&!is,ci=typeof orientation!="undefined"||Nt("mobile"),qa=ci&&Ye,Ga=ci&&an,Xt=!window.PointerEvent&&window.MSPointerEvent,It=!!(window.PointerEvent||Xt),Ot=!window.L_NO_TOUCH&&(It||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),as=ci&&tn,Fa=ci&&nn,Qt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,di=function(){var t=!1;try{var i=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",p,i),window.removeEventListener("testPassiveEventSupport",p,i)}catch{}return t}(),rs=function(){return!!document.createElement("canvas").getContext}(),de=!!(document.createElementNS&&Jn("svg").createSVGRect),_e=!de&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var i=t.firstChild;return i.style.behavior="url(#default#VML)",i&&typeof i.adj=="object"}catch{return!1}}();function Nt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Wa={ie:ue,ielt9:fi,edge:fe,webkit:Ye,android:Ri,android23:Zi,androidStock:ts,opera:tn,chrome:en,gecko:nn,safari:ce,phantom:is,opera12:es,win:ns,ie3d:sn,webkit3d:an,gecko3d:ss,any3d:Mt,mobile:ci,mobileWebkit:qa,mobileWebkit3d:Ga,msPointer:Xt,pointer:It,touch:Ot,mobileOpera:as,mobileGecko:Fa,retina:Qt,passiveEvents:di,canvas:rs,svg:de,vml:_e},rn=Xt?"MSPointerDown":"pointerdown",on=Xt?"MSPointerMove":"pointermove",hn=Xt?"MSPointerUp":"pointerup",ln=Xt?"MSPointerCancel":"pointercancel",_i={},os=!1;function Ua(t,i,n,r){return i==="touchstart"?$a(t,n,r):i==="touchmove"?Ka(t,n,r):i==="touchend"&&Xa(t,n,r),this}function Ha(t,i,n){var r=t["_leaflet_"+i+n];return i==="touchstart"?t.removeEventListener(rn,r,!1):i==="touchmove"?t.removeEventListener(on,r,!1):i==="touchend"&&(t.removeEventListener(hn,r,!1),t.removeEventListener(ln,r,!1)),this}function $a(t,i,n){var r=c(function(h){h.MSPOINTER_TYPE_TOUCH&&h.pointerType===h.MSPOINTER_TYPE_TOUCH&&wt(h),un(h,i)});t["_leaflet_touchstart"+n]=r,t.addEventListener(rn,r,!1),os||(document.addEventListener(rn,ja,!0),document.addEventListener(on,Va,!0),document.addEventListener(hn,hs,!0),document.addEventListener(ln,hs,!0),os=!0)}function ja(t){_i[t.pointerId]=t}function Va(t){_i[t.pointerId]&&(_i[t.pointerId]=t)}function hs(t){delete _i[t.pointerId]}function un(t,i){t.touches=[];for(var n in _i)t.touches.push(_i[n]);t.changedTouches=[t],i(t)}function Ka(t,i,n){var r=function(h){h.pointerType===(h.MSPOINTER_TYPE_MOUSE||"mouse")&&h.buttons===0||un(h,i)};t["_leaflet_touchmove"+n]=r,t.addEventListener(on,r,!1)}function Xa(t,i,n){var r=function(h){un(h,i)};t["_leaflet_touchend"+n]=r,t.addEventListener(hn,r,!1),t.addEventListener(ln,r,!1)}var me=Xt?"MSPointerDown":It?"pointerdown":"touchstart",ve=Xt?"MSPointerUp":It?"pointerup":"touchend",mi="_leaflet_";function Qa(t,i,n){var r,h,d=!1,v=250;function g(b){if(It){if(!b.isPrimary||b.pointerType==="mouse")return}else if(b.touches.length>1)return;var A=Date.now(),N=A-(r||A);h=b.touches?b.touches[0]:b,d=N>0&&N<=v,r=A}function M(b){if(d&&!h.cancelBubble){if(It){if(b.pointerType==="mouse")return;var A={},N,H;for(H in h)N=h[H],A[H]=N&&N.bind?N.bind(h):N;h=A}h.type="dblclick",h.button=0,i(h),r=null}}return t[mi+me+n]=g,t[mi+ve+n]=M,t[mi+"dblclick"+n]=i,t.addEventListener(me,g,di?{passive:!1}:!1),t.addEventListener(ve,M,di?{passive:!1}:!1),t.addEventListener("dblclick",i,!1),this}function Ja(t,i){var n=t[mi+me+i],r=t[mi+ve+i],h=t[mi+"dblclick"+i];return t.removeEventListener(me,n,di?{passive:!1}:!1),t.removeEventListener(ve,r,di?{passive:!1}:!1),t.removeEventListener("dblclick",h,!1),this}var fn=ye(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Di=ye(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ls=Di==="webkitTransition"||Di==="OTransition"?Di+"End":"transitionend";function us(t){return typeof t=="string"?document.getElementById(t):t}function qi(t,i){var n=t.style[i]||t.currentStyle&&t.currentStyle[i];if((!n||n==="auto")&&document.defaultView){var r=document.defaultView.getComputedStyle(t,null);n=r?r[i]:null}return n==="auto"?null:n}function U(t,i,n){var r=document.createElement(t);return r.className=i||"",n&&n.appendChild(r),r}function Y(t){var i=t.parentNode;i&&i.removeChild(t)}function pe(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function vi(t){var i=t.parentNode;i&&i.lastChild!==t&&i.appendChild(t)}function pi(t){var i=t.parentNode;i&&i.firstChild!==t&&i.insertBefore(t,i.firstChild)}function cn(t,i){if(t.classList!==void 0)return t.classList.contains(i);var n=ge(t);return n.length>0&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(n)}function Z(t,i){if(t.classList!==void 0)for(var n=P(i),r=0,h=n.length;r<h;r++)t.classList.add(n[r]);else if(!cn(t,i)){var d=ge(t);dn(t,(d?d+" ":"")+i)}}function et(t,i){t.classList!==void 0?t.classList.remove(i):dn(t,T((" "+ge(t)+" ").replace(" "+i+" "," ")))}function dn(t,i){t.className.baseVal===void 0?t.className=i:t.className.baseVal=i}function ge(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function xt(t,i){"opacity"in t.style?t.style.opacity=i:"filter"in t.style&&Ya(t,i)}function Ya(t,i){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(r)}catch{if(i===1)return}i=Math.round(i*100),n?(n.Enabled=i!==100,n.Opacity=i):t.style.filter+=" progid:"+r+"(opacity="+i+")"}function ye(t){for(var i=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in i)return t[n];return!1}function si(t,i,n){var r=i||new B(0,0);t.style[fn]=(sn?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(n?" scale("+n+")":"")}function at(t,i){t._leaflet_pos=i,Mt?si(t,i):(t.style.left=i.x+"px",t.style.top=i.y+"px")}function Jt(t){return t._leaflet_pos||new B(0,0)}var Gi,Fi,_n;if("onselectstart"in document)Gi=function(){D(window,"selectstart",wt)},Fi=function(){nt(window,"selectstart",wt)};else{var Wi=ye(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Gi=function(){if(Wi){var t=document.documentElement.style;_n=t[Wi],t[Wi]="none"}},Fi=function(){Wi&&(document.documentElement.style[Wi]=_n,_n=void 0)}}function mn(){D(window,"dragstart",wt)}function vn(){nt(window,"dragstart",wt)}var Me,pn;function gn(t){for(;t.tabIndex===-1;)t=t.parentNode;!t.style||(xe(),Me=t,pn=t.style.outline,t.style.outline="none",D(window,"keydown",xe))}function xe(){!Me||(Me.style.outline=pn,Me=void 0,pn=void 0,nt(window,"keydown",xe))}function fs(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function yn(t){var i=t.getBoundingClientRect();return{x:i.width/t.offsetWidth||1,y:i.height/t.offsetHeight||1,boundingClientRect:i}}var tr={TRANSFORM:fn,TRANSITION:Di,TRANSITION_END:ls,get:us,getStyle:qi,create:U,remove:Y,empty:pe,toFront:vi,toBack:pi,hasClass:cn,addClass:Z,removeClass:et,setClass:dn,getClass:ge,setOpacity:xt,testProp:ye,setTransform:si,setPosition:at,getPosition:Jt,disableTextSelection:Gi,enableTextSelection:Fi,disableImageDrag:mn,enableImageDrag:vn,preventOutline:gn,restoreOutline:xe,getSizedParentNode:fs,getScale:yn};function D(t,i,n,r){if(typeof i=="object")for(var h in i)we(t,h,i[h],n);else{i=P(i);for(var d=0,v=i.length;d<v;d++)we(t,i[d],n,r)}return this}var Tt="_leaflet_events";function nt(t,i,n,r){if(typeof i=="object")for(var h in i)xn(t,h,i[h],n);else if(i){i=P(i);for(var d=0,v=i.length;d<v;d++)xn(t,i[d],n,r)}else{for(var g in t[Tt])xn(t,g,t[Tt][g]);delete t[Tt]}return this}function cs(){if(It)return!(fe||ce)}var Mn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function we(t,i,n,r){var h=i+_(n)+(r?"_"+_(r):"");if(t[Tt]&&t[Tt][h])return this;var d=function(g){return n.call(r||t,g||window.event)},v=d;It&&i.indexOf("touch")===0?Ua(t,i,d,h):Ot&&i==="dblclick"&&!cs()?Qa(t,d,h):"addEventListener"in t?i==="touchstart"||i==="touchmove"||i==="wheel"||i==="mousewheel"?t.addEventListener(Mn[i]||i,d,di?{passive:!1}:!1):i==="mouseenter"||i==="mouseleave"?(d=function(g){g=g||window.event,Pe(t,g)&&v(g)},t.addEventListener(Mn[i],d,!1)):t.addEventListener(i,v,!1):"attachEvent"in t&&t.attachEvent("on"+i,d),t[Tt]=t[Tt]||{},t[Tt][h]=d}function xn(t,i,n,r){var h=i+_(n)+(r?"_"+_(r):""),d=t[Tt]&&t[Tt][h];if(!d)return this;It&&i.indexOf("touch")===0?Ha(t,i,h):Ot&&i==="dblclick"&&!cs()?Ja(t,h):"removeEventListener"in t?t.removeEventListener(Mn[i]||i,d,!1):"detachEvent"in t&&t.detachEvent("on"+i,d),t[Tt][h]=null}function ai(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,Ln(t),this}function wn(t){return we(t,"wheel",ai),this}function Ui(t){return D(t,"mousedown touchstart dblclick",ai),we(t,"click",bn),this}function wt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Gt(t){return wt(t),ai(t),this}function ds(t,i){if(!i)return new B(t.clientX,t.clientY);var n=yn(i),r=n.boundingClientRect;return new B((t.clientX-r.left)/n.x-i.clientLeft,(t.clientY-r.top)/n.y-i.clientTop)}var ir=ns&&en?2*window.devicePixelRatio:nn?window.devicePixelRatio:1;function _s(t){return fe?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/ir:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}var Pn={};function bn(t){Pn[t.type]=!0}function Ln(t){var i=Pn[t.type];return Pn[t.type]=!1,i}function Pe(t,i){var n=i.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch{return!1}return n!==t}var er={on:D,off:nt,stopPropagation:ai,disableScrollPropagation:wn,disableClickPropagation:Ui,preventDefault:wt,stop:Gt,getMousePosition:ds,getWheelDelta:_s,fakeStop:bn,skipped:Ln,isExternalTarget:Pe,addListener:D,removeListener:nt},ms=ki.extend({run:function(t,i,n,r){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=Jt(t),this._offset=i.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=Q(this._animate,this),this._step()},_step:function(t){var i=+new Date-this._startTime,n=this._duration*1e3;i<n?this._runFrame(this._easeOut(i/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,i){var n=this._startPos.add(this._offset.multiplyBy(t));i&&n._round(),at(this._el,n),this.fire("step")},_complete:function(){ht(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),W=ki.extend({options:{crs:Qe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,i){i=w(this,i),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),i.maxBounds&&this.setMaxBounds(i.maxBounds),i.zoom!==void 0&&(this._zoom=this._limitZoom(i.zoom)),i.center&&i.zoom!==void 0&&this.setView(it(i.center),i.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Di&&Mt&&!as&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),D(this._proxy,ls,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,i,n){if(i=i===void 0?this._zoom:this._limitZoom(i),t=this._limitCenter(it(t),i,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&n!==!0){n.animate!==void 0&&(n.zoom=o({animate:n.animate},n.zoom),n.pan=o({animate:n.animate,duration:n.duration},n.pan));var r=this._zoom!==i?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,i,n.zoom):this._tryAnimatedPan(t,n.pan);if(r)return clearTimeout(this._sizeTimer),this}return this._resetView(t,i),this},setZoom:function(t,i){return this._loaded?this.setView(this.getCenter(),t,{zoom:i}):(this._zoom=t,this)},zoomIn:function(t,i){return t=t||(Mt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,i)},zoomOut:function(t,i){return t=t||(Mt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,i)},setZoomAround:function(t,i,n){var r=this.getZoomScale(i),h=this.getSize().divideBy(2),d=t instanceof B?t:this.latLngToContainerPoint(t),v=d.subtract(h).multiplyBy(1-1/r),g=this.containerPointToLatLng(h.add(v));return this.setView(g,i,{zoom:n})},_getBoundsCenterZoom:function(t,i){i=i||{},t=t.getBounds?t.getBounds():lt(t);var n=F(i.paddingTopLeft||i.padding||[0,0]),r=F(i.paddingBottomRight||i.padding||[0,0]),h=this.getBoundsZoom(t,!1,n.add(r));if(h=typeof i.maxZoom=="number"?Math.min(i.maxZoom,h):h,h===1/0)return{center:t.getCenter(),zoom:h};var d=r.subtract(n).divideBy(2),v=this.project(t.getSouthWest(),h),g=this.project(t.getNorthEast(),h),M=this.unproject(v.add(g).divideBy(2).add(d),h);return{center:M,zoom:h}},fitBounds:function(t,i){if(t=lt(t),!t.isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,i);return this.setView(n.center,n.zoom,i)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,i){return this.setView(t,this._zoom,{pan:i})},panBy:function(t,i){if(t=F(t).round(),i=i||{},!t.x&&!t.y)return this.fire("moveend");if(i.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ms,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),i.noMoveStart||this.fire("movestart"),i.animate!==!1){Z(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,i.duration||.25,i.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,i,n){if(n=n||{},n.animate===!1||!Mt)return this.setView(t,i,n);this._stop();var r=this.project(this.getCenter()),h=this.project(t),d=this.getSize(),v=this._zoom;t=it(t),i=i===void 0?v:i;var g=Math.max(d.x,d.y),M=g*this.getZoomScale(v,i),b=h.distanceTo(r)||1,A=1.42,N=A*A;function H(rt){var Ne=rt?-1:1,Fr=rt?M:g,Wr=M*M-g*g+Ne*N*N*b*b,Ur=2*Fr*N*b,Zn=Wr/Ur,Vs=Math.sqrt(Zn*Zn+1)-Zn,Hr=Vs<1e-9?-18:Math.log(Vs);return Hr}function $t(rt){return(Math.exp(rt)-Math.exp(-rt))/2}function hi(rt){return(Math.exp(rt)+Math.exp(-rt))/2}function Oe(rt){return $t(rt)/hi(rt)}var ti=H(0);function Rn(rt){return g*(hi(ti)/hi(ti+A*rt))}function Zr(rt){return g*(hi(ti)*Oe(ti+A*rt)-$t(ti))/N}function Dr(rt){return 1-Math.pow(1-rt,1.5)}var qr=Date.now(),$s=(H(1)-ti)/A,Gr=n.duration?1e3*n.duration:1e3*$s*.8;function js(){var rt=(Date.now()-qr)/Gr,Ne=Dr(rt)*$s;rt<=1?(this._flyToFrame=Q(js,this),this._move(this.unproject(r.add(h.subtract(r).multiplyBy(Zr(Ne)/b)),v),this.getScaleZoom(g/Rn(Ne),v),{flyTo:!0})):this._move(t,i)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),js.call(this),this},flyToBounds:function(t,i){var n=this._getBoundsCenterZoom(t,i);return this.flyTo(n.center,n.zoom,i)},setMaxBounds:function(t){if(t=lt(t),t.isValid())this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds);else return this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds);return this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)},setMinZoom:function(t){var i=this.options.minZoom;return this.options.minZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var i=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,i){this._enforcingBounds=!0;var n=this.getCenter(),r=this._limitCenter(n,this._zoom,lt(t));return n.equals(r)||this.panTo(r,i),this._enforcingBounds=!1,this},panInside:function(t,i){i=i||{};var n=F(i.paddingTopLeft||i.padding||[0,0]),r=F(i.paddingBottomRight||i.padding||[0,0]),h=this.getCenter(),d=this.project(h),v=this.project(t),g=this.getPixelBounds(),M=g.getSize().divideBy(2),b=Lt([g.min.add(n),g.max.subtract(r)]);if(!b.contains(v)){this._enforcingBounds=!0;var A=d.subtract(v),N=F(v.x+A.x,v.y+A.y);(v.x<b.min.x||v.x>b.max.x)&&(N.x=d.x-A.x,A.x>0?N.x+=M.x-n.x:N.x-=M.x-r.x),(v.y<b.min.y||v.y>b.max.y)&&(N.y=d.y-A.y,A.y>0?N.y+=M.y-n.y:N.y-=M.y-r.y),this.panTo(this.unproject(N),i),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=o({animate:!1,pan:!0},t===!0?{animate:!0}:t);var i=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),r=i.divideBy(2).round(),h=n.divideBy(2).round(),d=r.subtract(h);return!d.x&&!d.y?this:(t.animate&&t.pan?this.panBy(d):(t.pan&&this._rawPanBy(d),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:n}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=o({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var i=c(this._handleGeolocationResponse,this),n=c(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(i,n,t):navigator.geolocation.getCurrentPosition(i,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var i=t.code,n=t.message||(i===1?"permission denied":i===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:i,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var i=t.coords.latitude,n=t.coords.longitude,r=new K(i,n),h=r.toBounds(t.coords.accuracy*2),d=this._locateOptions;if(d.setView){var v=this.getBoundsZoom(h);this.setView(r,d.maxZoom?Math.min(v,d.maxZoom):v)}var g={latlng:r,bounds:h,timestamp:t.timestamp};for(var M in t.coords)typeof t.coords[M]=="number"&&(g[M]=t.coords[M]);this.fire("locationfound",g)},addHandler:function(t,i){if(!i)return this;var n=this[t]=new i(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Y(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ht(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)Y(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,i){var n="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),r=U("div",n,i||this._mapPane);return t&&(this._panes[t]=r),r},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),i=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new vt(i,n)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,i,n){t=lt(t),n=F(n||[0,0]);var r=this.getZoom()||0,h=this.getMinZoom(),d=this.getMaxZoom(),v=t.getNorthWest(),g=t.getSouthEast(),M=this.getSize().subtract(n),b=Lt(this.project(g,r),this.project(v,r)).getSize(),A=Mt?this.options.zoomSnap:1,N=M.x/b.x,H=M.y/b.y,$t=i?Math.max(N,H):Math.min(N,H);return r=this.getScaleZoom($t,r),A&&(r=Math.round(r/(A/100))*(A/100),r=i?Math.ceil(r/A)*A:Math.floor(r/A)*A),Math.max(h,Math.min(d,r))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new B(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,i){var n=this._getTopLeftPoint(t,i);return new J(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,i){var n=this.options.crs;return i=i===void 0?this._zoom:i,n.scale(t)/n.scale(i)},getScaleZoom:function(t,i){var n=this.options.crs;i=i===void 0?this._zoom:i;var r=n.zoom(t*n.scale(i));return isNaN(r)?1/0:r},project:function(t,i){return i=i===void 0?this._zoom:i,this.options.crs.latLngToPoint(it(t),i)},unproject:function(t,i){return i=i===void 0?this._zoom:i,this.options.crs.pointToLatLng(F(t),i)},layerPointToLatLng:function(t){var i=F(t).add(this.getPixelOrigin());return this.unproject(i)},latLngToLayerPoint:function(t){var i=this.project(it(t))._round();return i._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(it(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(lt(t))},distance:function(t,i){return this.options.crs.distance(it(t),it(i))},containerPointToLayerPoint:function(t){return F(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return F(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var i=this.containerPointToLayerPoint(F(t));return this.layerPointToLatLng(i)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(it(t)))},mouseEventToContainerPoint:function(t){return ds(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var i=this._container=us(t);if(i){if(i._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");D(i,"scroll",this._onScroll,this),this._containerId=_(i)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&Mt,Z(t,"leaflet-container"+(Ot?" leaflet-touch":"")+(Qt?" leaflet-retina":"")+(fi?" leaflet-oldie":"")+(ce?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var i=qi(t,"position");i!=="absolute"&&i!=="relative"&&i!=="fixed"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),at(this._mapPane,new B(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Z(t.markerPane,"leaflet-zoom-hide"),Z(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,i){at(this._mapPane,new B(0,0));var n=!this._loaded;this._loaded=!0,i=this._limitZoom(i),this.fire("viewprereset");var r=this._zoom!==i;this._moveStart(r,!1)._move(t,i)._moveEnd(r),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,i){return t&&this.fire("zoomstart"),i||this.fire("movestart"),this},_move:function(t,i,n){i===void 0&&(i=this._zoom);var r=this._zoom!==i;return this._zoom=i,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(r||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ht(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){at(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[_(this._container)]=this;var i=t?nt:D;i(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&i(window,"resize",this._onResize,this),Mt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ht(this._resizeRequest),this._resizeRequest=Q(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,i){for(var n=[],r,h=i==="mouseout"||i==="mouseover",d=t.target||t.srcElement,v=!1;d;){if(r=this._targets[_(d)],r&&(i==="click"||i==="preclick")&&!t._simulated&&this._draggableMoved(r)){v=!0;break}if(r&&r.listens(i,!0)&&(h&&!Pe(d,t)||(n.push(r),h))||d===this._container)break;d=d.parentNode}return!n.length&&!v&&!h&&Pe(d,t)&&(n=[this]),n},_handleDOMEvent:function(t){if(!(!this._loaded||Ln(t))){var i=t.type;(i==="mousedown"||i==="keypress"||i==="keyup"||i==="keydown")&&gn(t.target||t.srcElement),this._fireDOMEvent(t,i)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,i,n){if(t.type==="click"){var r=o({},t);r.type="preclick",this._fireDOMEvent(r,r.type,n)}if(!t._stopped&&(n=(n||[]).concat(this._findEventTargets(t,i)),!!n.length)){var h=n[0];i==="contextmenu"&&h.listens(i,!0)&&wt(t);var d={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var v=h.getLatLng&&(!h._radius||h._radius<=10);d.containerPoint=v?this.latLngToContainerPoint(h.getLatLng()):this.mouseEventToContainerPoint(t),d.layerPoint=this.containerPointToLayerPoint(d.containerPoint),d.latlng=v?h.getLatLng():this.layerPointToLatLng(d.layerPoint)}for(var g=0;g<n.length;g++)if(n[g].fire(i,d,!0),d.originalEvent._stopped||n[g].options.bubblingMouseEvents===!1&&$(this._mouseEvents,i)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,i=this._handlers.length;t<i;t++)this._handlers[t].disable()},whenReady:function(t,i){return this._loaded?t.call(i||this,{target:this}):this.on("load",t,i),this},_getMapPanePos:function(){return Jt(this._mapPane)||new B(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,i){var n=t&&i!==void 0?this._getNewPixelOrigin(t,i):this.getPixelOrigin();return n.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,i){var n=this.getSize()._divideBy(2);return this.project(t,i)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,i,n){var r=this._getNewPixelOrigin(n,i);return this.project(t,i)._subtract(r)},_latLngBoundsToNewLayerBounds:function(t,i,n){var r=this._getNewPixelOrigin(n,i);return Lt([this.project(t.getSouthWest(),i)._subtract(r),this.project(t.getNorthWest(),i)._subtract(r),this.project(t.getSouthEast(),i)._subtract(r),this.project(t.getNorthEast(),i)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,i,n){if(!n)return t;var r=this.project(t,i),h=this.getSize().divideBy(2),d=new J(r.subtract(h),r.add(h)),v=this._getBoundsOffset(d,n,i);return v.round().equals([0,0])?t:this.unproject(r.add(v),i)},_limitOffset:function(t,i){if(!i)return t;var n=this.getPixelBounds(),r=new J(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(r,i))},_getBoundsOffset:function(t,i,n){var r=Lt(this.project(i.getNorthEast(),n),this.project(i.getSouthWest(),n)),h=r.min.subtract(t.min),d=r.max.subtract(t.max),v=this._rebound(h.x,-d.x),g=this._rebound(h.y,-d.y);return new B(v,g)},_rebound:function(t,i){return t+i>0?Math.round(t-i)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(i))},_limitZoom:function(t){var i=this.getMinZoom(),n=this.getMaxZoom(),r=Mt?this.options.zoomSnap:1;return r&&(t=Math.round(t/r)*r),Math.max(i,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){et(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,i){var n=this._getCenterOffset(t)._trunc();return(i&&i.animate)!==!0&&!this.getSize().contains(n)?!1:(this.panBy(n,i),!0)},_createAnimProxy:function(){var t=this._proxy=U("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(i){var n=fn,r=this._proxy.style[n];si(this._proxy,this.project(i.center,i.zoom),this.getZoomScale(i.zoom,1)),r===this._proxy.style[n]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Y(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),i=this.getZoom();si(this._proxy,this.project(t,i),this.getZoomScale(i,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,i,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||n.animate===!1||this._nothingToAnimate()||Math.abs(i-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(i),h=this._getCenterOffset(t)._divideBy(1-1/r);return n.animate!==!0&&!this.getSize().contains(h)?!1:(Q(function(){this._moveStart(!0,!1)._animateZoom(t,i,!0)},this),!0)},_animateZoom:function(t,i,n,r){!this._mapPane||(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=i,Z(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:i,noUpdate:r}),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&et(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),Q(function(){this._moveEnd(!0)},this))}});function nr(t,i){return new W(t,i)}var Ct=Dt.extend({options:{position:"topright"},initialize:function(t){w(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var i=this._map;return i&&i.removeControl(this),this.options.position=t,i&&i.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var i=this._container=this.onAdd(t),n=this.getPosition(),r=t._controlCorners[n];return Z(i,"leaflet-control"),n.indexOf("bottom")!==-1?r.insertBefore(i,r.firstChild):r.appendChild(i),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Y(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Hi=function(t){return new Ct(t)};W.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},i="leaflet-",n=this._controlContainer=U("div",i+"control-container",this._container);function r(h,d){var v=i+h+" "+i+d;t[h+d]=U("div",v,n)}r("top","left"),r("top","right"),r("bottom","left"),r("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Y(this._controlCorners[t]);Y(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var vs=Ct.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,i,n,r){return n<r?-1:r<n?1:0}},initialize:function(t,i,n){w(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var r in t)this._addLayer(t[r],r);for(r in i)this._addLayer(i[r],r,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Ct.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,i){return this._addLayer(t,i),this._map?this._update():this},addOverlay:function(t,i){return this._addLayer(t,i,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var i=this._getLayer(_(t));return i&&this._layers.splice(this._layers.indexOf(i),1),this._map?this._update():this},expand:function(){Z(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(Z(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):et(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return et(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",i=this._container=U("div",t),n=this.options.collapsed;i.setAttribute("aria-haspopup",!0),Ui(i),wn(i);var r=this._section=U("section",t+"-list");n&&(this._map.on("click",this.collapse,this),Ri||D(i,{mouseenter:this.expand,mouseleave:this.collapse},this));var h=this._layersLink=U("a",t+"-toggle",i);h.href="#",h.title="Layers",Ot?(D(h,"click",Gt),D(h,"click",this.expand,this)):D(h,"focus",this.expand,this),n||this.expand(),this._baseLayersList=U("div",t+"-base",r),this._separator=U("div",t+"-separator",r),this._overlaysList=U("div",t+"-overlays",r),i.appendChild(r)},_getLayer:function(t){for(var i=0;i<this._layers.length;i++)if(this._layers[i]&&_(this._layers[i].layer)===t)return this._layers[i]},_addLayer:function(t,i,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:i,overlay:n}),this.options.sortLayers&&this._layers.sort(c(function(r,h){return this.options.sortFunction(r.layer,h.layer,r.name,h.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;pe(this._baseLayersList),pe(this._overlaysList),this._layerControlInputs=[];var t,i,n,r,h=0;for(n=0;n<this._layers.length;n++)r=this._layers[n],this._addItem(r),i=i||r.overlay,t=t||!r.overlay,h+=r.overlay?0:1;return this.options.hideSingleBase&&(t=t&&h>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=i&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var i=this._getLayer(_(t.target)),n=i.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;n&&this._map.fire(n,i)},_createRadioElement:function(t,i){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(i?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=n,r.firstChild},_addItem:function(t){var i=document.createElement("label"),n=this._map.hasLayer(t.layer),r;t.overlay?(r=document.createElement("input"),r.type="checkbox",r.className="leaflet-control-layers-selector",r.defaultChecked=n):r=this._createRadioElement("leaflet-base-layers_"+_(this),n),this._layerControlInputs.push(r),r.layerId=_(t.layer),D(r,"click",this._onInputClick,this);var h=document.createElement("span");h.innerHTML=" "+t.name;var d=document.createElement("div");i.appendChild(d),d.appendChild(r),d.appendChild(h);var v=t.overlay?this._overlaysList:this._baseLayersList;return v.appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){var t=this._layerControlInputs,i,n,r=[],h=[];this._handlingClick=!0;for(var d=t.length-1;d>=0;d--)i=t[d],n=this._getLayer(i.layerId).layer,i.checked?r.push(n):i.checked||h.push(n);for(d=0;d<h.length;d++)this._map.hasLayer(h[d])&&this._map.removeLayer(h[d]);for(d=0;d<r.length;d++)this._map.hasLayer(r[d])||this._map.addLayer(r[d]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,i,n,r=this._map.getZoom(),h=t.length-1;h>=0;h--)i=t[h],n=this._getLayer(i.layerId).layer,i.disabled=n.options.minZoom!==void 0&&r<n.options.minZoom||n.options.maxZoom!==void 0&&r>n.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),sr=function(t,i,n){return new vs(t,i,n)},Tn=Ct.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var i="leaflet-control-zoom",n=U("div",i+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,i+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,i+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,i,n,r,h){var d=U("a",n,r);return d.innerHTML=t,d.href="#",d.title=i,d.setAttribute("role","button"),d.setAttribute("aria-label",i),Ui(d),D(d,"click",Gt),D(d,"click",h,this),D(d,"click",this._refocusOnMap,this),d},_updateDisabled:function(){var t=this._map,i="leaflet-disabled";et(this._zoomInButton,i),et(this._zoomOutButton,i),(this._disabled||t._zoom===t.getMinZoom())&&Z(this._zoomOutButton,i),(this._disabled||t._zoom===t.getMaxZoom())&&Z(this._zoomInButton,i)}});W.mergeOptions({zoomControl:!0}),W.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Tn,this.addControl(this.zoomControl))});var ar=function(t){return new Tn(t)},ps=Ct.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var i="leaflet-control-scale",n=U("div",i),r=this.options;return this._addScales(r,i+"-line",n),t.on(r.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,i,n){t.metric&&(this._mScale=U("div",i,n)),t.imperial&&(this._iScale=U("div",i,n))},_update:function(){var t=this._map,i=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,i]),t.containerPointToLatLng([this.options.maxWidth,i]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var i=this._getRoundNum(t),n=i<1e3?i+" m":i/1e3+" km";this._updateScale(this._mScale,n,i/t)},_updateImperial:function(t){var i=t*3.2808399,n,r,h;i>5280?(n=i/5280,r=this._getRoundNum(n),this._updateScale(this._iScale,r+" mi",r/n)):(h=this._getRoundNum(i),this._updateScale(this._iScale,h+" ft",h/i))},_updateScale:function(t,i,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=i},_getRoundNum:function(t){var i=Math.pow(10,(Math.floor(t)+"").length-1),n=t/i;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,i*n}}),rr=function(t){return new ps(t)},Cn=Ct.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){w(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=U("div","leaflet-control-attribution"),Ui(this._container);for(var i in t._layers)t._layers[i].getAttribution&&this.addAttribution(t._layers[i].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(!!this._map){var t=[];for(var i in this._attributions)this._attributions[i]&&t.push(i);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}});W.mergeOptions({attributionControl:!0}),W.addInitHook(function(){this.options.attributionControl&&new Cn().addTo(this)});var or=function(t){return new Cn(t)};Ct.Layers=vs,Ct.Zoom=Tn,Ct.Scale=ps,Ct.Attribution=Cn,Hi.layers=sr,Hi.zoom=ar,Hi.scale=rr,Hi.attribution=or;var zt=Dt.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});zt.addTo=function(t,i){return t.addHandler(i,this),this};var hr={Events:yt},gs=Ot?"touchstart mousedown":"mousedown",ys={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},Sn={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},ri=ki.extend({options:{clickTolerance:3},initialize:function(t,i,n,r){w(this,r),this._element=t,this._dragStartTarget=i||t,this._preventOutline=n},enable:function(){this._enabled||(D(this._dragStartTarget,gs,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(ri._dragging===this&&this.finishDrag(),nt(this._dragStartTarget,gs,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!(t._simulated||!this._enabled)&&(this._moved=!1,!cn(this._element,"leaflet-zoom-anim")&&!(ri._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(ri._dragging=this,this._preventOutline&&gn(this._element),mn(),Gi(),!this._moving))){this.fire("down");var i=t.touches?t.touches[0]:t,n=fs(this._element);this._startPoint=new B(i.clientX,i.clientY),this._parentScale=yn(n),D(document,Sn[t.type],this._onMove,this),D(document,ys[t.type],this._onUp,this)}},_onMove:function(t){if(!(t._simulated||!this._enabled)){if(t.touches&&t.touches.length>1){this._moved=!0;return}var i=t.touches&&t.touches.length===1?t.touches[0]:t,n=new B(i.clientX,i.clientY)._subtract(this._startPoint);!n.x&&!n.y||Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,wt(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=Jt(this._element).subtract(n),Z(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Z(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,ht(this._animRequest),this._lastEvent=t,this._animRequest=Q(this._updatePosition,this,!0))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),at(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){t._simulated||!this._enabled||this.finishDrag()},finishDrag:function(){et(document.body,"leaflet-dragging"),this._lastTarget&&(et(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var t in Sn)nt(document,Sn[t],this._onMove,this),nt(document,ys[t],this._onUp,this);vn(),Fi(),this._moved&&this._moving&&(ht(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,ri._dragging=!1}});function Ms(t,i){if(!i||!t.length)return t.slice();var n=i*i;return t=fr(t,n),t=ur(t,n),t}function xs(t,i,n){return Math.sqrt($i(t,i,n,!0))}function lr(t,i,n){return $i(t,i,n)}function ur(t,i){var n=t.length,r=typeof Uint8Array!=void 0+""?Uint8Array:Array,h=new r(n);h[0]=h[n-1]=1,En(t,h,i,0,n-1);var d,v=[];for(d=0;d<n;d++)h[d]&&v.push(t[d]);return v}function En(t,i,n,r,h){var d=0,v,g,M;for(g=r+1;g<=h-1;g++)M=$i(t[g],t[r],t[h],!0),M>d&&(v=g,d=M);d>n&&(i[v]=1,En(t,i,n,r,v),En(t,i,n,v,h))}function fr(t,i){for(var n=[t[0]],r=1,h=0,d=t.length;r<d;r++)cr(t[r],t[h])>i&&(n.push(t[r]),h=r);return h<d-1&&n.push(t[d-1]),n}var ws;function Ps(t,i,n,r,h){var d=r?ws:oi(t,n),v=oi(i,n),g,M,b;for(ws=v;;){if(!(d|v))return[t,i];if(d&v)return!1;g=d||v,M=be(t,i,g,n,h),b=oi(M,n),g===d?(t=M,d=b):(i=M,v=b)}}function be(t,i,n,r,h){var d=i.x-t.x,v=i.y-t.y,g=r.min,M=r.max,b,A;return n&8?(b=t.x+d*(M.y-t.y)/v,A=M.y):n&4?(b=t.x+d*(g.y-t.y)/v,A=g.y):n&2?(b=M.x,A=t.y+v*(M.x-t.x)/d):n&1&&(b=g.x,A=t.y+v*(g.x-t.x)/d),new B(b,A,h)}function oi(t,i){var n=0;return t.x<i.min.x?n|=1:t.x>i.max.x&&(n|=2),t.y<i.min.y?n|=4:t.y>i.max.y&&(n|=8),n}function cr(t,i){var n=i.x-t.x,r=i.y-t.y;return n*n+r*r}function $i(t,i,n,r){var h=i.x,d=i.y,v=n.x-h,g=n.y-d,M=v*v+g*g,b;return M>0&&(b=((t.x-h)*v+(t.y-d)*g)/M,b>1?(h=n.x,d=n.y):b>0&&(h+=v*b,d+=g*b)),v=t.x-h,g=t.y-d,r?v*v+g*g:new B(h,d)}function Ft(t){return!z(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]!="undefined"}function bs(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ft(t)}var dr={simplify:Ms,pointToSegmentDistance:xs,closestPointOnSegment:lr,clipSegment:Ps,_getEdgeIntersection:be,_getBitCode:oi,_sqClosestPointOnSegment:$i,isFlat:Ft,_flat:bs};function Ls(t,i,n){var r,h=[1,4,2,8],d,v,g,M,b,A,N,H;for(d=0,A=t.length;d<A;d++)t[d]._code=oi(t[d],i);for(g=0;g<4;g++){for(N=h[g],r=[],d=0,A=t.length,v=A-1;d<A;v=d++)M=t[d],b=t[v],M._code&N?b._code&N||(H=be(b,M,N,i,n),H._code=oi(H,i),r.push(H)):(b._code&N&&(H=be(b,M,N,i,n),H._code=oi(H,i),r.push(H)),r.push(M));t=r}return t}var _r={clipPolygon:Ls},An={project:function(t){return new B(t.lng,t.lat)},unproject:function(t){return new K(t.y,t.x)},bounds:new J([-180,-90],[180,90])},In={R:6378137,R_MINOR:6356752314245179e-9,bounds:new J([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var i=Math.PI/180,n=this.R,r=t.lat*i,h=this.R_MINOR/n,d=Math.sqrt(1-h*h),v=d*Math.sin(r),g=Math.tan(Math.PI/4-r/2)/Math.pow((1-v)/(1+v),d/2);return r=-n*Math.log(Math.max(g,1e-10)),new B(t.lng*i*n,r)},unproject:function(t){for(var i=180/Math.PI,n=this.R,r=this.R_MINOR/n,h=Math.sqrt(1-r*r),d=Math.exp(-t.y/n),v=Math.PI/2-2*Math.atan(d),g=0,M=.1,b;g<15&&Math.abs(M)>1e-7;g++)b=h*Math.sin(v),b=Math.pow((1-b)/(1+b),h/2),M=Math.PI/2-2*Math.atan(d*b)-v,v+=M;return new K(v*i,t.x*i/n)}},mr={LonLat:An,Mercator:In,SphericalMercator:Ke},vr=o({},Kt,{code:"EPSG:3395",projection:In,transformation:function(){var t=.5/(Math.PI*In.R);return Bi(t,.5,-t,.5)}()}),Ts=o({},Kt,{code:"EPSG:4326",projection:An,transformation:Bi(1/180,1,-1/180,.5)}),pr=o({},qt,{projection:An,transformation:Bi(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,i){var n=i.lng-t.lng,r=i.lat-t.lat;return Math.sqrt(n*n+r*r)},infinite:!0});qt.Earth=Kt,qt.EPSG3395=vr,qt.EPSG3857=Qe,qt.EPSG900913=Za,qt.EPSG4326=Ts,qt.Simple=pr;var St=ki.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[_(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[_(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var i=t.target;if(!!i.hasLayer(this)){if(this._map=i,this._zoomAnimated=i._zoomAnimated,this.getEvents){var n=this.getEvents();i.on(n,this),this.once("remove",function(){i.off(n,this)},this)}this.onAdd(i),this.getAttribution&&i.attributionControl&&i.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),i.fire("layeradd",{layer:this})}}});W.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var i=_(t);return this._layers[i]?this:(this._layers[i]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var i=_(t);return this._layers[i]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[i],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&_(t)in this._layers},eachLayer:function(t,i){for(var n in this._layers)t.call(i,this._layers[n]);return this},_addLayers:function(t){t=t?z(t)?t:[t]:[];for(var i=0,n=t.length;i<n;i++)this.addLayer(t[i])},_addZoomLimit:function(t){(isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[_(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var i=_(t);this._zoomBoundLayers[i]&&(delete this._zoomBoundLayers[i],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,i=-1/0,n=this._getZoomSpan();for(var r in this._zoomBoundLayers){var h=this._zoomBoundLayers[r].options;t=h.minZoom===void 0?t:Math.min(t,h.minZoom),i=h.maxZoom===void 0?i:Math.max(i,h.maxZoom)}this._layersMaxZoom=i===-1/0?void 0:i,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var gi=St.extend({initialize:function(t,i){w(this,i),this._layers={};var n,r;if(t)for(n=0,r=t.length;n<r;n++)this.addLayer(t[n])},addLayer:function(t){var i=this.getLayerId(t);return this._layers[i]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var i=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[i]&&this._map.removeLayer(this._layers[i]),delete this._layers[i],this},hasLayer:function(t){if(!t)return!1;var i=typeof t=="number"?t:this.getLayerId(t);return i in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var i=Array.prototype.slice.call(arguments,1),n,r;for(n in this._layers)r=this._layers[n],r[t]&&r[t].apply(r,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,i){for(var n in this._layers)t.call(i,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return _(t)}}),gr=function(t,i){return new gi(t,i)},yi=gi.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),gi.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),gi.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new vt;for(var i in this._layers){var n=this._layers[i];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),yr=function(t,i){return new yi(t,i)},Mi=Dt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){w(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,i){var n=this._getIconUrl(t);if(!n){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(n,i&&i.tagName==="IMG"?i:null);return this._setIconStyles(r,t),r},_setIconStyles:function(t,i){var n=this.options,r=n[i+"Size"];typeof r=="number"&&(r=[r,r]);var h=F(r),d=F(i==="shadow"&&n.shadowAnchor||n.iconAnchor||h&&h.divideBy(2,!0));t.className="leaflet-marker-"+i+" "+(n.className||""),d&&(t.style.marginLeft=-d.x+"px",t.style.marginTop=-d.y+"px"),h&&(t.style.width=h.x+"px",t.style.height=h.y+"px")},_createImg:function(t,i){return i=i||document.createElement("img"),i.src=t,i},_getIconUrl:function(t){return Qt&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Mr(t){return new Mi(t)}var ji=Mi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return ji.imagePath||(ji.imagePath=this._detectIconPath()),(this.options.imagePath||ji.imagePath)+Mi.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=U("div","leaflet-default-icon-path",document.body),i=qi(t,"background-image")||qi(t,"backgroundImage");return document.body.removeChild(t),i===null||i.indexOf("url")!==0?i="":i=i.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,""),i}}),Cs=zt.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new ri(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Z(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&et(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var i=this._marker,n=i._map,r=this._marker.options.autoPanSpeed,h=this._marker.options.autoPanPadding,d=Jt(i._icon),v=n.getPixelBounds(),g=n.getPixelOrigin(),M=Lt(v.min._subtract(g).add(h),v.max._subtract(g).subtract(h));if(!M.contains(d)){var b=F((Math.max(M.max.x,d.x)-M.max.x)/(v.max.x-M.max.x)-(Math.min(M.min.x,d.x)-M.min.x)/(v.min.x-M.min.x),(Math.max(M.max.y,d.y)-M.max.y)/(v.max.y-M.max.y)-(Math.min(M.min.y,d.y)-M.min.y)/(v.min.y-M.min.y)).multiplyBy(r);n.panBy(b,{animate:!1}),this._draggable._newPos._add(b),this._draggable._startPos._add(b),at(i._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=Q(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(ht(this._panRequest),this._panRequest=Q(this._adjustPan.bind(this,t)))},_onDrag:function(t){var i=this._marker,n=i._shadow,r=Jt(i._icon),h=i._map.layerPointToLatLng(r);n&&at(n,r),i._latlng=h,t.latlng=h,t.oldLatLng=this._oldLatLng,i.fire("move",t).fire("drag",t)},_onDragEnd:function(t){ht(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Le=St.extend({options:{icon:new ji,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,i){w(this,i),this._latlng=it(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var i=this._latlng;return this._latlng=it(t),this.update(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,i="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,t.title&&(n.title=t.title),n.tagName==="IMG"&&(n.alt=t.alt||"")),Z(n,i),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var h=t.icon.createShadow(this._shadow),d=!1;h!==this._shadow&&(this._removeShadow(),d=!0),h&&(Z(h,i),h.alt=""),this._shadow=h,t.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),h&&d&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),Y(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Y(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&at(this._icon,t),this._shadow&&at(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(i)},_initInteraction:function(){if(!!this.options.interactive&&(Z(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Cs)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Cs(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&xt(this._icon,t),this._shadow&&xt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function xr(t,i){return new Le(t,i)}var Yt=St.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return w(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Te=Yt.extend({options:{fill:!0,radius:10},initialize:function(t,i){w(this,i),this._latlng=it(t),this._radius=this.options.radius},setLatLng:function(t){var i=this._latlng;return this._latlng=it(t),this.redraw(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var i=t&&t.radius||this._radius;return Yt.prototype.setStyle.call(this,t),this.setRadius(i),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,i=this._radiusY||t,n=this._clickTolerance(),r=[t+n,i+n];this._pxBounds=new J(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function wr(t,i){return new Te(t,i)}var On=Te.extend({initialize:function(t,i,n){if(typeof i=="number"&&(i=o({},n,{radius:i})),w(this,i),this._latlng=it(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new vt(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Yt.prototype.setStyle,_project:function(){var t=this._latlng.lng,i=this._latlng.lat,n=this._map,r=n.options.crs;if(r.distance===Kt.distance){var h=Math.PI/180,d=this._mRadius/Kt.R/h,v=n.project([i+d,t]),g=n.project([i-d,t]),M=v.add(g).divideBy(2),b=n.unproject(M).lat,A=Math.acos((Math.cos(d*h)-Math.sin(i*h)*Math.sin(b*h))/(Math.cos(i*h)*Math.cos(b*h)))/h;(isNaN(A)||A===0)&&(A=d/Math.cos(Math.PI/180*i)),this._point=M.subtract(n.getPixelOrigin()),this._radius=isNaN(A)?0:M.x-n.project([b,t-A]).x,this._radiusY=M.y-v.y}else{var N=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(N).x}this._updateBounds()}});function Pr(t,i,n){return new On(t,i,n)}var Wt=Yt.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,i){w(this,i),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var i=1/0,n=null,r=$i,h,d,v=0,g=this._parts.length;v<g;v++)for(var M=this._parts[v],b=1,A=M.length;b<A;b++){h=M[b-1],d=M[b];var N=r(t,h,d,!0);N<i&&(i=N,n=r(t,h,d))}return n&&(n.distance=Math.sqrt(i)),n},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,i,n,r,h,d,v,g=this._rings[0],M=g.length;if(!M)return null;for(t=0,i=0;t<M-1;t++)i+=g[t].distanceTo(g[t+1])/2;if(i===0)return this._map.layerPointToLatLng(g[0]);for(t=0,r=0;t<M-1;t++)if(h=g[t],d=g[t+1],n=h.distanceTo(d),r+=n,r>i)return v=(r-i)/n,this._map.layerPointToLatLng([d.x-v*(d.x-h.x),d.y-v*(d.y-h.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,i){return i=i||this._defaultShape(),t=it(t),i.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new vt,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Ft(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var i=[],n=Ft(t),r=0,h=t.length;r<h;r++)n?(i[r]=it(t[r]),this._bounds.extend(i[r])):i[r]=this._convertLatLngs(t[r]);return i},_project:function(){var t=new J;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),i=new B(t,t);this._pxBounds=new J([this._rawPxBounds.min.subtract(i),this._rawPxBounds.max.add(i)])},_projectLatlngs:function(t,i,n){var r=t[0]instanceof K,h=t.length,d,v;if(r){for(v=[],d=0;d<h;d++)v[d]=this._map.latLngToLayerPoint(t[d]),n.extend(v[d]);i.push(v)}else for(d=0;d<h;d++)this._projectLatlngs(t[d],i,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var i=this._parts,n,r,h,d,v,g,M;for(n=0,h=0,d=this._rings.length;n<d;n++)for(M=this._rings[n],r=0,v=M.length;r<v-1;r++)g=Ps(M[r],M[r+1],t,r,!0),!!g&&(i[h]=i[h]||[],i[h].push(g[0]),(g[1]!==M[r+1]||r===v-2)&&(i[h].push(g[1]),h++))}},_simplifyPoints:function(){for(var t=this._parts,i=this.options.smoothFactor,n=0,r=t.length;n<r;n++)t[n]=Ms(t[n],i)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,i){var n,r,h,d,v,g,M=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,d=this._parts.length;n<d;n++)for(g=this._parts[n],r=0,v=g.length,h=v-1;r<v;h=r++)if(!(!i&&r===0)&&xs(t,g[h],g[r])<=M)return!0;return!1}});function br(t,i){return new Wt(t,i)}Wt._flat=bs;var xi=Wt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,i,n,r,h,d,v,g,M,b=this._rings[0],A=b.length;if(!A)return null;for(d=v=g=0,t=0,i=A-1;t<A;i=t++)n=b[t],r=b[i],h=n.y*r.x-r.y*n.x,v+=(n.x+r.x)*h,g+=(n.y+r.y)*h,d+=h*3;return d===0?M=b[0]:M=[v/d,g/d],this._map.layerPointToLatLng(M)},_convertLatLngs:function(t){var i=Wt.prototype._convertLatLngs.call(this,t),n=i.length;return n>=2&&i[0]instanceof K&&i[0].equals(i[n-1])&&i.pop(),i},_setLatLngs:function(t){Wt.prototype._setLatLngs.call(this,t),Ft(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ft(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,i=this.options.weight,n=new B(i,i);if(t=new J(t.min.subtract(n),t.max.add(n)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var r=0,h=this._rings.length,d;r<h;r++)d=Ls(this._rings[r],t,!0),d.length&&this._parts.push(d)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var i=!1,n,r,h,d,v,g,M,b;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(d=0,M=this._parts.length;d<M;d++)for(n=this._parts[d],v=0,b=n.length,g=b-1;v<b;g=v++)r=n[v],h=n[g],r.y>t.y!=h.y>t.y&&t.x<(h.x-r.x)*(t.y-r.y)/(h.y-r.y)+r.x&&(i=!i);return i||Wt.prototype._containsPoint.call(this,t,!0)}});function Lr(t,i){return new xi(t,i)}var Ut=yi.extend({initialize:function(t,i){w(this,i),this._layers={},t&&this.addData(t)},addData:function(t){var i=z(t)?t:t.features,n,r,h;if(i){for(n=0,r=i.length;n<r;n++)h=i[n],(h.geometries||h.geometry||h.features||h.coordinates)&&this.addData(h);return this}var d=this.options;if(d.filter&&!d.filter(t))return this;var v=Nn(t,d);return v?(v.feature=Ee(t),v.defaultOptions=v.options,this.resetStyle(v),d.onEachFeature&&d.onEachFeature(t,v),this.addLayer(v)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=o({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(i){this._setLayerStyle(i,t)},this)},_setLayerStyle:function(t,i){t.setStyle&&(typeof i=="function"&&(i=i(t.feature)),t.setStyle(i))}});function Nn(t,i){var n=t.type==="Feature"?t.geometry:t,r=n?n.coordinates:null,h=[],d=i&&i.pointToLayer,v=i&&i.coordsToLatLng||zn,g,M,b,A;if(!r&&!n)return null;switch(n.type){case"Point":return g=v(r),Ss(d,t,g,i);case"MultiPoint":for(b=0,A=r.length;b<A;b++)g=v(r[b]),h.push(Ss(d,t,g,i));return new yi(h);case"LineString":case"MultiLineString":return M=Ce(r,n.type==="LineString"?0:1,v),new Wt(M,i);case"Polygon":case"MultiPolygon":return M=Ce(r,n.type==="Polygon"?1:2,v),new xi(M,i);case"GeometryCollection":for(b=0,A=n.geometries.length;b<A;b++){var N=Nn({geometry:n.geometries[b],type:"Feature",properties:t.properties},i);N&&h.push(N)}return new yi(h);default:throw new Error("Invalid GeoJSON object.")}}function Ss(t,i,n,r){return t?t(i,n):new Le(n,r&&r.markersInheritOptions&&r)}function zn(t){return new K(t[1],t[0],t[2])}function Ce(t,i,n){for(var r=[],h=0,d=t.length,v;h<d;h++)v=i?Ce(t[h],i-1,n):(n||zn)(t[h]),r.push(v);return r}function kn(t,i){return i=typeof i=="number"?i:6,t.alt!==void 0?[x(t.lng,i),x(t.lat,i),x(t.alt,i)]:[x(t.lng,i),x(t.lat,i)]}function Se(t,i,n,r){for(var h=[],d=0,v=t.length;d<v;d++)h.push(i?Se(t[d],i-1,n,r):kn(t[d],r));return!i&&n&&h.push(h[0]),h}function wi(t,i){return t.feature?o({},t.feature,{geometry:i}):Ee(i)}function Ee(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var Bn={toGeoJSON:function(t){return wi(this,{type:"Point",coordinates:kn(this.getLatLng(),t)})}};Le.include(Bn),On.include(Bn),Te.include(Bn),Wt.include({toGeoJSON:function(t){var i=!Ft(this._latlngs),n=Se(this._latlngs,i?1:0,!1,t);return wi(this,{type:(i?"Multi":"")+"LineString",coordinates:n})}}),xi.include({toGeoJSON:function(t){var i=!Ft(this._latlngs),n=i&&!Ft(this._latlngs[0]),r=Se(this._latlngs,n?2:i?1:0,!0,t);return i||(r=[r]),wi(this,{type:(n?"Multi":"")+"Polygon",coordinates:r})}}),gi.include({toMultiPoint:function(t){var i=[];return this.eachLayer(function(n){i.push(n.toGeoJSON(t).geometry.coordinates)}),wi(this,{type:"MultiPoint",coordinates:i})},toGeoJSON:function(t){var i=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(i==="MultiPoint")return this.toMultiPoint(t);var n=i==="GeometryCollection",r=[];return this.eachLayer(function(h){if(h.toGeoJSON){var d=h.toGeoJSON(t);if(n)r.push(d.geometry);else{var v=Ee(d);v.type==="FeatureCollection"?r.push.apply(r,v.features):r.push(v)}}}),n?wi(this,{geometries:r,type:"GeometryCollection"}):{type:"FeatureCollection",features:r}}});function Es(t,i){return new Ut(t,i)}var Tr=Es,Ae=St.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,i,n){this._url=t,this._bounds=lt(i),w(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Z(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Y(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&vi(this._image),this},bringToBack:function(){return this._map&&pi(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=lt(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",i=this._image=t?this._url:U("img");if(Z(i,"leaflet-image-layer"),this._zoomAnimated&&Z(i,"leaflet-zoom-animated"),this.options.className&&Z(i,this.options.className),i.onselectstart=p,i.onmousemove=p,i.onload=c(this.fire,this,"load"),i.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(i.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=i.src;return}i.src=this._url,i.alt=this.options.alt},_animateZoom:function(t){var i=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;si(this._image,n,i)},_reset:function(){var t=this._image,i=new J(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=i.getSize();at(t,i.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){xt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Cr=function(t,i,n){return new Ae(t,i,n)},As=Ae.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var t=this._url.tagName==="VIDEO",i=this._image=t?this._url:U("video");if(Z(i,"leaflet-image-layer"),this._zoomAnimated&&Z(i,"leaflet-zoom-animated"),this.options.className&&Z(i,this.options.className),i.onselectstart=p,i.onmousemove=p,i.onloadeddata=c(this.fire,this,"load"),t){for(var n=i.getElementsByTagName("source"),r=[],h=0;h<n.length;h++)r.push(n[h].src);this._url=n.length>0?r:[i.src];return}z(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(i.style,"objectFit")&&(i.style.objectFit="fill"),i.autoplay=!!this.options.autoplay,i.loop=!!this.options.loop,i.muted=!!this.options.muted;for(var d=0;d<this._url.length;d++){var v=U("source");v.src=this._url[d],i.appendChild(v)}}});function Sr(t,i,n){return new As(t,i,n)}var Is=Ae.extend({_initImage:function(){var t=this._image=this._url;Z(t,"leaflet-image-layer"),this._zoomAnimated&&Z(t,"leaflet-zoom-animated"),this.options.className&&Z(t,this.options.className),t.onselectstart=p,t.onmousemove=p}});function Er(t,i,n){return new Is(t,i,n)}var Ht=St.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,i){w(this,t),this._source=i},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&xt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&xt(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(xt(this._container,0),this._removeTimeout=setTimeout(c(Y,void 0,this._container),200)):Y(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=it(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&vi(this._container),this},bringToBack:function(){return this._map&&pi(this._container),this},_prepareOpen:function(t,i,n){if(i instanceof St||(n=i,i=t),i instanceof yi)for(var r in t._layers){i=t._layers[r];break}if(!n)if(i.getCenter)n=i.getCenter();else if(i.getLatLng)n=i.getLatLng();else throw new Error("Unable to get source layer LatLng.");return this._source=i,this.update(),n},_updateContent:function(){if(!!this._content){var t=this._contentNode,i=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof i=="string")t.innerHTML=i;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(i)}this.fire("contentupdate")}},_updatePosition:function(){if(!!this._map){var t=this._map.latLngToLayerPoint(this._latlng),i=F(this.options.offset),n=this._getAnchor();this._zoomAnimated?at(this._container,t.add(n)):i=i.add(t).add(n);var r=this._containerBottom=-i.y,h=this._containerLeft=-Math.round(this._containerWidth/2)+i.x;this._container.style.bottom=r+"px",this._container.style.left=h+"px"}},_getAnchor:function(){return[0,0]}}),Pi=Ht.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){Ht.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Yt||this._source.on("preclick",ai))},onRemove:function(t){Ht.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Yt||this._source.off("preclick",ai))},getEvents:function(){var t=Ht.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",i=this._container=U("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=U("div",t+"-content-wrapper",i);if(this._contentNode=U("div",t+"-content",n),Ui(i),wn(this._contentNode),D(i,"contextmenu",ai),this._tipContainer=U("div",t+"-tip-container",i),this._tip=U("div",t+"-tip",this._tipContainer),this.options.closeButton){var r=this._closeButton=U("a",t+"-close-button",i);r.href="#close",r.innerHTML="&#215;",D(r,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,i=t.style;i.width="",i.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),i.width=n+1+"px",i.whiteSpace="",i.height="";var r=t.offsetHeight,h=this.options.maxHeight,d="leaflet-popup-scrolled";h&&r>h?(i.height=h+"px",Z(t,d)):et(t,d),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();at(this._container,i.add(n))},_adjustPan:function(){if(!!this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,i=parseInt(qi(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+i,r=this._containerWidth,h=new B(this._containerLeft,-n-this._containerBottom);h._add(Jt(this._container));var d=t.layerPointToContainerPoint(h),v=F(this.options.autoPanPadding),g=F(this.options.autoPanPaddingTopLeft||v),M=F(this.options.autoPanPaddingBottomRight||v),b=t.getSize(),A=0,N=0;d.x+r+M.x>b.x&&(A=d.x+r-b.x+M.x),d.x-A-g.x<0&&(A=d.x-g.x),d.y+n+M.y>b.y&&(N=d.y+n-b.y+M.y),d.y-N-g.y<0&&(N=d.y-g.y),(A||N)&&t.fire("autopanstart").panBy([A,N])}},_onCloseButtonClick:function(t){this._close(),Gt(t)},_getAnchor:function(){return F(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Ar=function(t,i){return new Pi(t,i)};W.mergeOptions({closePopupOnClick:!0}),W.include({openPopup:function(t,i,n){return t instanceof Pi||(t=new Pi(n).setContent(t)),i&&t.setLatLng(i),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return(!t||t===this._popup)&&(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),St.include({bindPopup:function(t,i){return t instanceof Pi?(w(t,i),this._popup=t,t._source=this):((!this._popup||i)&&(this._popup=new Pi(i,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,i){return this._popup&&this._map&&(i=this._popup._prepareOpen(this,t,i),this._map.openPopup(this._popup,i)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var i=t.layer||t.target;if(!!this._popup&&!!this._map){if(Gt(t),i instanceof Yt){this.openPopup(t.layer||t.target,t.latlng);return}this._map.hasLayer(this._popup)&&this._popup._source===i?this.closePopup():this.openPopup(i,t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var bi=Ht.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){Ht.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){Ht.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=Ht.prototype.getEvents.call(this);return Ot&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip",i=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=U("div",i)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var i,n,r=this._map,h=this._container,d=r.latLngToContainerPoint(r.getCenter()),v=r.layerPointToContainerPoint(t),g=this.options.direction,M=h.offsetWidth,b=h.offsetHeight,A=F(this.options.offset),N=this._getAnchor();g==="top"?(i=M/2,n=b):g==="bottom"?(i=M/2,n=0):g==="center"?(i=M/2,n=b/2):g==="right"?(i=0,n=b/2):g==="left"?(i=M,n=b/2):v.x<d.x?(g="right",i=0,n=b/2):(g="left",i=M+(A.x+N.x)*2,n=b/2),t=t.subtract(F(i,n,!0)).add(A).add(N),et(h,"leaflet-tooltip-right"),et(h,"leaflet-tooltip-left"),et(h,"leaflet-tooltip-top"),et(h,"leaflet-tooltip-bottom"),Z(h,"leaflet-tooltip-"+g),at(h,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&xt(this._container,t)},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(i)},_getAnchor:function(){return F(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ir=function(t,i){return new bi(t,i)};W.include({openTooltip:function(t,i,n){return t instanceof bi||(t=new bi(n).setContent(t)),i&&t.setLatLng(i),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),St.include({bindTooltip:function(t,i){return t instanceof bi?(w(t,i),this._tooltip=t,t._source=this):((!this._tooltip||i)&&(this._tooltip=new bi(i,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var i=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),Ot&&(n.click=this._openTooltip)),this[i](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,i){return this._tooltip&&this._map&&(i=this._tooltip._prepareOpen(this,t,i),this._map.openTooltip(this._tooltip,i),this._tooltip.options.interactive&&this._tooltip._container&&(Z(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(et(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var i=t.layer||t.target;!this._tooltip||!this._map||this.openTooltip(i,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var i=t.latlng,n,r;this._tooltip.options.sticky&&t.originalEvent&&(n=this._map.mouseEventToContainerPoint(t.originalEvent),r=this._map.containerPointToLayerPoint(n),i=this._map.layerPointToLatLng(r)),this._tooltip.setLatLng(i)}});var Os=Mi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var i=t&&t.tagName==="DIV"?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(pe(i),i.appendChild(n.html)):i.innerHTML=n.html!==!1?n.html:"",n.bgPos){var r=F(n.bgPos);i.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(i,"icon"),i},createShadow:function(){return null}});function Or(t){return new Os(t)}Mi.Default=ji;var Vi=St.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ci,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){w(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Y(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(vi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(pi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof B?t:new B(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var i=this.getPane().children,n=-t(-1/0,1/0),r=0,h=i.length,d;r<h;r++)d=i[r].style.zIndex,i[r]!==this._container&&d&&(n=t(n,+d));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(!!this._map&&!fi){xt(this._container,this.options.opacity);var t=+new Date,i=!1,n=!1;for(var r in this._tiles){var h=this._tiles[r];if(!(!h.current||!h.loaded)){var d=Math.min(1,(t-h.loaded)/200);xt(h.el,d),d<1?i=!0:(h.active?n=!0:this._onOpaqueTile(h),h.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),i&&(ht(this._fadeFrame),this._fadeFrame=Q(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=U("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,i=this.options.maxZoom;if(t!==void 0){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=i-Math.abs(t-n),this._onUpdateLevel(n)):(Y(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var r=this._levels[t],h=this._map;return r||(r=this._levels[t]={},r.el=U("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=i,r.origin=h.project(h.unproject(h.getPixelOrigin()),t).round(),r.zoom=t,this._setZoomTransform(r,h.getCenter(),h.getZoom()),p(r.el.offsetWidth),this._onCreateLevel(r)),this._level=r,r}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(!!this._map){var t,i,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)i=this._tiles[t],i.retain=i.current;for(t in this._tiles)if(i=this._tiles[t],i.current&&!i.active){var r=i.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var i in this._tiles)this._tiles[i].coords.z===t&&this._removeTile(i)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Y(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,i,n,r){var h=Math.floor(t/2),d=Math.floor(i/2),v=n-1,g=new B(+h,+d);g.z=+v;var M=this._tileCoordsToKey(g),b=this._tiles[M];return b&&b.active?(b.retain=!0,!0):(b&&b.loaded&&(b.retain=!0),v>r?this._retainParent(h,d,v,r):!1)},_retainChildren:function(t,i,n,r){for(var h=2*t;h<2*t+2;h++)for(var d=2*i;d<2*i+2;d++){var v=new B(h,d);v.z=n+1;var g=this._tileCoordsToKey(v),M=this._tiles[g];if(M&&M.active){M.retain=!0;continue}else M&&M.loaded&&(M.retain=!0);n+1<r&&this._retainChildren(h,d,n+1,r)}},_resetView:function(t){var i=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),i,i)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var i=this.options;return i.minNativeZoom!==void 0&&t<i.minNativeZoom?i.minNativeZoom:i.maxNativeZoom!==void 0&&i.maxNativeZoom<t?i.maxNativeZoom:t},_setView:function(t,i,n,r){var h=Math.round(i);this.options.maxZoom!==void 0&&h>this.options.maxZoom||this.options.minZoom!==void 0&&h<this.options.minZoom?h=void 0:h=this._clampZoom(h);var d=this.options.updateWhenZooming&&h!==this._tileZoom;(!r||d)&&(this._tileZoom=h,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),h!==void 0&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,i)},_setZoomTransforms:function(t,i){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,i)},_setZoomTransform:function(t,i,n){var r=this._map.getZoomScale(n,t.zoom),h=t.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(i,n)).round();Mt?si(t.el,h,r):at(t.el,h)},_resetGrid:function(){var t=this._map,i=t.options.crs,n=this._tileSize=this.getTileSize(),r=this._tileZoom,h=this._map.getPixelWorldBounds(this._tileZoom);h&&(this._globalTileRange=this._pxBoundsToTileRange(h)),this._wrapX=i.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,i.wrapLng[0]],r).x/n.x),Math.ceil(t.project([0,i.wrapLng[1]],r).x/n.y)],this._wrapY=i.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([i.wrapLat[0],0],r).y/n.x),Math.ceil(t.project([i.wrapLat[1],0],r).y/n.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var i=this._map,n=i._animatingZoom?Math.max(i._animateToZoom,i.getZoom()):i.getZoom(),r=i.getZoomScale(n,this._tileZoom),h=i.project(t,this._tileZoom).floor(),d=i.getSize().divideBy(r*2);return new J(h.subtract(d),h.add(d))},_update:function(t){var i=this._map;if(!!i){var n=this._clampZoom(i.getZoom());if(t===void 0&&(t=i.getCenter()),this._tileZoom!==void 0){var r=this._getTiledPixelBounds(t),h=this._pxBoundsToTileRange(r),d=h.getCenter(),v=[],g=this.options.keepBuffer,M=new J(h.getBottomLeft().subtract([g,-g]),h.getTopRight().add([g,-g]));if(!(isFinite(h.min.x)&&isFinite(h.min.y)&&isFinite(h.max.x)&&isFinite(h.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var b in this._tiles){var A=this._tiles[b].coords;(A.z!==this._tileZoom||!M.contains(new B(A.x,A.y)))&&(this._tiles[b].current=!1)}if(Math.abs(n-this._tileZoom)>1){this._setView(t,n);return}for(var N=h.min.y;N<=h.max.y;N++)for(var H=h.min.x;H<=h.max.x;H++){var $t=new B(H,N);if($t.z=this._tileZoom,!!this._isValidTile($t)){var hi=this._tiles[this._tileCoordsToKey($t)];hi?hi.current=!0:v.push($t)}}if(v.sort(function(ti,Rn){return ti.distanceTo(d)-Rn.distanceTo(d)}),v.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Oe=document.createDocumentFragment();for(H=0;H<v.length;H++)this._addTile(v[H],Oe);this._level.el.appendChild(Oe)}}}},_isValidTile:function(t){var i=this._map.options.crs;if(!i.infinite){var n=this._globalTileRange;if(!i.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!i.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(t);return lt(this.options.bounds).overlaps(r)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var i=this._map,n=this.getTileSize(),r=t.scaleBy(n),h=r.add(n),d=i.unproject(r,t.z),v=i.unproject(h,t.z);return[d,v]},_tileCoordsToBounds:function(t){var i=this._tileCoordsToNwSe(t),n=new vt(i[0],i[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var i=t.split(":"),n=new B(+i[0],+i[1]);return n.z=+i[2],n},_removeTile:function(t){var i=this._tiles[t];!i||(Y(i.el),delete this._tiles[t],this.fire("tileunload",{tile:i.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Z(t,"leaflet-tile");var i=this.getTileSize();t.style.width=i.x+"px",t.style.height=i.y+"px",t.onselectstart=p,t.onmousemove=p,fi&&this.options.opacity<1&&xt(t,this.options.opacity),Ri&&!Zi&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,i){var n=this._getTilePos(t),r=this._tileCoordsToKey(t),h=this.createTile(this._wrapCoords(t),c(this._tileReady,this,t));this._initTile(h),this.createTile.length<2&&Q(c(this._tileReady,this,t,null,h)),at(h,n),this._tiles[r]={el:h,coords:t,current:!0},i.appendChild(h),this.fire("tileloadstart",{tile:h,coords:t})},_tileReady:function(t,i,n){i&&this.fire("tileerror",{error:i,tile:n,coords:t});var r=this._tileCoordsToKey(t);n=this._tiles[r],!!n&&(n.loaded=+new Date,this._map._fadeAnimated?(xt(n.el,0),ht(this._fadeFrame),this._fadeFrame=Q(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),i||(Z(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),fi||!this._map._fadeAnimated?Q(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var i=new B(this._wrapX?y(t.x,this._wrapX):t.x,this._wrapY?y(t.y,this._wrapY):t.y);return i.z=t.z,i},_pxBoundsToTileRange:function(t){var i=this.getTileSize();return new J(t.min.unscaleBy(i).floor(),t.max.unscaleBy(i).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Nr(t){return new Vi(t)}var Li=Vi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,i){this._url=t,i=w(this,i),i.detectRetina&&Qt&&i.maxZoom>0&&(i.tileSize=Math.floor(i.tileSize/2),i.zoomReverse?(i.zoomOffset--,i.minZoom++):(i.zoomOffset++,i.maxZoom--),i.minZoom=Math.max(0,i.minZoom)),typeof i.subdomains=="string"&&(i.subdomains=i.subdomains.split("")),Ri||this.on("tileunload",this._onTileRemove)},setUrl:function(t,i){return this._url===t&&i===void 0&&(i=!0),this._url=t,i||this.redraw(),this},createTile:function(t,i){var n=document.createElement("img");return D(n,"load",c(this._tileOnLoad,this,i,n)),D(n,"error",c(this._tileOnError,this,i,n)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(n.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var i={r:Qt?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(i.y=n),i["-y"]=n}return k(this._url,o(i,this.options))},_tileOnLoad:function(t,i){fi?setTimeout(c(t,this,null,i),0):t(null,i)},_tileOnError:function(t,i,n){var r=this.options.errorTileUrl;r&&i.getAttribute("src")!==r&&(i.src=r),t(n,i)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,i=this.options.maxZoom,n=this.options.zoomReverse,r=this.options.zoomOffset;return n&&(t=i-t),t+r},_getSubdomain:function(t){var i=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[i]},_abortLoading:function(){var t,i;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&(i=this._tiles[t].el,i.onload=p,i.onerror=p,i.complete||(i.src=q,Y(i),delete this._tiles[t]))},_removeTile:function(t){var i=this._tiles[t];if(!!i)return ts||i.el.setAttribute("src",q),Vi.prototype._removeTile.call(this,t)},_tileReady:function(t,i,n){if(!(!this._map||n&&n.getAttribute("src")===q))return Vi.prototype._tileReady.call(this,t,i,n)}});function Ns(t,i){return new Li(t,i)}var zs=Li.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,i){this._url=t;var n=o({},this.defaultWmsParams);for(var r in i)r in this.options||(n[r]=i[r]);i=w(this,i);var h=i.detectRetina&&Qt?2:1,d=this.getTileSize();n.width=d.x*h,n.height=d.y*h,this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var i=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[i]=this._crs.code,Li.prototype.onAdd.call(this,t)},getTileUrl:function(t){var i=this._tileCoordsToNwSe(t),n=this._crs,r=Lt(n.project(i[0]),n.project(i[1])),h=r.min,d=r.max,v=(this._wmsVersion>=1.3&&this._crs===Ts?[h.y,h.x,d.y,d.x]:[h.x,h.y,d.x,d.y]).join(","),g=Li.prototype.getTileUrl.call(this,t);return g+S(this.wmsParams,g,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+v},setParams:function(t,i){return o(this.wmsParams,t),i||this.redraw(),this}});function zr(t,i){return new zs(t,i)}Li.WMS=zs,Ns.wms=zr;var kt=St.extend({options:{padding:.1,tolerance:0},initialize:function(t){w(this,t),_(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&Z(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,i){var n=this._map.getZoomScale(i,this._zoom),r=Jt(this._container),h=this._map.getSize().multiplyBy(.5+this.options.padding),d=this._map.project(this._center,i),v=this._map.project(t,i),g=v.subtract(d),M=h.multiplyBy(-n).add(r).add(h).subtract(g);Mt?si(this._container,M,n):at(this._container,M)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,i=this._map.getSize(),n=this._map.containerPointToLayerPoint(i.multiplyBy(-t)).round();this._bounds=new J(n,n.add(i.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ks=kt.extend({getEvents:function(){var t=kt.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){kt.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");D(t,"mousemove",this._onMouseMove,this),D(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),D(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){ht(this._redrawRequest),delete this._ctx,Y(this._container),nt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var i in this._layers)t=this._layers[i],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){kt.prototype._update.call(this);var t=this._bounds,i=this._container,n=t.getSize(),r=Qt?2:1;at(i,t.min),i.width=r*n.x,i.height=r*n.y,i.style.width=n.x+"px",i.style.height=n.y+"px",Qt&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){kt.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[_(t)]=t;var i=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=i),this._drawLast=i,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var i=t._order,n=i.next,r=i.prev;n?n.prev=r:this._drawLast=r,r?r.next=n:this._drawFirst=n,delete t._order,delete this._layers[_(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var i=t.options.dashArray.split(/[, ]+/),n=[],r,h;for(h=0;h<i.length;h++){if(r=Number(i[h]),isNaN(r))return;n.push(r)}t.options._dashArray=n}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){!this._map||(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||Q(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var i=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new J,this._redrawBounds.extend(t._pxBounds.min.subtract([i,i])),this._redrawBounds.extend(t._pxBounds.max.add([i,i]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var i=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,i.x,i.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,i=this._redrawBounds;if(this._ctx.save(),i){var n=i.getSize();this._ctx.beginPath(),this._ctx.rect(i.min.x,i.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)t=r.layer,(!i||t._pxBounds&&t._pxBounds.intersects(i))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,i){if(!!this._drawing){var n,r,h,d,v=t._parts,g=v.length,M=this._ctx;if(!!g){for(M.beginPath(),n=0;n<g;n++){for(r=0,h=v[n].length;r<h;r++)d=v[n][r],M[r?"lineTo":"moveTo"](d.x,d.y);i&&M.closePath()}this._fillStroke(M,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var i=t._point,n=this._ctx,r=Math.max(Math.round(t._radius),1),h=(Math.max(Math.round(t._radiusY),1)||r)/r;h!==1&&(n.save(),n.scale(1,h)),n.beginPath(),n.arc(i.x,i.y/h,r,0,Math.PI*2,!1),h!==1&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,i){var n=i.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&n.weight!==0&&(t.setLineDash&&t.setLineDash(i.options&&i.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var i=this._map.mouseEventToLayerPoint(t),n,r,h=this._drawFirst;h;h=h.next)n=h.layer,n.options.interactive&&n._containsPoint(i)&&(!(t.type==="click"||t.type!=="preclick")||!this._map._draggableMoved(n))&&(r=n);r&&(bn(t),this._fireEvent([r],t))},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var i=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,i)}},_handleMouseOut:function(t){var i=this._hoveredLayer;i&&(et(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,i){if(!this._mouseHoverThrottled){for(var n,r,h=this._drawFirst;h;h=h.next)n=h.layer,n.options.interactive&&n._containsPoint(i)&&(r=n);r!==this._hoveredLayer&&(this._handleMouseOut(t),r&&(Z(this._container,"leaflet-interactive"),this._fireEvent([r],t,"mouseover"),this._hoveredLayer=r)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,i,n){this._map._fireDOMEvent(i,n||i.type,t)},_bringToFront:function(t){var i=t._order;if(!!i){var n=i.next,r=i.prev;if(n)n.prev=r;else return;r?r.next=n:n&&(this._drawFirst=n),i.prev=this._drawLast,this._drawLast.next=i,i.next=null,this._drawLast=i,this._requestRedraw(t)}},_bringToBack:function(t){var i=t._order;if(!!i){var n=i.next,r=i.prev;if(r)r.next=n;else return;n?n.prev=r:r&&(this._drawLast=r),i.prev=null,i.next=this._drawFirst,this._drawFirst.prev=i,this._drawFirst=i,this._requestRedraw(t)}}});function Bs(t){return rs?new ks(t):null}var Ki=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),kr={_initContainer:function(){this._container=U("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(kt.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var i=t._container=Ki("shape");Z(i,"leaflet-vml-shape "+(this.options.className||"")),i.coordsize="1 1",t._path=Ki("path"),i.appendChild(t._path),this._updateStyle(t),this._layers[_(t)]=t},_addPath:function(t){var i=t._container;this._container.appendChild(i),t.options.interactive&&t.addInteractiveTarget(i)},_removePath:function(t){var i=t._container;Y(i),t.removeInteractiveTarget(i),delete this._layers[_(t)]},_updateStyle:function(t){var i=t._stroke,n=t._fill,r=t.options,h=t._container;h.stroked=!!r.stroke,h.filled=!!r.fill,r.stroke?(i||(i=t._stroke=Ki("stroke")),h.appendChild(i),i.weight=r.weight+"px",i.color=r.color,i.opacity=r.opacity,r.dashArray?i.dashStyle=z(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):i.dashStyle="",i.endcap=r.lineCap.replace("butt","flat"),i.joinstyle=r.lineJoin):i&&(h.removeChild(i),t._stroke=null),r.fill?(n||(n=t._fill=Ki("fill")),h.appendChild(n),n.color=r.fillColor||r.color,n.opacity=r.fillOpacity):n&&(h.removeChild(n),t._fill=null)},_updateCircle:function(t){var i=t._point.round(),n=Math.round(t._radius),r=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+i.x+","+i.y+" "+n+","+r+" 0,"+65535*360)},_setPath:function(t,i){t._path.v=i},_bringToFront:function(t){vi(t._container)},_bringToBack:function(t){pi(t._container)}},Ie=_e?Ki:Jn,Xi=kt.extend({getEvents:function(){var t=kt.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=Ie("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ie("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Y(this._container),nt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){kt.prototype._update.call(this);var t=this._bounds,i=t.getSize(),n=this._container;(!this._svgSize||!this._svgSize.equals(i))&&(this._svgSize=i,n.setAttribute("width",i.x),n.setAttribute("height",i.y)),at(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,i.x,i.y].join(" ")),this.fire("update")}},_initPath:function(t){var i=t._path=Ie("path");t.options.className&&Z(i,t.options.className),t.options.interactive&&Z(i,"leaflet-interactive"),this._updateStyle(t),this._layers[_(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Y(t._path),t.removeInteractiveTarget(t._path),delete this._layers[_(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var i=t._path,n=t.options;!i||(n.stroke?(i.setAttribute("stroke",n.color),i.setAttribute("stroke-opacity",n.opacity),i.setAttribute("stroke-width",n.weight),i.setAttribute("stroke-linecap",n.lineCap),i.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?i.setAttribute("stroke-dasharray",n.dashArray):i.removeAttribute("stroke-dasharray"),n.dashOffset?i.setAttribute("stroke-dashoffset",n.dashOffset):i.removeAttribute("stroke-dashoffset")):i.setAttribute("stroke","none"),n.fill?(i.setAttribute("fill",n.fillColor||n.color),i.setAttribute("fill-opacity",n.fillOpacity),i.setAttribute("fill-rule",n.fillRule||"evenodd")):i.setAttribute("fill","none"))},_updatePoly:function(t,i){this._setPath(t,Yn(t._parts,i))},_updateCircle:function(t){var i=t._point,n=Math.max(Math.round(t._radius),1),r=Math.max(Math.round(t._radiusY),1)||n,h="a"+n+","+r+" 0 1,0 ",d=t._empty()?"M0 0":"M"+(i.x-n)+","+i.y+h+n*2+",0 "+h+-n*2+",0 ";this._setPath(t,d)},_setPath:function(t,i){t._path.setAttribute("d",i)},_bringToFront:function(t){vi(t._path)},_bringToBack:function(t){pi(t._path)}});_e&&Xi.include(kr);function Rs(t){return de||_e?new Xi(t):null}W.include({getRenderer:function(t){var i=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return i||(i=this._renderer=this._createRenderer()),this.hasLayer(i)||this.addLayer(i),i},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var i=this._paneRenderers[t];return i===void 0&&(i=this._createRenderer({pane:t}),this._paneRenderers[t]=i),i},_createRenderer:function(t){return this.options.preferCanvas&&Bs(t)||Rs(t)}});var Zs=xi.extend({initialize:function(t,i){xi.prototype.initialize.call(this,this._boundsToLatLngs(t),i)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=lt(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Br(t,i){return new Zs(t,i)}Xi.create=Ie,Xi.pointsToPath=Yn,Ut.geometryToLayer=Nn,Ut.coordsToLatLng=zn,Ut.coordsToLatLngs=Ce,Ut.latLngToCoords=kn,Ut.latLngsToCoords=Se,Ut.getFeature=wi,Ut.asFeature=Ee,W.mergeOptions({boxZoom:!0});var Ds=zt.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){D(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){nt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Y(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Gi(),mn(),this._startPoint=this._map.mouseEventToContainerPoint(t),D(document,{contextmenu:Gt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=U("div","leaflet-zoom-box",this._container),Z(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var i=new J(this._point,this._startPoint),n=i.getSize();at(this._box,i.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(Y(this._box),et(this._container,"leaflet-crosshair")),Fi(),vn(),nt(document,{contextmenu:Gt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var i=new vt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(i).fire("boxzoomend",{boxZoomBounds:i})}},_onKeyDown:function(t){t.keyCode===27&&this._finish()}});W.addInitHook("addHandler","boxZoom",Ds),W.mergeOptions({doubleClickZoom:!0});var qs=zt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var i=this._map,n=i.getZoom(),r=i.options.zoomDelta,h=t.originalEvent.shiftKey?n-r:n+r;i.options.doubleClickZoom==="center"?i.setZoom(h):i.setZoomAround(t.containerPoint,h)}});W.addInitHook("addHandler","doubleClickZoom",qs),W.mergeOptions({dragging:!0,inertia:!Zi,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Gs=zt.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new ri(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Z(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){et(this._map._container,"leaflet-grab"),et(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var i=lt(this._map.options.maxBounds);this._offsetLimit=Lt(this._map.latLngToContainerPoint(i.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(i.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var i=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(i),this._prunePositions(i)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),i=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=i.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,i){return t-(t-i)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),i=this._offsetLimit;t.x<i.min.x&&(t.x=this._viscousLimit(t.x,i.min.x)),t.y<i.min.y&&(t.y=this._viscousLimit(t.y,i.min.y)),t.x>i.max.x&&(t.x=this._viscousLimit(t.x,i.max.x)),t.y>i.max.y&&(t.y=this._viscousLimit(t.y,i.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,i=Math.round(t/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,h=(r-i+n)%t+i-n,d=(r+i+n)%t-i-n,v=Math.abs(h+n)<Math.abs(d+n)?h:d;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=v},_onDragEnd:function(t){var i=this._map,n=i.options,r=!n.inertia||this._times.length<2;if(i.fire("dragend",t),r)i.fire("moveend");else{this._prunePositions(+new Date);var h=this._lastPos.subtract(this._positions[0]),d=(this._lastTime-this._times[0])/1e3,v=n.easeLinearity,g=h.multiplyBy(v/d),M=g.distanceTo([0,0]),b=Math.min(n.inertiaMaxSpeed,M),A=g.multiplyBy(b/M),N=b/(n.inertiaDeceleration*v),H=A.multiplyBy(-N/2).round();!H.x&&!H.y?i.fire("moveend"):(H=i._limitOffset(H,i.options.maxBounds),Q(function(){i.panBy(H,{duration:N,easeLinearity:v,noMoveStart:!0,animate:!0})}))}}});W.addInitHook("addHandler","dragging",Gs),W.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Fs=zt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),D(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),nt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,i=document.documentElement,n=t.scrollTop||i.scrollTop,r=t.scrollLeft||i.scrollLeft;this._map._container.focus(),window.scrollTo(r,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var i=this._panKeys={},n=this.keyCodes,r,h;for(r=0,h=n.left.length;r<h;r++)i[n.left[r]]=[-1*t,0];for(r=0,h=n.right.length;r<h;r++)i[n.right[r]]=[t,0];for(r=0,h=n.down.length;r<h;r++)i[n.down[r]]=[0,t];for(r=0,h=n.up.length;r<h;r++)i[n.up[r]]=[0,-1*t]},_setZoomDelta:function(t){var i=this._zoomKeys={},n=this.keyCodes,r,h;for(r=0,h=n.zoomIn.length;r<h;r++)i[n.zoomIn[r]]=t;for(r=0,h=n.zoomOut.length;r<h;r++)i[n.zoomOut[r]]=-t},_addHooks:function(){D(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){nt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var i=t.keyCode,n=this._map,r;if(i in this._panKeys)(!n._panAnim||!n._panAnim._inProgress)&&(r=this._panKeys[i],t.shiftKey&&(r=F(r).multiplyBy(3)),n.panBy(r),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds));else if(i in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else if(i===27&&n._popup&&n._popup.options.closeOnEscapeKey)n.closePopup();else return;Gt(t)}}});W.addInitHook("addHandler","keyboard",Fs),W.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ws=zt.extend({addHooks:function(){D(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){nt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var i=_s(t),n=this._map.options.wheelDebounceTime;this._delta+=i,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var r=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),r),Gt(t)},_performZoom:function(){var t=this._map,i=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var r=this._delta/(this._map.options.wheelPxPerZoomLevel*4),h=4*Math.log(2/(1+Math.exp(-Math.abs(r))))/Math.LN2,d=n?Math.ceil(h/n)*n:h,v=t._limitZoom(i+(this._delta>0?d:-d))-i;this._delta=0,this._startTime=null,!!v&&(t.options.scrollWheelZoom==="center"?t.setZoom(i+v):t.setZoomAround(this._lastMousePos,i+v))}});W.addInitHook("addHandler","scrollWheelZoom",Ws),W.mergeOptions({tap:!0,tapTolerance:15});var Us=zt.extend({addHooks:function(){D(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){nt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(!!t.touches){if(wt(t),this._fireClick=!0,t.touches.length>1){this._fireClick=!1,clearTimeout(this._holdTimeout);return}var i=t.touches[0],n=i.target;this._startPos=this._newPos=new B(i.clientX,i.clientY),n.tagName&&n.tagName.toLowerCase()==="a"&&Z(n,"leaflet-active"),this._holdTimeout=setTimeout(c(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",i))},this),1e3),this._simulateEvent("mousedown",i),D(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),nt(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var i=t.changedTouches[0],n=i.target;n&&n.tagName&&n.tagName.toLowerCase()==="a"&&et(n,"leaflet-active"),this._simulateEvent("mouseup",i),this._isTapValid()&&this._simulateEvent("click",i)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var i=t.touches[0];this._newPos=new B(i.clientX,i.clientY),this._simulateEvent("mousemove",i)},_simulateEvent:function(t,i){var n=document.createEvent("MouseEvents");n._simulated=!0,i.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),i.target.dispatchEvent(n)}});Ot&&(!It||ce)&&W.addInitHook("addHandler","tap",Us),W.mergeOptions({touchZoom:Ot&&!Zi,bounceAtZoomLimits:!0});var Hs=zt.extend({addHooks:function(){Z(this._map._container,"leaflet-touch-zoom"),D(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){et(this._map._container,"leaflet-touch-zoom"),nt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var i=this._map;if(!(!t.touches||t.touches.length!==2||i._animatingZoom||this._zooming)){var n=i.mouseEventToContainerPoint(t.touches[0]),r=i.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=i.getSize()._divideBy(2),this._startLatLng=i.containerPointToLatLng(this._centerPoint),i.options.touchZoom!=="center"&&(this._pinchStartLatLng=i.containerPointToLatLng(n.add(r)._divideBy(2))),this._startDist=n.distanceTo(r),this._startZoom=i.getZoom(),this._moved=!1,this._zooming=!0,i._stop(),D(document,"touchmove",this._onTouchMove,this),D(document,"touchend",this._onTouchEnd,this),wt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var i=this._map,n=i.mouseEventToContainerPoint(t.touches[0]),r=i.mouseEventToContainerPoint(t.touches[1]),h=n.distanceTo(r)/this._startDist;if(this._zoom=i.getScaleZoom(h,this._startZoom),!i.options.bounceAtZoomLimits&&(this._zoom<i.getMinZoom()&&h<1||this._zoom>i.getMaxZoom()&&h>1)&&(this._zoom=i._limitZoom(this._zoom)),i.options.touchZoom==="center"){if(this._center=this._startLatLng,h===1)return}else{var d=n._add(r)._divideBy(2)._subtract(this._centerPoint);if(h===1&&d.x===0&&d.y===0)return;this._center=i.unproject(i.project(this._pinchStartLatLng,this._zoom).subtract(d),this._zoom)}this._moved||(i._moveStart(!0,!1),this._moved=!0),ht(this._animRequest);var v=c(i._move,i,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=Q(v,this,!0),wt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ht(this._animRequest),nt(document,"touchmove",this._onTouchMove,this),nt(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});W.addInitHook("addHandler","touchZoom",Hs),W.BoxZoom=Ds,W.DoubleClickZoom=qs,W.Drag=Gs,W.Keyboard=Fs,W.ScrollWheelZoom=Ws,W.Tap=Us,W.TouchZoom=Hs,a.version=l,a.Control=Ct,a.control=Hi,a.Browser=Wa,a.Evented=ki,a.Mixin=hr,a.Util=Ve,a.Class=Dt,a.Handler=zt,a.extend=o,a.bind=c,a.stamp=_,a.setOptions=w,a.DomEvent=er,a.DomUtil=tr,a.PosAnimation=ms,a.Draggable=ri,a.LineUtil=dr,a.PolyUtil=_r,a.Point=B,a.point=F,a.Bounds=J,a.bounds=Lt,a.Transformation=Xe,a.transformation=Bi,a.Projection=mr,a.LatLng=K,a.latLng=it,a.LatLngBounds=vt,a.latLngBounds=lt,a.CRS=qt,a.GeoJSON=Ut,a.geoJSON=Es,a.geoJson=Tr,a.Layer=St,a.LayerGroup=gi,a.layerGroup=gr,a.FeatureGroup=yi,a.featureGroup=yr,a.ImageOverlay=Ae,a.imageOverlay=Cr,a.VideoOverlay=As,a.videoOverlay=Sr,a.SVGOverlay=Is,a.svgOverlay=Er,a.DivOverlay=Ht,a.Popup=Pi,a.popup=Ar,a.Tooltip=bi,a.tooltip=Ir,a.Icon=Mi,a.icon=Mr,a.DivIcon=Os,a.divIcon=Or,a.Marker=Le,a.marker=xr,a.TileLayer=Li,a.tileLayer=Ns,a.GridLayer=Vi,a.gridLayer=Nr,a.SVG=Xi,a.svg=Rs,a.Renderer=kt,a.Canvas=ks,a.canvas=Bs,a.Path=Yt,a.CircleMarker=Te,a.circleMarker=wr,a.Circle=On,a.circle=Pr,a.Polyline=Wt,a.polyline=br,a.Polygon=xi,a.polygon=Lr,a.Rectangle=Zs,a.rectangle=Br,a.Map=W,a.map=nr;var Rr=window.L;a.noConflict=function(){return window.L=Rr,this},window.L=a})})(Ba,Ba.exports);export{Pt as p};
